(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function hf(t,e){const n=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}function Vs(t){if(ue(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=ct(r)?u0(r):Vs(r);if(s)for(const i in s)e[i]=s[i]}return e}else{if(ct(t))return t;if(Ue(t))return t}}const o0=/;(?![^(]*\))/g,a0=/:([^]+)/,l0=/\/\*.*?\*\//gs;function u0(t){const e={};return t.replace(l0,"").split(o0).forEach(n=>{if(n){const r=n.split(a0);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Lt(t){let e="";if(ct(t))e=t;else if(ue(t))for(let n=0;n<t.length;n++){const r=Lt(t[n]);r&&(e+=r+" ")}else if(Ue(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const c0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",f0=hf(c0);function Ng(t){return!!t||t===""}function h0(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=cl(t[r],e[r]);return n}function cl(t,e){if(t===e)return!0;let n=bd(t),r=bd(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Yi(t),r=Yi(e),n||r)return t===e;if(n=ue(t),r=ue(e),n||r)return n&&r?h0(t,e):!1;if(n=Ue(t),r=Ue(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(a&&!u||!a&&u||!cl(t[o],e[o]))return!1}}return String(t)===String(e)}function d0(t,e){return t.findIndex(n=>cl(n,e))}const ae=t=>ct(t)?t:t==null?"":ue(t)||Ue(t)&&(t.toString===xg||!we(t.toString))?JSON.stringify(t,Lg,2):String(t),Lg=(t,e)=>e&&e.__v_isRef?Lg(t,e.value):Ds(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:hl(e)?{[`Set(${e.size})`]:[...e.values()]}:Ue(e)&&!ue(e)&&!Pg(e)?String(e):e,We={},Ls=[],hn=()=>{},m0=()=>!1,p0=/^on[^a-z]/,fl=t=>p0.test(t),df=t=>t.startsWith("onUpdate:"),St=Object.assign,mf=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},g0=Object.prototype.hasOwnProperty,Oe=(t,e)=>g0.call(t,e),ue=Array.isArray,Ds=t=>vo(t)==="[object Map]",hl=t=>vo(t)==="[object Set]",bd=t=>vo(t)==="[object Date]",we=t=>typeof t=="function",ct=t=>typeof t=="string",Yi=t=>typeof t=="symbol",Ue=t=>t!==null&&typeof t=="object",Dg=t=>Ue(t)&&we(t.then)&&we(t.catch),xg=Object.prototype.toString,vo=t=>xg.call(t),_0=t=>vo(t).slice(8,-1),Pg=t=>vo(t)==="[object Object]",pf=t=>ct(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ga=hf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),dl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},y0=/-(\w)/g,Nn=dl(t=>t.replace(y0,(e,n)=>n?n.toUpperCase():"")),v0=/\B([A-Z])/g,ii=dl(t=>t.replace(v0,"-$1").toLowerCase()),ml=dl(t=>t.charAt(0).toUpperCase()+t.slice(1)),yu=dl(t=>t?`on${ml(t)}`:""),Xi=(t,e)=>!Object.is(t,e),_a=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Ca=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},pl=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let wd;const b0=()=>wd||(wd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Yt;class Mg{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Yt,!e&&Yt&&(this.index=(Yt.scopes||(Yt.scopes=[])).push(this)-1)}run(e){if(this.active){const n=Yt;try{return Yt=this,e()}finally{Yt=n}}}on(){Yt=this}off(){Yt=this.parent}stop(e){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this.active=!1}}}function gf(t){return new Mg(t)}function w0(t,e=Yt){e&&e.active&&e.effects.push(t)}function E0(){return Yt}function T0(t){Yt&&Yt.cleanups.push(t)}const _f=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Fg=t=>(t.w&Tr)>0,Ug=t=>(t.n&Tr)>0,I0=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Tr},A0=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const s=e[r];Fg(s)&&!Ug(s)?s.delete(t):e[n++]=s,s.w&=~Tr,s.n&=~Tr}e.length=n}},Ju=new WeakMap;let ki=0,Tr=1;const Zu=30;let un;const Xr=Symbol(""),ec=Symbol("");class yf{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,w0(this,r)}run(){if(!this.active)return this.fn();let e=un,n=gr;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=un,un=this,gr=!0,Tr=1<<++ki,ki<=Zu?I0(this):Ed(this),this.fn()}finally{ki<=Zu&&A0(this),Tr=1<<--ki,un=this.parent,gr=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){un===this?this.deferStop=!0:this.active&&(Ed(this),this.onStop&&this.onStop(),this.active=!1)}}function Ed(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let gr=!0;const $g=[];function oi(){$g.push(gr),gr=!1}function ai(){const t=$g.pop();gr=t===void 0?!0:t}function en(t,e,n){if(gr&&un){let r=Ju.get(t);r||Ju.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=_f()),Vg(s)}}function Vg(t,e){let n=!1;ki<=Zu?Ug(t)||(t.n|=Tr,n=!Fg(t)):n=!t.has(un),n&&(t.add(un),un.deps.push(t))}function jn(t,e,n,r,s,i){const o=Ju.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ue(t)){const u=pl(r);o.forEach((c,h)=>{(h==="length"||h>=u)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ue(t)?pf(n)&&a.push(o.get("length")):(a.push(o.get(Xr)),Ds(t)&&a.push(o.get(ec)));break;case"delete":ue(t)||(a.push(o.get(Xr)),Ds(t)&&a.push(o.get(ec)));break;case"set":Ds(t)&&a.push(o.get(Xr));break}if(a.length===1)a[0]&&tc(a[0]);else{const u=[];for(const c of a)c&&u.push(...c);tc(_f(u))}}function tc(t,e){const n=ue(t)?t:[...t];for(const r of n)r.computed&&Td(r);for(const r of n)r.computed||Td(r)}function Td(t,e){(t!==un||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const S0=hf("__proto__,__v_isRef,__isVue"),Bg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Yi)),k0=vf(),C0=vf(!1,!0),R0=vf(!0),Id=O0();function O0(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Le(this);for(let i=0,o=this.length;i<o;i++)en(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Le)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){oi();const r=Le(this)[e].apply(this,n);return ai(),r}}),t}function vf(t=!1,e=!1){return function(r,s,i){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&i===(t?e?G0:Gg:e?Wg:qg).get(r))return r;const o=ue(r);if(!t&&o&&Oe(Id,s))return Reflect.get(Id,s,i);const a=Reflect.get(r,s,i);return(Yi(s)?Bg.has(s):S0(s))||(t||en(r,"get",s),e)?a:Ve(a)?o&&pf(s)?a:a.value:Ue(a)?t?Kg(a):Xn(a):a}}const N0=jg(),L0=jg(!0);function jg(t=!1){return function(n,r,s,i){let o=n[r];if(Bs(o)&&Ve(o)&&!Ve(s))return!1;if(!t&&(!Ra(s)&&!Bs(s)&&(o=Le(o),s=Le(s)),!ue(n)&&Ve(o)&&!Ve(s)))return o.value=s,!0;const a=ue(n)&&pf(r)?Number(r)<n.length:Oe(n,r),u=Reflect.set(n,r,s,i);return n===Le(i)&&(a?Xi(s,o)&&jn(n,"set",r,s):jn(n,"add",r,s)),u}}function D0(t,e){const n=Oe(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&jn(t,"delete",e,void 0),r}function x0(t,e){const n=Reflect.has(t,e);return(!Yi(e)||!Bg.has(e))&&en(t,"has",e),n}function P0(t){return en(t,"iterate",ue(t)?"length":Xr),Reflect.ownKeys(t)}const Hg={get:k0,set:N0,deleteProperty:D0,has:x0,ownKeys:P0},M0={get:R0,set(t,e){return!0},deleteProperty(t,e){return!0}},F0=St({},Hg,{get:C0,set:L0}),bf=t=>t,gl=t=>Reflect.getPrototypeOf(t);function Jo(t,e,n=!1,r=!1){t=t.__v_raw;const s=Le(t),i=Le(e);n||(e!==i&&en(s,"get",e),en(s,"get",i));const{has:o}=gl(s),a=r?bf:n?Tf:Qi;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function Zo(t,e=!1){const n=this.__v_raw,r=Le(n),s=Le(t);return e||(t!==s&&en(r,"has",t),en(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function ea(t,e=!1){return t=t.__v_raw,!e&&en(Le(t),"iterate",Xr),Reflect.get(t,"size",t)}function Ad(t){t=Le(t);const e=Le(this);return gl(e).has.call(e,t)||(e.add(t),jn(e,"add",t,t)),this}function Sd(t,e){e=Le(e);const n=Le(this),{has:r,get:s}=gl(n);let i=r.call(n,t);i||(t=Le(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?Xi(e,o)&&jn(n,"set",t,e):jn(n,"add",t,e),this}function kd(t){const e=Le(this),{has:n,get:r}=gl(e);let s=n.call(e,t);s||(t=Le(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&jn(e,"delete",t,void 0),i}function Cd(){const t=Le(this),e=t.size!==0,n=t.clear();return e&&jn(t,"clear",void 0,void 0),n}function ta(t,e){return function(r,s){const i=this,o=i.__v_raw,a=Le(o),u=e?bf:t?Tf:Qi;return!t&&en(a,"iterate",Xr),o.forEach((c,h)=>r.call(s,u(c),u(h),i))}}function na(t,e,n){return function(...r){const s=this.__v_raw,i=Le(s),o=Ds(i),a=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,c=s[t](...r),h=n?bf:e?Tf:Qi;return!e&&en(i,"iterate",u?ec:Xr),{next(){const{value:l,done:f}=c.next();return f?{value:l,done:f}:{value:a?[h(l[0]),h(l[1])]:h(l),done:f}},[Symbol.iterator](){return this}}}}function Zn(t){return function(...e){return t==="delete"?!1:this}}function U0(){const t={get(i){return Jo(this,i)},get size(){return ea(this)},has:Zo,add:Ad,set:Sd,delete:kd,clear:Cd,forEach:ta(!1,!1)},e={get(i){return Jo(this,i,!1,!0)},get size(){return ea(this)},has:Zo,add:Ad,set:Sd,delete:kd,clear:Cd,forEach:ta(!1,!0)},n={get(i){return Jo(this,i,!0)},get size(){return ea(this,!0)},has(i){return Zo.call(this,i,!0)},add:Zn("add"),set:Zn("set"),delete:Zn("delete"),clear:Zn("clear"),forEach:ta(!0,!1)},r={get(i){return Jo(this,i,!0,!0)},get size(){return ea(this,!0)},has(i){return Zo.call(this,i,!0)},add:Zn("add"),set:Zn("set"),delete:Zn("delete"),clear:Zn("clear"),forEach:ta(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=na(i,!1,!1),n[i]=na(i,!0,!1),e[i]=na(i,!1,!0),r[i]=na(i,!0,!0)}),[t,n,e,r]}const[$0,V0,B0,j0]=U0();function wf(t,e){const n=e?t?j0:B0:t?V0:$0;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Oe(n,s)&&s in r?n:r,s,i)}const H0={get:wf(!1,!1)},q0={get:wf(!1,!0)},W0={get:wf(!0,!1)},qg=new WeakMap,Wg=new WeakMap,Gg=new WeakMap,G0=new WeakMap;function K0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function z0(t){return t.__v_skip||!Object.isExtensible(t)?0:K0(_0(t))}function Xn(t){return Bs(t)?t:Ef(t,!1,Hg,H0,qg)}function Y0(t){return Ef(t,!1,F0,q0,Wg)}function Kg(t){return Ef(t,!0,M0,W0,Gg)}function Ef(t,e,n,r,s){if(!Ue(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=z0(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function _r(t){return Bs(t)?_r(t.__v_raw):!!(t&&t.__v_isReactive)}function Bs(t){return!!(t&&t.__v_isReadonly)}function Ra(t){return!!(t&&t.__v_isShallow)}function zg(t){return _r(t)||Bs(t)}function Le(t){const e=t&&t.__v_raw;return e?Le(e):t}function rs(t){return Ca(t,"__v_skip",!0),t}const Qi=t=>Ue(t)?Xn(t):t,Tf=t=>Ue(t)?Kg(t):t;function Yg(t){gr&&un&&(t=Le(t),Vg(t.dep||(t.dep=_f())))}function Xg(t,e){t=Le(t),t.dep&&tc(t.dep)}function Ve(t){return!!(t&&t.__v_isRef===!0)}function Ye(t){return Jg(t,!1)}function Qg(t){return Jg(t,!0)}function Jg(t,e){return Ve(t)?t:new X0(t,e)}class X0{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Le(e),this._value=n?e:Qi(e)}get value(){return Yg(this),this._value}set value(e){const n=this.__v_isShallow||Ra(e)||Bs(e);e=n?e:Le(e),Xi(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Qi(e),Xg(this))}}function J(t){return Ve(t)?t.value:t}const Q0={get:(t,e,n)=>J(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Ve(s)&&!Ve(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Zg(t){return _r(t)?t:new Proxy(t,Q0)}function J0(t){const e=ue(t)?new Array(t.length):{};for(const n in t)e[n]=Tn(t,n);return e}class Z0{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function Tn(t,e,n){const r=t[e];return Ve(r)?r:new Z0(t,e,n)}var e_;class eE{constructor(e,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[e_]=!1,this._dirty=!0,this.effect=new yf(e,()=>{this._dirty||(this._dirty=!0,Xg(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=Le(this);return Yg(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}e_="__v_isReadonly";function tE(t,e,n=!1){let r,s;const i=we(t);return i?(r=t,s=hn):(r=t.get,s=t.set),new eE(r,s,i||!s,n)}function yr(t,e,n,r){let s;try{s=r?t(...r):t()}catch(i){_l(i,e,n)}return s}function on(t,e,n,r){if(we(t)){const i=yr(t,e,n,r);return i&&Dg(i)&&i.catch(o=>{_l(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(on(t[i],e,n,r));return s}function _l(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const c=i.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](t,o,a)===!1)return}i=i.parent}const u=e.appContext.config.errorHandler;if(u){yr(u,null,10,[t,o,a]);return}}nE(t,n,s,r)}function nE(t,e,n,r=!0){console.error(t)}let Ji=!1,nc=!1;const Ot=[];let In=0;const xs=[];let Mn=null,jr=0;const t_=Promise.resolve();let If=null;function pr(t){const e=If||t_;return t?e.then(this?t.bind(this):t):e}function rE(t){let e=In+1,n=Ot.length;for(;e<n;){const r=e+n>>>1;Zi(Ot[r])<t?e=r+1:n=r}return e}function Af(t){(!Ot.length||!Ot.includes(t,Ji&&t.allowRecurse?In+1:In))&&(t.id==null?Ot.push(t):Ot.splice(rE(t.id),0,t),n_())}function n_(){!Ji&&!nc&&(nc=!0,If=t_.then(s_))}function sE(t){const e=Ot.indexOf(t);e>In&&Ot.splice(e,1)}function iE(t){ue(t)?xs.push(...t):(!Mn||!Mn.includes(t,t.allowRecurse?jr+1:jr))&&xs.push(t),n_()}function Rd(t,e=Ji?In+1:0){for(;e<Ot.length;e++){const n=Ot[e];n&&n.pre&&(Ot.splice(e,1),e--,n())}}function r_(t){if(xs.length){const e=[...new Set(xs)];if(xs.length=0,Mn){Mn.push(...e);return}for(Mn=e,Mn.sort((n,r)=>Zi(n)-Zi(r)),jr=0;jr<Mn.length;jr++)Mn[jr]();Mn=null,jr=0}}const Zi=t=>t.id==null?1/0:t.id,oE=(t,e)=>{const n=Zi(t)-Zi(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function s_(t){nc=!1,Ji=!0,Ot.sort(oE);const e=hn;try{for(In=0;In<Ot.length;In++){const n=Ot[In];n&&n.active!==!1&&yr(n,null,14)}}finally{In=0,Ot.length=0,r_(),Ji=!1,If=null,(Ot.length||xs.length)&&s_()}}function aE(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||We;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:l,trim:f}=r[h]||We;f&&(s=n.map(d=>ct(d)?d.trim():d)),l&&(s=n.map(pl))}let a,u=r[a=yu(e)]||r[a=yu(Nn(e))];!u&&i&&(u=r[a=yu(ii(e))]),u&&on(u,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,on(c,t,6,s)}}function i_(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!we(t)){const u=c=>{const h=i_(c,e,!0);h&&(a=!0,St(o,h))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!a?(Ue(t)&&r.set(t,null),null):(ue(i)?i.forEach(u=>o[u]=null):St(o,i),Ue(t)&&r.set(t,o),o)}function yl(t,e){return!t||!fl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Oe(t,e[0].toLowerCase()+e.slice(1))||Oe(t,ii(e))||Oe(t,e))}let Xt=null,o_=null;function Oa(t){const e=Xt;return Xt=t,o_=t&&t.type.__scopeId||null,e}function Vt(t,e=Xt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&$d(-1);const i=Oa(e);let o;try{o=t(...s)}finally{Oa(i),r._d&&$d(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function vu(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:u,emit:c,render:h,renderCache:l,data:f,setupState:d,ctx:g,inheritAttrs:y}=t;let v,p;const E=Oa(t);try{if(n.shapeFlag&4){const w=s||r;v=wn(h.call(w,w,l,i,d,f,g)),p=u}else{const w=e;v=wn(w.length>1?w(i,{attrs:u,slots:a,emit:c}):w(i,null)),p=e.props?u:lE(u)}}catch(w){Pi.length=0,_l(w,t,1),v=oe(dn)}let T=v;if(p&&y!==!1){const w=Object.keys(p),{shapeFlag:S}=T;w.length&&S&7&&(o&&w.some(df)&&(p=uE(p,o)),T=Ir(T,p))}return n.dirs&&(T=Ir(T),T.dirs=T.dirs?T.dirs.concat(n.dirs):n.dirs),n.transition&&(T.transition=n.transition),v=T,Oa(E),v}const lE=t=>{let e;for(const n in t)(n==="class"||n==="style"||fl(n))&&((e||(e={}))[n]=t[n]);return e},uE=(t,e)=>{const n={};for(const r in t)(!df(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function cE(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:u}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?Od(r,o,c):!!o;if(u&8){const h=e.dynamicProps;for(let l=0;l<h.length;l++){const f=h[l];if(o[f]!==r[f]&&!yl(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Od(r,o,c):!0:!!o;return!1}function Od(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!yl(n,i))return!0}return!1}function fE({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const hE=t=>t.__isSuspense;function dE(t,e){e&&e.pendingBranch?ue(t)?e.effects.push(...t):e.effects.push(t):iE(t)}function Ps(t,e){if(yt){let n=yt.provides;const r=yt.parent&&yt.parent.provides;r===n&&(n=yt.provides=Object.create(r)),n[t]=e}}function Zt(t,e,n=!1){const r=yt||Xt;if(r){const s=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&we(e)?e.call(r.proxy):e}}function mE(t,e){return Sf(t,null,e)}const ra={};function lt(t,e,n){return Sf(t,e,n)}function Sf(t,e,{immediate:n,deep:r,flush:s,onTrack:i,onTrigger:o}=We){const a=yt;let u,c=!1,h=!1;if(Ve(t)?(u=()=>t.value,c=Ra(t)):_r(t)?(u=()=>t,r=!0):ue(t)?(h=!0,c=t.some(T=>_r(T)||Ra(T)),u=()=>t.map(T=>{if(Ve(T))return T.value;if(_r(T))return Gr(T);if(we(T))return yr(T,a,2)})):we(t)?e?u=()=>yr(t,a,2):u=()=>{if(!(a&&a.isUnmounted))return l&&l(),on(t,a,3,[f])}:u=hn,e&&r){const T=u;u=()=>Gr(T())}let l,f=T=>{l=p.onStop=()=>{yr(T,a,4)}},d;if(to)if(f=hn,e?n&&on(e,a,3,[u(),h?[]:void 0,f]):u(),s==="sync"){const T=iT();d=T.__watcherHandles||(T.__watcherHandles=[])}else return hn;let g=h?new Array(t.length).fill(ra):ra;const y=()=>{if(p.active)if(e){const T=p.run();(r||c||(h?T.some((w,S)=>Xi(w,g[S])):Xi(T,g)))&&(l&&l(),on(e,a,3,[T,g===ra?void 0:h&&g[0]===ra?[]:g,f]),g=T)}else p.run()};y.allowRecurse=!!e;let v;s==="sync"?v=y:s==="post"?v=()=>Wt(y,a&&a.suspense):(y.pre=!0,a&&(y.id=a.uid),v=()=>Af(y));const p=new yf(u,v);e?n?y():g=p.run():s==="post"?Wt(p.run.bind(p),a&&a.suspense):p.run();const E=()=>{p.stop(),a&&a.scope&&mf(a.scope.effects,p)};return d&&d.push(E),E}function pE(t,e,n){const r=this.proxy,s=ct(t)?t.includes(".")?a_(r,t):()=>r[t]:t.bind(r,r);let i;we(e)?i=e:(i=e.handler,n=e);const o=yt;Hs(this);const a=Sf(s,i.bind(r),n);return o?Hs(o):Qr(),a}function a_(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Gr(t,e){if(!Ue(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Ve(t))Gr(t.value,e);else if(ue(t))for(let n=0;n<t.length;n++)Gr(t[n],e);else if(hl(t)||Ds(t))t.forEach(n=>{Gr(n,e)});else if(Pg(t))for(const n in t)Gr(t[n],e);return t}function gE(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return bo(()=>{t.isMounted=!0}),wl(()=>{t.isUnmounting=!0}),t}const sn=[Function,Array],_E={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:sn,onEnter:sn,onAfterEnter:sn,onEnterCancelled:sn,onBeforeLeave:sn,onLeave:sn,onAfterLeave:sn,onLeaveCancelled:sn,onBeforeAppear:sn,onAppear:sn,onAfterAppear:sn,onAppearCancelled:sn},setup(t,{slots:e}){const n=Hn(),r=gE();let s;return()=>{const i=e.default&&c_(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const y of i)if(y.type!==dn){o=y;break}}const a=Le(t),{mode:u}=a;if(r.isLeaving)return bu(o);const c=Nd(o);if(!c)return bu(o);const h=rc(c,a,r,n);sc(c,h);const l=n.subTree,f=l&&Nd(l);let d=!1;const{getTransitionKey:g}=c.type;if(g){const y=g();s===void 0?s=y:y!==s&&(s=y,d=!0)}if(f&&f.type!==dn&&(!Hr(c,f)||d)){const y=rc(f,a,r,n);if(sc(f,y),u==="out-in")return r.isLeaving=!0,y.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},bu(o);u==="in-out"&&c.type!==dn&&(y.delayLeave=(v,p,E)=>{const T=u_(r,f);T[String(f.key)]=f,v._leaveCb=()=>{p(),v._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=E})}return o}}},l_=_E;function u_(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function rc(t,e,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:l,onLeave:f,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:y,onAppear:v,onAfterAppear:p,onAppearCancelled:E}=e,T=String(t.key),w=u_(n,t),S=(P,F)=>{P&&on(P,r,9,F)},N=(P,F)=>{const Q=F[1];S(P,F),ue(P)?P.every(Z=>Z.length<=1)&&Q():P.length<=1&&Q()},L={mode:i,persisted:o,beforeEnter(P){let F=a;if(!n.isMounted)if(s)F=y||a;else return;P._leaveCb&&P._leaveCb(!0);const Q=w[T];Q&&Hr(t,Q)&&Q.el._leaveCb&&Q.el._leaveCb(),S(F,[P])},enter(P){let F=u,Q=c,Z=h;if(!n.isMounted)if(s)F=v||u,Q=p||c,Z=E||h;else return;let W=!1;const te=P._enterCb=ce=>{W||(W=!0,ce?S(Z,[P]):S(Q,[P]),L.delayedLeave&&L.delayedLeave(),P._enterCb=void 0)};F?N(F,[P,te]):te()},leave(P,F){const Q=String(t.key);if(P._enterCb&&P._enterCb(!0),n.isUnmounting)return F();S(l,[P]);let Z=!1;const W=P._leaveCb=te=>{Z||(Z=!0,F(),te?S(g,[P]):S(d,[P]),P._leaveCb=void 0,w[Q]===t&&delete w[Q])};w[Q]=t,f?N(f,[P,W]):W()},clone(P){return rc(P,e,n,r)}};return L}function bu(t){if(vl(t))return t=Ir(t),t.children=null,t}function Nd(t){return vl(t)?t.children?t.children[0]:void 0:t}function sc(t,e){t.shapeFlag&6&&t.component?sc(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function c_(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===ot?(o.patchFlag&128&&s++,r=r.concat(c_(o.children,e,a))):(e||o.type!==dn)&&r.push(a!=null?Ir(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function li(t){return we(t)?{setup:t,name:t.name}:t}const ya=t=>!!t.type.__asyncLoader,vl=t=>t.type.__isKeepAlive;function yE(t,e){f_(t,"a",e)}function vE(t,e){f_(t,"da",e)}function f_(t,e,n=yt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(bl(e,r,n),n){let s=n.parent;for(;s&&s.parent;)vl(s.parent.vnode)&&bE(r,e,n,s),s=s.parent}}function bE(t,e,n,r){const s=bl(e,t,r,!0);kf(()=>{mf(r[e],s)},n)}function bl(t,e,n=yt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;oi(),Hs(n);const a=on(e,n,t,o);return Qr(),ai(),a});return r?s.unshift(i):s.push(i),i}}const Qn=t=>(e,n=yt)=>(!to||t==="sp")&&bl(t,(...r)=>e(...r),n),h_=Qn("bm"),bo=Qn("m"),wE=Qn("bu"),EE=Qn("u"),wl=Qn("bum"),kf=Qn("um"),TE=Qn("sp"),IE=Qn("rtg"),AE=Qn("rtc");function SE(t,e=yt){bl("ec",t,e)}function Na(t,e){const n=Xt;if(n===null)return t;const r=Il(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,u,c=We]=e[i];o&&(we(o)&&(o={mounted:o,updated:o}),o.deep&&Gr(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:u,modifiers:c}))}return t}function Mr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let u=a.dir[r];u&&(oi(),on(u,n,8,[t.el,a,t,e]),ai())}}const Cf="components",kE="directives";function Xe(t,e){return Rf(Cf,t,!0,e)||t}const d_=Symbol();function El(t){return ct(t)?Rf(Cf,t,!1)||t:t||d_}function CE(t){return Rf(kE,t)}function Rf(t,e,n=!0,r=!1){const s=Xt||yt;if(s){const i=s.type;if(t===Cf){const a=nT(i,!1);if(a&&(a===e||a===Nn(e)||a===ml(Nn(e))))return i}const o=Ld(s[t]||i[t],e)||Ld(s.appContext[t],e);return!o&&r?i:o}}function Ld(t,e){return t&&(t[e]||t[Nn(e)]||t[ml(Nn(e))])}function wo(t,e,n,r){let s;const i=n&&n[r];if(ue(t)||ct(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(Ue(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,u=o.length;a<u;a++){const c=o[a];s[a]=e(t[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const ic=t=>t?A_(t)?Il(t)||t.proxy:ic(t.parent):null,xi=St(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ic(t.parent),$root:t=>ic(t.root),$emit:t=>t.emit,$options:t=>Of(t),$forceUpdate:t=>t.f||(t.f=()=>Af(t.update)),$nextTick:t=>t.n||(t.n=pr.bind(t.proxy)),$watch:t=>pE.bind(t)}),wu=(t,e)=>t!==We&&!t.__isScriptSetup&&Oe(t,e),RE={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:u}=t;let c;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(wu(r,e))return o[e]=1,r[e];if(s!==We&&Oe(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&Oe(c,e))return o[e]=3,i[e];if(n!==We&&Oe(n,e))return o[e]=4,n[e];oc&&(o[e]=0)}}const h=xi[e];let l,f;if(h)return e==="$attrs"&&en(t,"get",e),h(t);if((l=a.__cssModules)&&(l=l[e]))return l;if(n!==We&&Oe(n,e))return o[e]=4,n[e];if(f=u.config.globalProperties,Oe(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return wu(s,e)?(s[e]=n,!0):r!==We&&Oe(r,e)?(r[e]=n,!0):Oe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==We&&Oe(t,o)||wu(e,o)||(a=i[0])&&Oe(a,o)||Oe(r,o)||Oe(xi,o)||Oe(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Oe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let oc=!0;function OE(t){const e=Of(t),n=t.proxy,r=t.ctx;oc=!1,e.beforeCreate&&Dd(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:u,inject:c,created:h,beforeMount:l,mounted:f,beforeUpdate:d,updated:g,activated:y,deactivated:v,beforeDestroy:p,beforeUnmount:E,destroyed:T,unmounted:w,render:S,renderTracked:N,renderTriggered:L,errorCaptured:P,serverPrefetch:F,expose:Q,inheritAttrs:Z,components:W,directives:te,filters:ce}=e;if(c&&NE(c,r,null,t.appContext.config.unwrapInjectedRef),o)for(const se in o){const pe=o[se];we(pe)&&(r[se]=pe.bind(n))}if(s){const se=s.call(n,n);Ue(se)&&(t.data=Xn(se))}if(oc=!0,i)for(const se in i){const pe=i[se],Ke=we(pe)?pe.bind(n,n):we(pe.get)?pe.get.bind(n,n):hn,Ze=!we(pe)&&we(pe.set)?pe.set.bind(n):hn,qe=Ee({get:Ke,set:Ze});Object.defineProperty(r,se,{enumerable:!0,configurable:!0,get:()=>qe.value,set:Fe=>qe.value=Fe})}if(a)for(const se in a)m_(a[se],r,n,se);if(u){const se=we(u)?u.call(n):u;Reflect.ownKeys(se).forEach(pe=>{Ps(pe,se[pe])})}h&&Dd(h,t,"c");function le(se,pe){ue(pe)?pe.forEach(Ke=>se(Ke.bind(n))):pe&&se(pe.bind(n))}if(le(h_,l),le(bo,f),le(wE,d),le(EE,g),le(yE,y),le(vE,v),le(SE,P),le(AE,N),le(IE,L),le(wl,E),le(kf,w),le(TE,F),ue(Q))if(Q.length){const se=t.exposed||(t.exposed={});Q.forEach(pe=>{Object.defineProperty(se,pe,{get:()=>n[pe],set:Ke=>n[pe]=Ke})})}else t.exposed||(t.exposed={});S&&t.render===hn&&(t.render=S),Z!=null&&(t.inheritAttrs=Z),W&&(t.components=W),te&&(t.directives=te)}function NE(t,e,n=hn,r=!1){ue(t)&&(t=ac(t));for(const s in t){const i=t[s];let o;Ue(i)?"default"in i?o=Zt(i.from||s,i.default,!0):o=Zt(i.from||s):o=Zt(i),Ve(o)&&r?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[s]=o}}function Dd(t,e,n){on(ue(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function m_(t,e,n,r){const s=r.includes(".")?a_(n,r):()=>n[r];if(ct(t)){const i=e[t];we(i)&&lt(s,i)}else if(we(t))lt(s,t.bind(n));else if(Ue(t))if(ue(t))t.forEach(i=>m_(i,e,n,r));else{const i=we(t.handler)?t.handler.bind(n):e[t.handler];we(i)&&lt(s,i,t)}}function Of(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let u;return a?u=a:!s.length&&!n&&!r?u=e:(u={},s.length&&s.forEach(c=>La(u,c,o,!0)),La(u,e,o)),Ue(e)&&i.set(e,u),u}function La(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&La(t,i,n,!0),s&&s.forEach(o=>La(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=LE[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const LE={data:xd,props:Vr,emits:Vr,methods:Vr,computed:Vr,beforeCreate:Ut,created:Ut,beforeMount:Ut,mounted:Ut,beforeUpdate:Ut,updated:Ut,beforeDestroy:Ut,beforeUnmount:Ut,destroyed:Ut,unmounted:Ut,activated:Ut,deactivated:Ut,errorCaptured:Ut,serverPrefetch:Ut,components:Vr,directives:Vr,watch:xE,provide:xd,inject:DE};function xd(t,e){return e?t?function(){return St(we(t)?t.call(this,this):t,we(e)?e.call(this,this):e)}:e:t}function DE(t,e){return Vr(ac(t),ac(e))}function ac(t){if(ue(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ut(t,e){return t?[...new Set([].concat(t,e))]:e}function Vr(t,e){return t?St(St(Object.create(null),t),e):e}function xE(t,e){if(!t)return e;if(!e)return t;const n=St(Object.create(null),t);for(const r in e)n[r]=Ut(t[r],e[r]);return n}function PE(t,e,n,r=!1){const s={},i={};Ca(i,Tl,1),t.propsDefaults=Object.create(null),p_(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Y0(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function ME(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Le(s),[u]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let l=0;l<h.length;l++){let f=h[l];if(yl(t.emitsOptions,f))continue;const d=e[f];if(u)if(Oe(i,f))d!==i[f]&&(i[f]=d,c=!0);else{const g=Nn(f);s[g]=lc(u,a,g,d,t,!1)}else d!==i[f]&&(i[f]=d,c=!0)}}}else{p_(t,e,s,i)&&(c=!0);let h;for(const l in a)(!e||!Oe(e,l)&&((h=ii(l))===l||!Oe(e,h)))&&(u?n&&(n[l]!==void 0||n[h]!==void 0)&&(s[l]=lc(u,a,l,void 0,t,!0)):delete s[l]);if(i!==a)for(const l in i)(!e||!Oe(e,l))&&(delete i[l],c=!0)}c&&jn(t,"set","$attrs")}function p_(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let u in e){if(ga(u))continue;const c=e[u];let h;s&&Oe(s,h=Nn(u))?!i||!i.includes(h)?n[h]=c:(a||(a={}))[h]=c:yl(t.emitsOptions,u)||(!(u in r)||c!==r[u])&&(r[u]=c,o=!0)}if(i){const u=Le(n),c=a||We;for(let h=0;h<i.length;h++){const l=i[h];n[l]=lc(s,u,l,c[l],t,!Oe(c,l))}}return o}function lc(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Oe(o,"default");if(a&&r===void 0){const u=o.default;if(o.type!==Function&&we(u)){const{propsDefaults:c}=s;n in c?r=c[n]:(Hs(s),r=c[n]=u.call(null,e),Qr())}else r=u}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===ii(n))&&(r=!0))}return r}function g_(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let u=!1;if(!we(t)){const h=l=>{u=!0;const[f,d]=g_(l,e,!0);St(o,f),d&&a.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!u)return Ue(t)&&r.set(t,Ls),Ls;if(ue(i))for(let h=0;h<i.length;h++){const l=Nn(i[h]);Pd(l)&&(o[l]=We)}else if(i)for(const h in i){const l=Nn(h);if(Pd(l)){const f=i[h],d=o[l]=ue(f)||we(f)?{type:f}:Object.assign({},f);if(d){const g=Ud(Boolean,d.type),y=Ud(String,d.type);d[0]=g>-1,d[1]=y<0||g<y,(g>-1||Oe(d,"default"))&&a.push(l)}}}const c=[o,a];return Ue(t)&&r.set(t,c),c}function Pd(t){return t[0]!=="$"}function Md(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Fd(t,e){return Md(t)===Md(e)}function Ud(t,e){return ue(e)?e.findIndex(n=>Fd(n,t)):we(e)&&Fd(e,t)?0:-1}const __=t=>t[0]==="_"||t==="$stable",Nf=t=>ue(t)?t.map(wn):[wn(t)],FE=(t,e,n)=>{if(e._n)return e;const r=Vt((...s)=>Nf(e(...s)),n);return r._c=!1,r},y_=(t,e,n)=>{const r=t._ctx;for(const s in t){if(__(s))continue;const i=t[s];if(we(i))e[s]=FE(s,i,r);else if(i!=null){const o=Nf(i);e[s]=()=>o}}},v_=(t,e)=>{const n=Nf(e);t.slots.default=()=>n},UE=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Le(e),Ca(e,"_",n)):y_(e,t.slots={})}else t.slots={},e&&v_(t,e);Ca(t.slots,Tl,1)},$E=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=We;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(St(s,e),!n&&a===1&&delete s._):(i=!e.$stable,y_(e,s)),o=e}else e&&(v_(t,e),o={default:1});if(i)for(const a in s)!__(a)&&!(a in o)&&delete s[a]};function b_(){return{app:null,config:{isNativeTag:m0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let VE=0;function BE(t,e){return function(r,s=null){we(r)||(r=Object.assign({},r)),s!=null&&!Ue(s)&&(s=null);const i=b_(),o=new Set;let a=!1;const u=i.app={_uid:VE++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:oT,get config(){return i.config},set config(c){},use(c,...h){return o.has(c)||(c&&we(c.install)?(o.add(c),c.install(u,...h)):we(c)&&(o.add(c),c(u,...h))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,h){return h?(i.components[c]=h,u):i.components[c]},directive(c,h){return h?(i.directives[c]=h,u):i.directives[c]},mount(c,h,l){if(!a){const f=oe(r,s);return f.appContext=i,h&&e?e(f,c):t(f,c,l),a=!0,u._container=c,c.__vue_app__=u,Il(f.component)||f.component.proxy}},unmount(){a&&(t(null,u._container),delete u._container.__vue_app__)},provide(c,h){return i.provides[c]=h,u}};return u}}function uc(t,e,n,r,s=!1){if(ue(t)){t.forEach((f,d)=>uc(f,e&&(ue(e)?e[d]:e),n,r,s));return}if(ya(r)&&!s)return;const i=r.shapeFlag&4?Il(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:u}=t,c=e&&e.r,h=a.refs===We?a.refs={}:a.refs,l=a.setupState;if(c!=null&&c!==u&&(ct(c)?(h[c]=null,Oe(l,c)&&(l[c]=null)):Ve(c)&&(c.value=null)),we(u))yr(u,a,12,[o,h]);else{const f=ct(u),d=Ve(u);if(f||d){const g=()=>{if(t.f){const y=f?Oe(l,u)?l[u]:h[u]:u.value;s?ue(y)&&mf(y,i):ue(y)?y.includes(i)||y.push(i):f?(h[u]=[i],Oe(l,u)&&(l[u]=h[u])):(u.value=[i],t.k&&(h[t.k]=u.value))}else f?(h[u]=o,Oe(l,u)&&(l[u]=o)):d&&(u.value=o,t.k&&(h[t.k]=o))};o?(g.id=-1,Wt(g,n)):g()}}}const Wt=dE;function jE(t){return HE(t)}function HE(t,e){const n=b0();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:u,setText:c,setElementText:h,parentNode:l,nextSibling:f,setScopeId:d=hn,insertStaticContent:g}=t,y=(b,m,_,I=null,O=null,M=null,B=!1,j=null,k=!!m.dynamicChildren)=>{if(b===m)return;b&&!Hr(b,m)&&(I=V(b),Fe(b,O,M,!0),b=null),m.patchFlag===-2&&(k=!1,m.dynamicChildren=null);const{type:C,ref:A,shapeFlag:R}=m;switch(C){case Eo:v(b,m,_,I);break;case dn:p(b,m,_,I);break;case Eu:b==null&&E(m,_,I,B);break;case ot:W(b,m,_,I,O,M,B,j,k);break;default:R&1?S(b,m,_,I,O,M,B,j,k):R&6?te(b,m,_,I,O,M,B,j,k):(R&64||R&128)&&C.process(b,m,_,I,O,M,B,j,k,de)}A!=null&&O&&uc(A,b&&b.ref,M,m||b,!m)},v=(b,m,_,I)=>{if(b==null)r(m.el=a(m.children),_,I);else{const O=m.el=b.el;m.children!==b.children&&c(O,m.children)}},p=(b,m,_,I)=>{b==null?r(m.el=u(m.children||""),_,I):m.el=b.el},E=(b,m,_,I)=>{[b.el,b.anchor]=g(b.children,m,_,I,b.el,b.anchor)},T=({el:b,anchor:m},_,I)=>{let O;for(;b&&b!==m;)O=f(b),r(b,_,I),b=O;r(m,_,I)},w=({el:b,anchor:m})=>{let _;for(;b&&b!==m;)_=f(b),s(b),b=_;s(m)},S=(b,m,_,I,O,M,B,j,k)=>{B=B||m.type==="svg",b==null?N(m,_,I,O,M,B,j,k):F(b,m,O,M,B,j,k)},N=(b,m,_,I,O,M,B,j)=>{let k,C;const{type:A,props:R,shapeFlag:q,transition:H,dirs:X}=b;if(k=b.el=o(b.type,M,R&&R.is,R),q&8?h(k,b.children):q&16&&P(b.children,k,null,I,O,M&&A!=="foreignObject",B,j),X&&Mr(b,null,I,"created"),R){for(const ge in R)ge!=="value"&&!ga(ge)&&i(k,ge,null,R[ge],M,b.children,I,O,x);"value"in R&&i(k,"value",null,R.value),(C=R.onVnodeBeforeMount)&&vn(C,I,b)}L(k,b,b.scopeId,B,I),X&&Mr(b,null,I,"beforeMount");const fe=(!O||O&&!O.pendingBranch)&&H&&!H.persisted;fe&&H.beforeEnter(k),r(k,m,_),((C=R&&R.onVnodeMounted)||fe||X)&&Wt(()=>{C&&vn(C,I,b),fe&&H.enter(k),X&&Mr(b,null,I,"mounted")},O)},L=(b,m,_,I,O)=>{if(_&&d(b,_),I)for(let M=0;M<I.length;M++)d(b,I[M]);if(O){let M=O.subTree;if(m===M){const B=O.vnode;L(b,B,B.scopeId,B.slotScopeIds,O.parent)}}},P=(b,m,_,I,O,M,B,j,k=0)=>{for(let C=k;C<b.length;C++){const A=b[C]=j?ar(b[C]):wn(b[C]);y(null,A,m,_,I,O,M,B,j)}},F=(b,m,_,I,O,M,B)=>{const j=m.el=b.el;let{patchFlag:k,dynamicChildren:C,dirs:A}=m;k|=b.patchFlag&16;const R=b.props||We,q=m.props||We;let H;_&&Fr(_,!1),(H=q.onVnodeBeforeUpdate)&&vn(H,_,m,b),A&&Mr(m,b,_,"beforeUpdate"),_&&Fr(_,!0);const X=O&&m.type!=="foreignObject";if(C?Q(b.dynamicChildren,C,j,_,I,X,M):B||pe(b,m,j,null,_,I,X,M,!1),k>0){if(k&16)Z(j,m,R,q,_,I,O);else if(k&2&&R.class!==q.class&&i(j,"class",null,q.class,O),k&4&&i(j,"style",R.style,q.style,O),k&8){const fe=m.dynamicProps;for(let ge=0;ge<fe.length;ge++){const Re=fe[ge],Ht=R[Re],rn=q[Re];(rn!==Ht||Re==="value")&&i(j,Re,Ht,rn,O,b.children,_,I,x)}}k&1&&b.children!==m.children&&h(j,m.children)}else!B&&C==null&&Z(j,m,R,q,_,I,O);((H=q.onVnodeUpdated)||A)&&Wt(()=>{H&&vn(H,_,m,b),A&&Mr(m,b,_,"updated")},I)},Q=(b,m,_,I,O,M,B)=>{for(let j=0;j<m.length;j++){const k=b[j],C=m[j],A=k.el&&(k.type===ot||!Hr(k,C)||k.shapeFlag&70)?l(k.el):_;y(k,C,A,null,I,O,M,B,!0)}},Z=(b,m,_,I,O,M,B)=>{if(_!==I){if(_!==We)for(const j in _)!ga(j)&&!(j in I)&&i(b,j,_[j],null,B,m.children,O,M,x);for(const j in I){if(ga(j))continue;const k=I[j],C=_[j];k!==C&&j!=="value"&&i(b,j,C,k,B,m.children,O,M,x)}"value"in I&&i(b,"value",_.value,I.value)}},W=(b,m,_,I,O,M,B,j,k)=>{const C=m.el=b?b.el:a(""),A=m.anchor=b?b.anchor:a("");let{patchFlag:R,dynamicChildren:q,slotScopeIds:H}=m;H&&(j=j?j.concat(H):H),b==null?(r(C,_,I),r(A,_,I),P(m.children,_,A,O,M,B,j,k)):R>0&&R&64&&q&&b.dynamicChildren?(Q(b.dynamicChildren,q,_,O,M,B,j),(m.key!=null||O&&m===O.subTree)&&w_(b,m,!0)):pe(b,m,_,A,O,M,B,j,k)},te=(b,m,_,I,O,M,B,j,k)=>{m.slotScopeIds=j,b==null?m.shapeFlag&512?O.ctx.activate(m,_,I,B,k):ce(m,_,I,O,M,B,k):Te(b,m,k)},ce=(b,m,_,I,O,M,B)=>{const j=b.component=QE(b,I,O);if(vl(b)&&(j.ctx.renderer=de),JE(j),j.asyncDep){if(O&&O.registerDep(j,le),!b.el){const k=j.subTree=oe(dn);p(null,k,m,_)}return}le(j,b,m,_,O,M,B)},Te=(b,m,_)=>{const I=m.component=b.component;if(cE(b,m,_))if(I.asyncDep&&!I.asyncResolved){se(I,m,_);return}else I.next=m,sE(I.update),I.update();else m.el=b.el,I.vnode=m},le=(b,m,_,I,O,M,B)=>{const j=()=>{if(b.isMounted){let{next:A,bu:R,u:q,parent:H,vnode:X}=b,fe=A,ge;Fr(b,!1),A?(A.el=X.el,se(b,A,B)):A=X,R&&_a(R),(ge=A.props&&A.props.onVnodeBeforeUpdate)&&vn(ge,H,A,X),Fr(b,!0);const Re=vu(b),Ht=b.subTree;b.subTree=Re,y(Ht,Re,l(Ht.el),V(Ht),b,O,M),A.el=Re.el,fe===null&&fE(b,Re.el),q&&Wt(q,O),(ge=A.props&&A.props.onVnodeUpdated)&&Wt(()=>vn(ge,H,A,X),O)}else{let A;const{el:R,props:q}=m,{bm:H,m:X,parent:fe}=b,ge=ya(m);if(Fr(b,!1),H&&_a(H),!ge&&(A=q&&q.onVnodeBeforeMount)&&vn(A,fe,m),Fr(b,!0),R&&ie){const Re=()=>{b.subTree=vu(b),ie(R,b.subTree,b,O,null)};ge?m.type.__asyncLoader().then(()=>!b.isUnmounted&&Re()):Re()}else{const Re=b.subTree=vu(b);y(null,Re,_,I,b,O,M),m.el=Re.el}if(X&&Wt(X,O),!ge&&(A=q&&q.onVnodeMounted)){const Re=m;Wt(()=>vn(A,fe,Re),O)}(m.shapeFlag&256||fe&&ya(fe.vnode)&&fe.vnode.shapeFlag&256)&&b.a&&Wt(b.a,O),b.isMounted=!0,m=_=I=null}},k=b.effect=new yf(j,()=>Af(C),b.scope),C=b.update=()=>k.run();C.id=b.uid,Fr(b,!0),C()},se=(b,m,_)=>{m.component=b;const I=b.vnode.props;b.vnode=m,b.next=null,ME(b,m.props,I,_),$E(b,m.children,_),oi(),Rd(),ai()},pe=(b,m,_,I,O,M,B,j,k=!1)=>{const C=b&&b.children,A=b?b.shapeFlag:0,R=m.children,{patchFlag:q,shapeFlag:H}=m;if(q>0){if(q&128){Ze(C,R,_,I,O,M,B,j,k);return}else if(q&256){Ke(C,R,_,I,O,M,B,j,k);return}}H&8?(A&16&&x(C,O,M),R!==C&&h(_,R)):A&16?H&16?Ze(C,R,_,I,O,M,B,j,k):x(C,O,M,!0):(A&8&&h(_,""),H&16&&P(R,_,I,O,M,B,j,k))},Ke=(b,m,_,I,O,M,B,j,k)=>{b=b||Ls,m=m||Ls;const C=b.length,A=m.length,R=Math.min(C,A);let q;for(q=0;q<R;q++){const H=m[q]=k?ar(m[q]):wn(m[q]);y(b[q],H,_,null,O,M,B,j,k)}C>A?x(b,O,M,!0,!1,R):P(m,_,I,O,M,B,j,k,R)},Ze=(b,m,_,I,O,M,B,j,k)=>{let C=0;const A=m.length;let R=b.length-1,q=A-1;for(;C<=R&&C<=q;){const H=b[C],X=m[C]=k?ar(m[C]):wn(m[C]);if(Hr(H,X))y(H,X,_,null,O,M,B,j,k);else break;C++}for(;C<=R&&C<=q;){const H=b[R],X=m[q]=k?ar(m[q]):wn(m[q]);if(Hr(H,X))y(H,X,_,null,O,M,B,j,k);else break;R--,q--}if(C>R){if(C<=q){const H=q+1,X=H<A?m[H].el:I;for(;C<=q;)y(null,m[C]=k?ar(m[C]):wn(m[C]),_,X,O,M,B,j,k),C++}}else if(C>q)for(;C<=R;)Fe(b[C],O,M,!0),C++;else{const H=C,X=C,fe=new Map;for(C=X;C<=q;C++){const zt=m[C]=k?ar(m[C]):wn(m[C]);zt.key!=null&&fe.set(zt.key,C)}let ge,Re=0;const Ht=q-X+1;let rn=!1,_d=0;const vi=new Array(Ht);for(C=0;C<Ht;C++)vi[C]=0;for(C=H;C<=R;C++){const zt=b[C];if(Re>=Ht){Fe(zt,O,M,!0);continue}let yn;if(zt.key!=null)yn=fe.get(zt.key);else for(ge=X;ge<=q;ge++)if(vi[ge-X]===0&&Hr(zt,m[ge])){yn=ge;break}yn===void 0?Fe(zt,O,M,!0):(vi[yn-X]=C+1,yn>=_d?_d=yn:rn=!0,y(zt,m[yn],_,null,O,M,B,j,k),Re++)}const yd=rn?qE(vi):Ls;for(ge=yd.length-1,C=Ht-1;C>=0;C--){const zt=X+C,yn=m[zt],vd=zt+1<A?m[zt+1].el:I;vi[C]===0?y(null,yn,_,vd,O,M,B,j,k):rn&&(ge<0||C!==yd[ge]?qe(yn,_,vd,2):ge--)}}},qe=(b,m,_,I,O=null)=>{const{el:M,type:B,transition:j,children:k,shapeFlag:C}=b;if(C&6){qe(b.component.subTree,m,_,I);return}if(C&128){b.suspense.move(m,_,I);return}if(C&64){B.move(b,m,_,de);return}if(B===ot){r(M,m,_);for(let R=0;R<k.length;R++)qe(k[R],m,_,I);r(b.anchor,m,_);return}if(B===Eu){T(b,m,_);return}if(I!==2&&C&1&&j)if(I===0)j.beforeEnter(M),r(M,m,_),Wt(()=>j.enter(M),O);else{const{leave:R,delayLeave:q,afterLeave:H}=j,X=()=>r(M,m,_),fe=()=>{R(M,()=>{X(),H&&H()})};q?q(M,X,fe):fe()}else r(M,m,_)},Fe=(b,m,_,I=!1,O=!1)=>{const{type:M,props:B,ref:j,children:k,dynamicChildren:C,shapeFlag:A,patchFlag:R,dirs:q}=b;if(j!=null&&uc(j,null,_,b,!0),A&256){m.ctx.deactivate(b);return}const H=A&1&&q,X=!ya(b);let fe;if(X&&(fe=B&&B.onVnodeBeforeUnmount)&&vn(fe,m,b),A&6)$(b.component,_,I);else{if(A&128){b.suspense.unmount(_,I);return}H&&Mr(b,null,m,"beforeUnmount"),A&64?b.type.remove(b,m,_,O,de,I):C&&(M!==ot||R>0&&R&64)?x(C,m,_,!1,!0):(M===ot&&R&384||!O&&A&16)&&x(k,m,_),I&&Et(b)}(X&&(fe=B&&B.onVnodeUnmounted)||H)&&Wt(()=>{fe&&vn(fe,m,b),H&&Mr(b,null,m,"unmounted")},_)},Et=b=>{const{type:m,el:_,anchor:I,transition:O}=b;if(m===ot){rt(_,I);return}if(m===Eu){w(b);return}const M=()=>{s(_),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(b.shapeFlag&1&&O&&!O.persisted){const{leave:B,delayLeave:j}=O,k=()=>B(_,M);j?j(b.el,M,k):k()}else M()},rt=(b,m)=>{let _;for(;b!==m;)_=f(b),s(b),b=_;s(m)},$=(b,m,_)=>{const{bum:I,scope:O,update:M,subTree:B,um:j}=b;I&&_a(I),O.stop(),M&&(M.active=!1,Fe(B,b,m,_)),j&&Wt(j,m),Wt(()=>{b.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},x=(b,m,_,I=!1,O=!1,M=0)=>{for(let B=M;B<b.length;B++)Fe(b[B],m,_,I,O)},V=b=>b.shapeFlag&6?V(b.component.subTree):b.shapeFlag&128?b.suspense.next():f(b.anchor||b.el),K=(b,m,_)=>{b==null?m._vnode&&Fe(m._vnode,null,null,!0):y(m._vnode||null,b,m,null,null,null,_),Rd(),r_(),m._vnode=b},de={p:y,um:Fe,m:qe,r:Et,mt:ce,mc:P,pc:pe,pbc:Q,n:V,o:t};let Ie,ie;return e&&([Ie,ie]=e(de)),{render:K,hydrate:Ie,createApp:BE(K,Ie)}}function Fr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function w_(t,e,n=!1){const r=t.children,s=e.children;if(ue(r)&&ue(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=ar(s[i]),a.el=o.el),n||w_(o,a)),a.type===Eo&&(a.el=o.el)}}function qE(t){const e=t.slice(),n=[0];let r,s,i,o,a;const u=t.length;for(r=0;r<u;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const WE=t=>t.__isTeleport,ot=Symbol(void 0),Eo=Symbol(void 0),dn=Symbol(void 0),Eu=Symbol(void 0),Pi=[];let cn=null;function Se(t=!1){Pi.push(cn=t?null:[])}function GE(){Pi.pop(),cn=Pi[Pi.length-1]||null}let eo=1;function $d(t){eo+=t}function E_(t){return t.dynamicChildren=eo>0?cn||Ls:null,GE(),eo>0&&cn&&cn.push(t),t}function Me(t,e,n,r,s,i){return E_(D(t,e,n,r,s,i,!0))}function ss(t,e,n,r,s){return E_(oe(t,e,n,r,s,!0))}function cc(t){return t?t.__v_isVNode===!0:!1}function Hr(t,e){return t.type===e.type&&t.key===e.key}const Tl="__vInternal",T_=({key:t})=>t??null,va=({ref:t,ref_key:e,ref_for:n})=>t!=null?ct(t)||Ve(t)||we(t)?{i:Xt,r:t,k:e,f:!!n}:t:null;function D(t,e=null,n=null,r=0,s=null,i=t===ot?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&T_(e),ref:e&&va(e),scopeId:o_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Xt};return a?(Lf(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=ct(n)?8:16),eo>0&&!o&&cn&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&cn.push(u),u}const oe=KE;function KE(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===d_)&&(t=dn),cc(t)){const a=Ir(t,e,!0);return n&&Lf(a,n),eo>0&&!i&&cn&&(a.shapeFlag&6?cn[cn.indexOf(t)]=a:cn.push(a)),a.patchFlag|=-2,a}if(rT(t)&&(t=t.__vccOpts),e){e=zE(e);let{class:a,style:u}=e;a&&!ct(a)&&(e.class=Lt(a)),Ue(u)&&(zg(u)&&!ue(u)&&(u=St({},u)),e.style=Vs(u))}const o=ct(t)?1:hE(t)?128:WE(t)?64:Ue(t)?4:we(t)?2:0;return D(t,e,n,r,s,o,i,!0)}function zE(t){return t?zg(t)||Tl in t?St({},t):t:null}function Ir(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?I_(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&T_(a),ref:e&&e.ref?n&&s?ue(s)?s.concat(va(e)):[s,va(e)]:va(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ot?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ir(t.ssContent),ssFallback:t.ssFallback&&Ir(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function vr(t=" ",e=0){return oe(Eo,null,t,e)}function js(t="",e=!1){return e?(Se(),ss(dn,null,t)):oe(dn,null,t)}function wn(t){return t==null||typeof t=="boolean"?oe(dn):ue(t)?oe(ot,null,t.slice()):typeof t=="object"?ar(t):oe(Eo,null,String(t))}function ar(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ir(t)}function Lf(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ue(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Lf(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Tl in e)?e._ctx=Xt:s===3&&Xt&&(Xt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else we(e)?(e={default:e,_ctx:Xt},n=32):(e=String(e),r&64?(n=16,e=[vr(e)]):n=8);t.children=e,t.shapeFlag|=n}function I_(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Lt([e.class,r.class]));else if(s==="style")e.style=Vs([e.style,r.style]);else if(fl(s)){const i=e[s],o=r[s];o&&i!==o&&!(ue(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function vn(t,e,n,r=null){on(t,e,7,[n,r])}const YE=b_();let XE=0;function QE(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||YE,i={uid:XE++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Mg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:g_(r,s),emitsOptions:i_(r,s),emit:null,emitted:null,propsDefaults:We,inheritAttrs:r.inheritAttrs,ctx:We,data:We,props:We,attrs:We,slots:We,refs:We,setupState:We,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=aE.bind(null,i),t.ce&&t.ce(i),i}let yt=null;const Hn=()=>yt||Xt,Hs=t=>{yt=t,t.scope.on()},Qr=()=>{yt&&yt.scope.off(),yt=null};function A_(t){return t.vnode.shapeFlag&4}let to=!1;function JE(t,e=!1){to=e;const{props:n,children:r}=t.vnode,s=A_(t);PE(t,n,s,e),UE(t,r);const i=s?ZE(t,e):void 0;return to=!1,i}function ZE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=rs(new Proxy(t.ctx,RE));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?tT(t):null;Hs(t),oi();const i=yr(r,t,0,[t.props,s]);if(ai(),Qr(),Dg(i)){if(i.then(Qr,Qr),e)return i.then(o=>{Vd(t,o,e)}).catch(o=>{_l(o,t,0)});t.asyncDep=i}else Vd(t,i,e)}else S_(t,e)}function Vd(t,e,n){we(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ue(e)&&(t.setupState=Zg(e)),S_(t,n)}let Bd;function S_(t,e,n){const r=t.type;if(!t.render){if(!e&&Bd&&!r.render){const s=r.template||Of(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:u}=r,c=St(St({isCustomElement:i,delimiters:a},o),u);r.render=Bd(s,c)}}t.render=r.render||hn}Hs(t),oi(),OE(t),ai(),Qr()}function eT(t){return new Proxy(t.attrs,{get(e,n){return en(t,"get","$attrs"),e[n]}})}function tT(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=eT(t))},slots:t.slots,emit:t.emit,expose:e}}function Il(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Zg(rs(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in xi)return xi[n](t)},has(e,n){return n in e||n in xi}}))}function nT(t,e=!0){return we(t)?t.displayName||t.name:t.name||e&&t.__name}function rT(t){return we(t)&&"__vccOpts"in t}const Ee=(t,e)=>tE(t,e,to);function qn(t,e,n){const r=arguments.length;return r===2?Ue(e)&&!ue(e)?cc(e)?oe(t,null,[e]):oe(t,e):oe(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&cc(n)&&(n=[n]),oe(t,e,n))}const sT=Symbol(""),iT=()=>Zt(sT),oT="3.2.45",aT="http://www.w3.org/2000/svg",qr=typeof document<"u"?document:null,jd=qr&&qr.createElement("template"),lT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e?qr.createElementNS(aT,t):qr.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>qr.createTextNode(t),createComment:t=>qr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>qr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{jd.innerHTML=r?`<svg>${t}</svg>`:t;const a=jd.content;if(r){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function uT(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function cT(t,e,n){const r=t.style,s=ct(n);if(n&&!s){for(const i in n)fc(r,i,n[i]);if(e&&!ct(e))for(const i in e)n[i]==null&&fc(r,i,"")}else{const i=r.display;s?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=i)}}const Hd=/\s*!important$/;function fc(t,e,n){if(ue(n))n.forEach(r=>fc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=fT(t,e);Hd.test(n)?t.setProperty(ii(r),n.replace(Hd,""),"important"):t[r]=n}}const qd=["Webkit","Moz","ms"],Tu={};function fT(t,e){const n=Tu[e];if(n)return n;let r=Nn(e);if(r!=="filter"&&r in t)return Tu[e]=r;r=ml(r);for(let s=0;s<qd.length;s++){const i=qd[s]+r;if(i in t)return Tu[e]=i}return e}const Wd="http://www.w3.org/1999/xlink";function hT(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Wd,e.slice(6,e.length)):t.setAttributeNS(Wd,e,n);else{const i=f0(e);n==null||i&&!Ng(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function dT(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const u=n??"";(t.value!==u||t.tagName==="OPTION")&&(t.value=u),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=Ng(n):n==null&&u==="string"?(n="",a=!0):u==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function k_(t,e,n,r){t.addEventListener(e,n,r)}function mT(t,e,n,r){t.removeEventListener(e,n,r)}function pT(t,e,n,r,s=null){const i=t._vei||(t._vei={}),o=i[e];if(r&&o)o.value=r;else{const[a,u]=gT(e);if(r){const c=i[e]=vT(r,s);k_(t,a,c,u)}else o&&(mT(t,a,o,u),i[e]=void 0)}}const Gd=/(?:Once|Passive|Capture)$/;function gT(t){let e;if(Gd.test(t)){e={};let r;for(;r=t.match(Gd);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ii(t.slice(2)),e]}let Iu=0;const _T=Promise.resolve(),yT=()=>Iu||(_T.then(()=>Iu=0),Iu=Date.now());function vT(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;on(bT(r,n.value),e,5,[r])};return n.value=t,n.attached=yT(),n}function bT(t,e){if(ue(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Kd=/^on[a-z]/,wT=(t,e,n,r,s=!1,i,o,a,u)=>{e==="class"?uT(t,r,s):e==="style"?cT(t,n,r):fl(e)?df(e)||pT(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ET(t,e,r,s))?dT(t,e,r,i,o,a,u):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),hT(t,e,r,s))};function ET(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&Kd.test(e)&&we(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Kd.test(e)&&ct(n)?!1:e in t}const er="transition",bi="animation",Df=(t,{slots:e})=>qn(l_,TT(t),e);Df.displayName="Transition";const C_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Df.props=St({},l_.props,C_);const Ur=(t,e=[])=>{ue(t)?t.forEach(n=>n(...e)):t&&t(...e)},zd=t=>t?ue(t)?t.some(e=>e.length>1):t.length>1:!1;function TT(t){const e={};for(const W in t)W in C_||(e[W]=t[W]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=i,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:l=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=t,g=IT(s),y=g&&g[0],v=g&&g[1],{onBeforeEnter:p,onEnter:E,onEnterCancelled:T,onLeave:w,onLeaveCancelled:S,onBeforeAppear:N=p,onAppear:L=E,onAppearCancelled:P=T}=e,F=(W,te,ce)=>{$r(W,te?h:a),$r(W,te?c:o),ce&&ce()},Q=(W,te)=>{W._isLeaving=!1,$r(W,l),$r(W,d),$r(W,f),te&&te()},Z=W=>(te,ce)=>{const Te=W?L:E,le=()=>F(te,W,ce);Ur(Te,[te,le]),Yd(()=>{$r(te,W?u:i),tr(te,W?h:a),zd(Te)||Xd(te,r,y,le)})};return St(e,{onBeforeEnter(W){Ur(p,[W]),tr(W,i),tr(W,o)},onBeforeAppear(W){Ur(N,[W]),tr(W,u),tr(W,c)},onEnter:Z(!1),onAppear:Z(!0),onLeave(W,te){W._isLeaving=!0;const ce=()=>Q(W,te);tr(W,l),kT(),tr(W,f),Yd(()=>{W._isLeaving&&($r(W,l),tr(W,d),zd(w)||Xd(W,r,v,ce))}),Ur(w,[W,ce])},onEnterCancelled(W){F(W,!1),Ur(T,[W])},onAppearCancelled(W){F(W,!0),Ur(P,[W])},onLeaveCancelled(W){Q(W),Ur(S,[W])}})}function IT(t){if(t==null)return null;if(Ue(t))return[Au(t.enter),Au(t.leave)];{const e=Au(t);return[e,e]}}function Au(t){return pl(t)}function tr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function $r(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Yd(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let AT=0;function Xd(t,e,n,r){const s=t._endId=++AT,i=()=>{s===t._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:u}=ST(t,e);if(!o)return r();const c=o+"end";let h=0;const l=()=>{t.removeEventListener(c,f),i()},f=d=>{d.target===t&&++h>=u&&l()};setTimeout(()=>{h<u&&l()},a+1),t.addEventListener(c,f)}function ST(t,e){const n=window.getComputedStyle(t),r=g=>(n[g]||"").split(", "),s=r(`${er}Delay`),i=r(`${er}Duration`),o=Qd(s,i),a=r(`${bi}Delay`),u=r(`${bi}Duration`),c=Qd(a,u);let h=null,l=0,f=0;e===er?o>0&&(h=er,l=o,f=i.length):e===bi?c>0&&(h=bi,l=c,f=u.length):(l=Math.max(o,c),h=l>0?o>c?er:bi:null,f=h?h===er?i.length:u.length:0);const d=h===er&&/\b(transform|all)(,|$)/.test(r(`${er}Property`).toString());return{type:h,timeout:l,propCount:f,hasTransform:d}}function Qd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Jd(n)+Jd(t[r])))}function Jd(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function kT(){return document.body.offsetHeight}const Zd=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ue(e)?n=>_a(e,n):e},CT={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=hl(e);k_(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?pl(Da(o)):Da(o));t._assign(t.multiple?s?new Set(i):i:i[0])}),t._assign=Zd(r)},mounted(t,{value:e}){em(t,e)},beforeUpdate(t,e,n){t._assign=Zd(n)},updated(t,{value:e}){em(t,e)}};function em(t,e){const n=t.multiple;if(!(n&&!ue(e)&&!hl(e))){for(let r=0,s=t.options.length;r<s;r++){const i=t.options[r],o=Da(i);if(n)ue(e)?i.selected=d0(e,o)>-1:i.selected=e.has(o);else if(cl(Da(i),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Da(t){return"_value"in t?t._value:t.value}const RT=["ctrl","shift","alt","meta"],OT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>RT.some(n=>t[`${n}Key`]&&!e.includes(n))},_t=(t,e)=>(n,...r)=>{for(let s=0;s<e.length;s++){const i=OT[e[s]];if(i&&i(n,e))return}return t(n,...r)},tm={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):wi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),wi(t,!0),r.enter(t)):r.leave(t,()=>{wi(t,!1)}):wi(t,e))},beforeUnmount(t,{value:e}){wi(t,e)}};function wi(t,e){t.style.display=e?t._vod:"none"}const NT=St({patchProp:wT},lT);let nm;function LT(){return nm||(nm=jE(NT))}const DT=(...t)=>{const e=LT().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=xT(r);if(!s)return;const i=e._component;!we(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function xT(t){return ct(t)?document.querySelector(t):t}var PT=!1;/*!
  * pinia v2.0.28
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let R_;const Al=t=>R_=t,O_=Symbol();function hc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Mi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Mi||(Mi={}));function MT(){const t=gf(!0),e=t.run(()=>Ye({}));let n=[],r=[];const s=rs({install(i){Al(s),s._a=i,i.provide(O_,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!PT?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const N_=()=>{};function rm(t,e,n,r=N_){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&E0()&&T0(s),s}function Es(t,...e){t.slice().forEach(n=>{n(...e)})}function dc(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];hc(s)&&hc(r)&&t.hasOwnProperty(n)&&!Ve(r)&&!_r(r)?t[n]=dc(s,r):t[n]=r}return t}const FT=Symbol();function UT(t){return!hc(t)||!t.hasOwnProperty(FT)}const{assign:lr}=Object;function $T(t){return!!(Ve(t)&&t.effect)}function VT(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let u;function c(){a||(n.state.value[t]=s?s():{});const h=J0(n.state.value[t]);return lr(h,i,Object.keys(o||{}).reduce((l,f)=>(l[f]=rs(Ee(()=>{Al(n);const d=n._s.get(t);return o[f].call(d,d)})),l),{}))}return u=L_(t,c,e,n,r,!0),u.$reset=function(){const l=s?s():{};this.$patch(f=>{lr(f,l)})},u}function L_(t,e,n={},r,s,i){let o;const a=lr({actions:{}},n),u={deep:!0};let c,h,l=rs([]),f=rs([]),d;const g=r.state.value[t];!i&&!g&&(r.state.value[t]={}),Ye({});let y;function v(L){let P;c=h=!1,typeof L=="function"?(L(r.state.value[t]),P={type:Mi.patchFunction,storeId:t,events:d}):(dc(r.state.value[t],L),P={type:Mi.patchObject,payload:L,storeId:t,events:d});const F=y=Symbol();pr().then(()=>{y===F&&(c=!0)}),h=!0,Es(l,P,r.state.value[t])}const p=N_;function E(){o.stop(),l=[],f=[],r._s.delete(t)}function T(L,P){return function(){Al(r);const F=Array.from(arguments),Q=[],Z=[];function W(Te){Q.push(Te)}function te(Te){Z.push(Te)}Es(f,{args:F,name:L,store:S,after:W,onError:te});let ce;try{ce=P.apply(this&&this.$id===t?this:S,F)}catch(Te){throw Es(Z,Te),Te}return ce instanceof Promise?ce.then(Te=>(Es(Q,Te),Te)).catch(Te=>(Es(Z,Te),Promise.reject(Te))):(Es(Q,ce),ce)}}const w={_p:r,$id:t,$onAction:rm.bind(null,f),$patch:v,$reset:p,$subscribe(L,P={}){const F=rm(l,L,P.detached,()=>Q()),Q=o.run(()=>lt(()=>r.state.value[t],Z=>{(P.flush==="sync"?h:c)&&L({storeId:t,type:Mi.direct,events:d},Z)},lr({},u,P)));return F},$dispose:E},S=Xn(w);r._s.set(t,S);const N=r._e.run(()=>(o=gf(),o.run(()=>e())));for(const L in N){const P=N[L];if(Ve(P)&&!$T(P)||_r(P))i||(g&&UT(P)&&(Ve(P)?P.value=g[L]:dc(P,g[L])),r.state.value[t][L]=P);else if(typeof P=="function"){const F=T(L,P);N[L]=F,a.actions[L]=P}}return lr(S,N),lr(Le(S),N),Object.defineProperty(S,"$state",{get:()=>r.state.value[t],set:L=>{v(P=>{lr(P,L)})}}),r._p.forEach(L=>{lr(S,o.run(()=>L({store:S,app:r._a,pinia:r,options:a})))}),g&&i&&n.hydrate&&n.hydrate(S.$state,g),c=!0,h=!0,S}function xf(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,u){const c=Hn();return a=a||c&&Zt(O_,null),a&&Al(a),a=R_,a._s.has(r)||(i?L_(r,e,s,a):VT(r,s,a)),a._s.get(r)}return o.$id=r,o}let BT="Store";function jT(...t){return t.reduce((e,n)=>(e[n.$id+BT]=function(){return n(this.$pinia)},e),{})}function xa(t,e){return Array.isArray(e)?e.reduce((n,r)=>(n[r]=function(){return t(this.$pinia)[r]},n),{}):Object.keys(e).reduce((n,r)=>(n[r]=function(){const s=t(this.$pinia),i=e[r];return typeof i=="function"?i.call(this,s):s[i]},n),{})}function Sl(t,e){return Array.isArray(e)?e.reduce((n,r)=>(n[r]=function(...s){return t(this.$pinia)[r](...s)},n),{}):Object.keys(e).reduce((n,r)=>(n[r]=function(...s){return t(this.$pinia)[e[r]](...s)},n),{})}function D_(t,e){return Array.isArray(e)?e.reduce((n,r)=>(n[r]={get(){return t(this.$pinia)[r]},set(s){return t(this.$pinia)[r]=s}},n),{}):Object.keys(e).reduce((n,r)=>(n[r]={get(){return t(this.$pinia)[e[r]]},set(s){return t(this.$pinia)[e[r]]=s}},n),{})}const mc=xf("modal",{state:()=>({isOpen:!1}),getters:{hiddenClass(t){return t.isOpen?"":"hidden"}}});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},HT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},P_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=i>>2,l=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,d=c&63;u||(d=64,o||(f=64)),r.push(n[h],n[l],n[f],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(x_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const l=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||l==null)throw Error();const f=i<<2|a>>4;if(r.push(f),c!==64){const d=a<<4&240|c>>2;if(r.push(d),l!==64){const g=c<<6&192|l;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},qT=function(t){const e=x_(t);return P_.encodeByteArray(e,!0)},Pa=function(t){return qT(t).replace(/\./g,"")},M_=function(t){try{return P_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=()=>WT().__FIREBASE_DEFAULTS__,KT=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&M_(t[1]);return e&&JSON.parse(e)},kl=()=>{try{return GT()||KT()||zT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},F_=t=>{var e,n;return(n=(e=kl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},U_=t=>{const e=F_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},YT=()=>{var t;return(t=kl())===null||t===void 0?void 0:t.config},$_=t=>{var e;return(e=kl())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Pa(JSON.stringify(n)),Pa(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function JT(){var t;const e=(t=kl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tI(){const t=Pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nI(){try{return typeof indexedDB=="object"}catch{return!1}}function rI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="FirebaseError";class Dn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sI,Object.setPrototypeOf(this,Dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,To.prototype.create)}}class To{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?iI(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Dn(s,a,r)}}function iI(t,e){return t.replace(oI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const oI=/\{\$([^}]+)}/g;function aI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ma(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(sm(i)&&sm(o)){if(!Ma(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function sm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ci(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ri(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lI(t,e){const n=new uI(t,e);return n.subscribe.bind(n)}class uI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Su),s.error===void 0&&(s.error=Su),s.complete===void 0&&(s.complete=Su);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Su(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t){return t&&t._delegate?t._delegate:t}class Ar{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new XT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dI(e))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Br){return this.instances.has(e)}getOptions(e=Br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Br){return this.component?this.component.multipleInstances?e:Br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hI(t){return t===Br?void 0:t}function dI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const pI={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},gI=De.INFO,_I={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},yI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=_I[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pf{constructor(e){this.name=e,this._logLevel=gI,this._logHandler=yI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const vI=(t,e)=>e.some(n=>t instanceof n);let im,om;function bI(){return im||(im=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wI(){return om||(om=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B_=new WeakMap,pc=new WeakMap,j_=new WeakMap,ku=new WeakMap,Mf=new WeakMap;function EI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(br(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&B_.set(n,t)}).catch(()=>{}),Mf.set(e,t),e}function TI(t){if(pc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});pc.set(t,e)}let gc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||j_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function II(t){gc=t(gc)}function AI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cu(this),e,...n);return j_.set(r,e.sort?e.sort():[e]),br(r)}:wI().includes(t)?function(...e){return t.apply(Cu(this),e),br(B_.get(this))}:function(...e){return br(t.apply(Cu(this),e))}}function SI(t){return typeof t=="function"?AI(t):(t instanceof IDBTransaction&&TI(t),vI(t,bI())?new Proxy(t,gc):t)}function br(t){if(t instanceof IDBRequest)return EI(t);if(ku.has(t))return ku.get(t);const e=SI(t);return e!==t&&(ku.set(t,e),Mf.set(e,t)),e}const Cu=t=>Mf.get(t);function kI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=br(o);return r&&o.addEventListener("upgradeneeded",u=>{r(br(o.result),u.oldVersion,u.newVersion,br(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",()=>s())}).catch(()=>{}),a}const CI=["get","getKey","getAll","getAllKeys","count"],RI=["put","add","delete","clear"],Ru=new Map;function am(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ru.get(e))return Ru.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=RI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||CI.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return Ru.set(e,i),i}II(t=>({...t,get:(e,n,r)=>am(e,n)||t.get(e,n,r),has:(e,n)=>!!am(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _c="@firebase/app",lm="0.9.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new Pf("@firebase/app"),LI="@firebase/app-compat",DI="@firebase/analytics-compat",xI="@firebase/analytics",PI="@firebase/app-check-compat",MI="@firebase/app-check",FI="@firebase/auth",UI="@firebase/auth-compat",$I="@firebase/database",VI="@firebase/database-compat",BI="@firebase/functions",jI="@firebase/functions-compat",HI="@firebase/installations",qI="@firebase/installations-compat",WI="@firebase/messaging",GI="@firebase/messaging-compat",KI="@firebase/performance",zI="@firebase/performance-compat",YI="@firebase/remote-config",XI="@firebase/remote-config-compat",QI="@firebase/storage",JI="@firebase/storage-compat",ZI="@firebase/firestore",eA="@firebase/firestore-compat",tA="firebase",nA="9.16.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc="[DEFAULT]",rA={[_c]:"fire-core",[LI]:"fire-core-compat",[xI]:"fire-analytics",[DI]:"fire-analytics-compat",[MI]:"fire-app-check",[PI]:"fire-app-check-compat",[FI]:"fire-auth",[UI]:"fire-auth-compat",[$I]:"fire-rtdb",[VI]:"fire-rtdb-compat",[BI]:"fire-fn",[jI]:"fire-fn-compat",[HI]:"fire-iid",[qI]:"fire-iid-compat",[WI]:"fire-fcm",[GI]:"fire-fcm-compat",[KI]:"fire-perf",[zI]:"fire-perf-compat",[YI]:"fire-rc",[XI]:"fire-rc-compat",[QI]:"fire-gcs",[JI]:"fire-gcs-compat",[ZI]:"fire-fst",[eA]:"fire-fst-compat","fire-js":"fire-js",[tA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=new Map,vc=new Map;function sA(t,e){try{t.container.addComponent(e)}catch(n){is.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function os(t){const e=t.name;if(vc.has(e))return is.debug(`There were multiple attempts to register component ${e}.`),!1;vc.set(e,t);for(const n of Fa.values())sA(n,t);return!0}function Cl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},wr=new To("app","Firebase",iA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=nA;function H_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:yc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw wr.create("bad-app-name",{appName:String(s)});if(n||(n=YT()),!n)throw wr.create("no-options");const i=Fa.get(s);if(i){if(Ma(n,i.options)&&Ma(r,i.config))return i;throw wr.create("duplicate-app",{appName:s})}const o=new mI(s);for(const u of vc.values())o.addComponent(u);const a=new oA(n,r,o);return Fa.set(s,a),a}function Ff(t=yc){const e=Fa.get(t);if(!e&&t===yc)return H_();if(!e)throw wr.create("no-app",{appName:t});return e}function kn(t,e,n){var r;let s=(r=rA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),is.warn(a.join(" "));return}os(new Ar(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="firebase-heartbeat-database",lA=1,no="firebase-heartbeat-store";let Ou=null;function q_(){return Ou||(Ou=kI(aA,lA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(no)}}}).catch(t=>{throw wr.create("idb-open",{originalErrorMessage:t.message})})),Ou}async function uA(t){try{return(await q_()).transaction(no).objectStore(no).get(W_(t))}catch(e){if(e instanceof Dn)is.warn(e.message);else{const n=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});is.warn(n.message)}}}async function um(t,e){try{const r=(await q_()).transaction(no,"readwrite");return await r.objectStore(no).put(e,W_(t)),r.done}catch(n){if(n instanceof Dn)is.warn(n.message);else{const r=wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});is.warn(r.message)}}}function W_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=1024,fA=30*24*60*60*1e3;class hA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=cm();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=fA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=cm(),{heartbeatsToSend:n,unsentEntries:r}=dA(this._heartbeatsCache.heartbeats),s=Pa(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function cm(){return new Date().toISOString().substring(0,10)}function dA(t,e=cA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),fm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),fm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nI()?rI().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await uA(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return um(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return um(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function fm(t){return Pa(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){os(new Ar("platform-logger",e=>new OI(e),"PRIVATE")),os(new Ar("heartbeat",e=>new hA(e),"PRIVATE")),kn(_c,lm,t),kn(_c,lm,"esm2017"),kn("fire-js","")}pA("");var gA="firebase",_A="9.16.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn(gA,_A,"app");function Uf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function G_(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yA=G_,K_=new To("auth","Firebase",G_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=new Pf("@firebase/auth");function ba(t,...e){hm.logLevel<=De.ERROR&&hm.error(`Auth (${ui}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,...e){throw $f(t,...e)}function Cn(t,...e){return $f(t,...e)}function vA(t,e,n){const r=Object.assign(Object.assign({},yA()),{[e]:n});return new To("auth","Firebase",r).create(e,{appName:t.name})}function $f(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return K_.create(t,...e)}function he(t,e,...n){if(!t)throw $f(e,...n)}function Fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ba(e),new Error(e)}function Wn(t,e){t||Fn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=new Map;function Un(t){Wn(t instanceof Function,"Expected a class definition");let e=dm.get(t);return e?(Wn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dm.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t,e){const n=Cl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ma(i,e??{}))return s;mn(s,"already-initialized")}return n.initialize({options:e})}function wA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Un);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function EA(){return mm()==="http:"||mm()==="https:"}function mm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EA()||ZT()||"connection"in navigator)?navigator.onLine:!0}function IA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wn(n>e,"Short delay should be less than long delay!"),this.isMobile=QT()||eI()}get(){return TA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t,e){Wn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=new Ao(3e4,6e4);function So(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ci(t,e,n,r,s={}){return Y_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Io(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),z_.fetch()(X_(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},i))})}async function Y_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},AA),e);try{const s=new kA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sa(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw sa(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw sa(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw vA(t,h,c);mn(t,h)}}catch(s){if(s instanceof Dn)throw s;mn(t,"network-request-failed")}}async function ko(t,e,n,r,s={}){const i=await ci(t,e,n,r,s);return"mfaPendingCredential"in i&&mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function X_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Vf(t.config,s):`${t.config.apiScheme}://${s}`}class kA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cn(this.auth,"network-request-failed")),SA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Cn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(t,e){return ci(t,"POST","/v1/accounts:delete",e)}async function RA(t,e){return ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OA(t,e=!1){const n=Qe(t),r=await n.getIdToken(e),s=Bf(r);he(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Fi(Nu(s.auth_time)),issuedAtTime:Fi(Nu(s.iat)),expirationTime:Fi(Nu(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Nu(t){return Number(t)*1e3}function Bf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ba("JWT malformed, contained fewer than 3 sections"),null;try{const s=M_(n);return s?JSON.parse(s):(ba("Failed to decode base64 JWT payload"),null)}catch(s){return ba("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function NA(t){const e=Bf(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dn&&LA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function LA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fi(this.lastLoginAt),this.creationTime=Fi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(t){var e;const n=t.auth,r=await t.getIdToken(),s=await qs(t,RA(n,{idToken:r}));he(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?MA(i.providerUserInfo):[],a=PA(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=u?c:!1,l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Q_(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,l)}async function xA(t){const e=Qe(t);await Ua(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function MA(t){return t.map(e=>{var{providerId:n}=e,r=Uf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(t,e){const n=await Y_(t,{},async()=>{const r=Io({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=X_(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",z_.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return he(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await FA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ro;return r&&(he(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(he(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(he(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ro,this.toJSON())}_performRefresh(){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Uf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Q_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await qs(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return OA(this,e)}reload(){return xA(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ua(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await qs(this,CA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,c,h;const l=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,d=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,p=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:T,emailVerified:w,isAnonymous:S,providerData:N,stsTokenManager:L}=n;he(T&&L,e,"internal-error");const P=ro.fromJSON(this.name,L);he(typeof T=="string",e,"internal-error"),nr(l,e.name),nr(f,e.name),he(typeof w=="boolean",e,"internal-error"),he(typeof S=="boolean",e,"internal-error"),nr(d,e.name),nr(g,e.name),nr(y,e.name),nr(v,e.name),nr(p,e.name),nr(E,e.name);const F=new Jr({uid:T,auth:e,email:f,emailVerified:w,displayName:l,isAnonymous:S,photoURL:g,phoneNumber:d,tenantId:y,stsTokenManager:P,createdAt:p,lastLoginAt:E});return N&&Array.isArray(N)&&(F.providerData=N.map(Q=>Object.assign({},Q))),v&&(F._redirectEventId=v),F}static async _fromIdTokenResponse(e,n,r=!1){const s=new ro;s.updateFromServerResponse(n);const i=new Jr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ua(i),i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}J_.type="NONE";const pm=J_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t,e,n){return`firebase:${t}:${e}:${n}`}class Ms{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=wa(this.userKey,s.apiKey,i),this.fullPersistenceKey=wa("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ms(Un(pm),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Un(pm);const o=wa(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const l=Jr._fromJSON(e,h);c!==i&&(a=l),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ms(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Ms(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ty(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Z_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ry(e))return"Blackberry";if(sy(e))return"Webos";if(jf(e))return"Safari";if((e.includes("chrome/")||ey(e))&&!e.includes("edge/"))return"Chrome";if(ny(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Z_(t=Pt()){return/firefox\//i.test(t)}function jf(t=Pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ey(t=Pt()){return/crios\//i.test(t)}function ty(t=Pt()){return/iemobile/i.test(t)}function ny(t=Pt()){return/android/i.test(t)}function ry(t=Pt()){return/blackberry/i.test(t)}function sy(t=Pt()){return/webos/i.test(t)}function Rl(t=Pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UA(t=Pt()){var e;return Rl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $A(){return tI()&&document.documentMode===10}function iy(t=Pt()){return Rl(t)||ny(t)||sy(t)||ry(t)||/windows phone/i.test(t)||ty(t)}function VA(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e=[]){let n;switch(t){case"Browser":n=gm(Pt());break;case"Worker":n=`${gm(Pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ui}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _m(this),this.idTokenSubscription=new _m(this),this.beforeStateQueue=new BA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K_,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ms.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ua(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Qe(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new To("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Ms.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return he(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Co(t){return Qe(t)}class _m{constructor(e){this.auth=e,this.observer=null,this.addObserver=lI(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function HA(t,e,n){const r=Co(t);he(r._canInitEmulator,r,"emulator-config-failed"),he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=ay(e),{host:o,port:a}=qA(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||WA()}function ay(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qA(t){const e=ay(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ym(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ym(o)}}}function ym(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}async function GA(t,e){return ci(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(t,e){return ko(t,"POST","/v1/accounts:signInWithPassword",So(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zA(t,e){return ko(t,"POST","/v1/accounts:signInWithEmailLink",So(t,e))}async function YA(t,e){return ko(t,"POST","/v1/accounts:signInWithEmailLink",So(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends Hf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new so(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new so(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return KA(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return zA(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return GA(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return YA(e,{idToken:n,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fs(t,e){return ko(t,"POST","/v1/accounts:signInWithIdp",So(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="http://localhost";class as extends Hf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new as(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Uf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new as(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Fs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Fs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fs(e,n)}buildRequest(){const e={requestUri:XA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Io(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JA(t){const e=Ci(Ri(t)).link,n=e?Ci(Ri(e)).deep_link_id:null,r=Ci(Ri(t)).deep_link_id;return(r?Ci(Ri(r)).link:null)||r||n||e||t}class qf{constructor(e){var n,r,s,i,o,a;const u=Ci(Ri(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,l=QA((s=u.mode)!==null&&s!==void 0?s:null);he(c&&h&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=JA(e);try{return new qf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.providerId=fi.PROVIDER_ID}static credential(e,n){return so._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=qf.parseLink(n);return he(r,"argument-error"),so._fromEmailAndCode(e,r.code,r.tenantId)}}fi.PROVIDER_ID="password";fi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends ly{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Ro{constructor(){super("facebook.com")}static credential(e){return as._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Ro{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return as._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.GOOGLE_SIGN_IN_METHOD="google.com";fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Ro{constructor(){super("github.com")}static credential(e){return as._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends Ro{constructor(){super("twitter.com")}static credential(e,n){return as._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return dr.credential(n,r)}catch{return null}}}dr.TWITTER_SIGN_IN_METHOD="twitter.com";dr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(t,e){return ko(t,"POST","/v1/accounts:signUp",So(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Jr._fromIdTokenResponse(e,r,s),o=vm(r);return new ls({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=vm(r);return new ls({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function vm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends Dn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,$a.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new $a(e,n,r,s)}}function uy(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?$a._fromErrorAndOperation(t,i,e,r):i})}async function eS(t,e,n=!1){const r=await qs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ls._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await qs(t,uy(r,s,e,t),n);he(i.idToken,r,"internal-error");const o=Bf(i.idToken);he(o,r,"internal-error");const{sub:a}=o;return he(t.uid===a,r,"user-mismatch"),ls._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&mn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cy(t,e,n=!1){const r="signIn",s=await uy(t,r,e),i=await ls._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function nS(t,e){return cy(Co(t),e)}async function rS(t,e,n){const r=Co(t),s=await ZA(r,{returnSecureToken:!0,email:e,password:n}),i=await ls._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(i.user),i}function sS(t,e,n){return nS(Qe(t),fi.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(t,e){return ci(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Qe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await qs(r,iS(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function aS(t,e,n,r){return Qe(t).onIdTokenChanged(e,n,r)}function lS(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}const Va="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Va,"1"),this.storage.removeItem(Va),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(){const t=Pt();return jf(t)||Rl(t)}const cS=1e3,fS=10;class hy extends fy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=uS()&&VA(),this.fallbackToPolling=iy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);$A()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,fS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},cS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hy.type="LOCAL";const hS=hy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy extends fy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dy.type="SESSION";const my=dy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ol(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await dS(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ol.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=Wf("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(l){const f=l;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return window}function pS(t){Rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}async function gS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _S(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function yS(){return py()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="firebaseLocalStorageDb",vS=1,Ba="firebaseLocalStorage",_y="fbase_key";class Oo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nl(t,e){return t.transaction([Ba],e?"readwrite":"readonly").objectStore(Ba)}function bS(){const t=indexedDB.deleteDatabase(gy);return new Oo(t).toPromise()}function wc(){const t=indexedDB.open(gy,vS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ba,{keyPath:_y})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ba)?e(r):(r.close(),await bS(),e(await wc()))})})}async function bm(t,e,n){const r=Nl(t,!0).put({[_y]:e,value:n});return new Oo(r).toPromise()}async function wS(t,e){const n=Nl(t,!1).get(e),r=await new Oo(n).toPromise();return r===void 0?null:r.value}function wm(t,e){const n=Nl(t,!0).delete(e);return new Oo(n).toPromise()}const ES=800,TS=3;class yy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>TS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return py()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ol._getInstance(yS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await gS(),!this.activeServiceWorker)return;this.sender=new mS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_S()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wc();return await bm(e,Va,"1"),await wm(e,Va),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>bm(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>wS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Nl(s,!1).getAll();return new Oo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ES)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yy.type="LOCAL";const IS=yy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function SS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Cn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",AS().appendChild(r)})}function kS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new Ao(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t,e){return e?Un(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf extends Hf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RS(t){return cy(t.auth,new Gf(t),t.bypassAuthState)}function OS(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),tS(n,new Gf(t),t.bypassAuthState)}async function NS(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),eS(n,new Gf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RS;case"linkViaPopup":case"linkViaRedirect":return NS;case"reauthViaPopup":case"reauthViaRedirect":return OS;default:mn(this.auth,"internal-error")}}resolve(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=new Ao(2e3,1e4);class Cs extends vy{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Cs.currentPopupAction&&Cs.currentPopupAction.cancel(),Cs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Wn(this.filter.length===1,"Popup operations only handle one event");const e=Wf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,LS.get())};e()}}Cs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="pendingRedirect",Ea=new Map;class xS extends vy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ea.get(this.auth._key());if(!e){try{const r=await PS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ea.set(this.auth._key(),e)}return this.bypassAuthState||Ea.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PS(t,e){const n=US(e),r=FS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function MS(t,e){Ea.set(t._key(),e)}function FS(t){return Un(t._redirectPersistence)}function US(t){return wa(DS,t.config.apiKey,t.name)}async function $S(t,e,n=!1){const r=Co(t),s=CS(r,e),o=await new xS(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=10*60*1e3;class BS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!by(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Em(e))}saveEventToCache(e){this.cachedEventUids.add(Em(e)),this.lastProcessedEventTime=Date.now()}}function Em(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function by({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return by(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(t,e={}){return ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WS=/^https?/;async function GS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await HS(t);for(const n of e)try{if(KS(n))return}catch{}mn(t,"unauthorized-domain")}function KS(t){const e=bc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!WS.test(n))return!1;if(qS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=new Ao(3e4,6e4);function Tm(){const t=Rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function YS(t){return new Promise((e,n)=>{var r,s,i;function o(){Tm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Tm(),n(Cn(t,"network-request-failed"))},timeout:zS.get()})}if(!((s=(r=Rn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Rn().gapi)===null||i===void 0)&&i.load)o();else{const a=kS("iframefcb");return Rn()[a]=()=>{gapi.load?o():n(Cn(t,"network-request-failed"))},SS(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Ta=null,e})}let Ta=null;function XS(t){return Ta=Ta||YS(t),Ta}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=new Ao(5e3,15e3),JS="__/auth/iframe",ZS="emulator/auth/iframe",ek={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nk(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vf(e,ZS):`https://${t.config.authDomain}/${JS}`,r={apiKey:e.apiKey,appName:t.name,v:ui},s=tk.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Io(r).slice(1)}`}async function rk(t){const e=await XS(t),n=Rn().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:nk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ek,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Cn(t,"network-request-failed"),a=Rn().setTimeout(()=>{i(o)},QS.get());function u(){Rn().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ik=500,ok=600,ak="_blank",lk="http://localhost";class Im{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uk(t,e,n,r=ik,s=ok){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},sk),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Pt().toLowerCase();n&&(a=ey(c)?ak:n),Z_(c)&&(e=e||lk,u.scrollbars="yes");const h=Object.entries(u).reduce((f,[d,g])=>`${f}${d}=${g},`,"");if(UA(c)&&a!=="_self")return ck(e||"",a),new Im(null);const l=window.open(e||"",a,h);he(l,t,"popup-blocked");try{l.focus()}catch{}return new Im(l)}function ck(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="__/auth/handler",hk="emulator/auth/handler";function Am(t,e,n,r,s,i){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ui,eventId:s};if(e instanceof ly){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",aI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,c]of Object.entries(i||{}))o[u]=c}if(e instanceof Ro){const u=e.getScopes().filter(c=>c!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];return`${dk(t)}?${Io(a).slice(1)}`}function dk({config:t}){return t.emulator?Vf(t,hk):`https://${t.authDomain}/${fk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="webStorageSupport";class mk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=my,this._completeRedirectFn=$S,this._overrideRedirectResult=MS}async _openPopup(e,n,r,s){var i;Wn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=Am(e,n,r,bc(),s);return uk(e,o,Wf())}async _openRedirect(e,n,r,s){return await this._originValidation(e),pS(Am(e,n,r,bc(),s)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Wn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await rk(e),r=new BS(e);return n.register("authEvent",s=>(he(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lu,{type:Lu},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Lu];o!==void 0&&n(!!o),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iy()||jf()||Rl()}}const pk=mk;var Sm="@firebase/auth",km="0.21.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function yk(t){os(new Ar("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),{apiKey:i,authDomain:o}=r.options;return((a,u)=>{he(i&&!i.includes(":"),"invalid-api-key",{appName:a.name}),he(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oy(t)},h=new jA(a,u,c);return wA(h,n),h})(r,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),os(new Ar("auth-internal",e=>{const n=Co(e.getProvider("auth").getImmediate());return(r=>new gk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kn(Sm,km,_k(t)),kn(Sm,km,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=5*60,bk=$_("authIdTokenMaxAge")||vk;let Cm=null;const wk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>bk)return;const s=n==null?void 0:n.token;Cm!==s&&(Cm=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function fn(t=Ff()){const e=Cl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bA(t,{popupRedirectResolver:pk,persistence:[IS,hS,my]}),r=$_("authTokenSyncURL");if(r){const i=wk(r);lS(n,i,()=>i(n.currentUser)),aS(n,o=>i(o))}const s=F_("auth");return s&&HA(n,`http://${s}`),n}yk("Browser");var Ek=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ee,Kf=Kf||{},_e=Ek||self;function ja(){}function Ll(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function No(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Tk(t){return Object.prototype.hasOwnProperty.call(t,Du)&&t[Du]||(t[Du]=++Ik)}var Du="closure_uid_"+(1e9*Math.random()>>>0),Ik=0;function Ak(t,e,n){return t.call.apply(t.bind,arguments)}function Sk(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Dt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Dt=Ak:Dt=Sk,Dt.apply(null,arguments)}function ia(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function kt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Or(){this.s=this.s,this.o=this.o}var kk=0;Or.prototype.s=!1;Or.prototype.na=function(){!this.s&&(this.s=!0,this.M(),kk!=0)&&Tk(this)};Or.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wy=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function zf(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Rm(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Ll(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function xt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}xt.prototype.h=function(){this.defaultPrevented=!0};var Ck=function(){if(!_e.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{_e.addEventListener("test",ja,e),_e.removeEventListener("test",ja,e)}catch{}return t}();function Ha(t){return/^[\s\xa0]*$/.test(t)}var Om=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function xu(t,e){return t<e?-1:t>e?1:0}function Dl(){var t=_e.navigator;return t&&(t=t.userAgent)?t:""}function An(t){return Dl().indexOf(t)!=-1}function Yf(t){return Yf[" "](t),t}Yf[" "]=ja;function Rk(t){var e=Lk;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var Ok=An("Opera"),Ws=An("Trident")||An("MSIE"),Ey=An("Edge"),Ec=Ey||Ws,Ty=An("Gecko")&&!(Dl().toLowerCase().indexOf("webkit")!=-1&&!An("Edge"))&&!(An("Trident")||An("MSIE"))&&!An("Edge"),Nk=Dl().toLowerCase().indexOf("webkit")!=-1&&!An("Edge");function Iy(){var t=_e.document;return t?t.documentMode:void 0}var qa;e:{var Pu="",Mu=function(){var t=Dl();if(Ty)return/rv:([^\);]+)(\)|;)/.exec(t);if(Ey)return/Edge\/([\d\.]+)/.exec(t);if(Ws)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Nk)return/WebKit\/(\S+)/.exec(t);if(Ok)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Mu&&(Pu=Mu?Mu[1]:""),Ws){var Fu=Iy();if(Fu!=null&&Fu>parseFloat(Pu)){qa=String(Fu);break e}}qa=Pu}var Lk={};function Dk(){return Rk(function(){let t=0;const e=Om(String(qa)).split("."),n=Om("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var s=e[o]||"",i=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s[0].length==0&&i[0].length==0)break;t=xu(s[1].length==0?0:parseInt(s[1],10),i[1].length==0?0:parseInt(i[1],10))||xu(s[2].length==0,i[2].length==0)||xu(s[2],i[2]),s=s[3],i=i[3]}while(t==0)}return 0<=t})}var Tc;if(_e.document&&Ws){var Nm=Iy();Tc=Nm||parseInt(qa,10)||void 0}else Tc=void 0;var xk=Tc;function io(t,e){if(xt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ty){e:{try{Yf(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Pk[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&io.X.h.call(this)}}kt(io,xt);var Pk={2:"touch",3:"pen",4:"mouse"};io.prototype.h=function(){io.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Lo="closure_listenable_"+(1e6*Math.random()|0),Mk=0;function Fk(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=s,this.key=++Mk,this.ba=this.ea=!1}function xl(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Xf(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Ay(t){const e={};for(const n in t)e[n]=t[n];return e}const Lm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sy(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Lm.length;i++)n=Lm[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Pl(t){this.src=t,this.g={},this.h=0}Pl.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Ac(t,e,r,s);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new Fk(e,this.src,i,!!r,s),e.ea=n,t.push(e)),e};function Ic(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=wy(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(xl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Ac(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.ba&&i.listener==e&&i.capture==!!n&&i.ha==r)return s}return-1}var Qf="closure_lm_"+(1e6*Math.random()|0),Uu={};function ky(t,e,n,r,s){if(r&&r.once)return Ry(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)ky(t,e[i],n,r,s);return null}return n=eh(n),t&&t[Lo]?t.N(e,n,No(r)?!!r.capture:!!r,s):Cy(t,e,n,!1,r,s)}function Cy(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=No(s)?!!s.capture:!!s,a=Zf(t);if(a||(t[Qf]=a=new Pl(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=Uk(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ck||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(Ny(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Uk(){function t(n){return e.call(t.src,t.listener,n)}const e=$k;return t}function Ry(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Ry(t,e[i],n,r,s);return null}return n=eh(n),t&&t[Lo]?t.O(e,n,No(r)?!!r.capture:!!r,s):Cy(t,e,n,!0,r,s)}function Oy(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)Oy(t,e[i],n,r,s);else r=No(r)?!!r.capture:!!r,n=eh(n),t&&t[Lo]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Ac(i,n,r,s),-1<n&&(xl(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Zf(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ac(e,n,r,s)),(n=-1<t?e[t]:null)&&Jf(n))}function Jf(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[Lo])Ic(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ny(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Zf(e))?(Ic(n,t),n.h==0&&(n.src=null,e[Qf]=null)):xl(t)}}}function Ny(t){return t in Uu?Uu[t]:Uu[t]="on"+t}function $k(t,e){if(t.ba)t=!0;else{e=new io(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&Jf(t),t=n.call(r,e)}return t}function Zf(t){return t=t[Qf],t instanceof Pl?t:null}var $u="__closure_events_fn_"+(1e9*Math.random()>>>0);function eh(t){return typeof t=="function"?t:(t[$u]||(t[$u]=function(e){return t.handleEvent(e)}),t[$u])}function wt(){Or.call(this),this.i=new Pl(this),this.P=this,this.I=null}kt(wt,Or);wt.prototype[Lo]=!0;wt.prototype.removeEventListener=function(t,e,n,r){Oy(this,t,e,n,r)};function At(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new xt(e,t);else if(e instanceof xt)e.target=e.target||t;else{var s=e;e=new xt(r,t),Sy(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=oa(o,r,!0,e)&&s}if(o=e.g=t,s=oa(o,r,!0,e)&&s,s=oa(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=oa(o,r,!1,e)&&s}wt.prototype.M=function(){if(wt.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)xl(n[r]);delete t.g[e],t.h--}}this.I=null};wt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};wt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function oa(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ba&&o.capture==n){var a=o.listener,u=o.ha||o.src;o.ea&&Ic(t.i,o),s=a.call(u,r)!==!1&&s}}return s&&!r.defaultPrevented}var th=_e.JSON.stringify;function Vk(){var t=xy;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Bk{constructor(){this.h=this.g=null}add(e,n){const r=Ly.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Ly=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new jk,t=>t.reset());class jk{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Hk(t){_e.setTimeout(()=>{throw t},0)}function Dy(t,e){Sc||qk(),kc||(Sc(),kc=!0),xy.add(t,e)}var Sc;function qk(){var t=_e.Promise.resolve(void 0);Sc=function(){t.then(Wk)}}var kc=!1,xy=new Bk;function Wk(){for(var t;t=Vk();){try{t.h.call(t.g)}catch(n){Hk(n)}var e=Ly;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}kc=!1}function Ml(t,e){wt.call(this),this.h=t||1,this.g=e||_e,this.j=Dt(this.lb,this),this.l=Date.now()}kt(Ml,wt);ee=Ml.prototype;ee.ca=!1;ee.R=null;ee.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),At(this,"tick"),this.ca&&(nh(this),this.start()))}};ee.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function nh(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}ee.M=function(){Ml.X.M.call(this),nh(this),delete this.g};function rh(t,e,n){if(typeof t=="function")n&&(t=Dt(t,n));else if(t&&typeof t.handleEvent=="function")t=Dt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:_e.setTimeout(t,e||0)}function Py(t){t.g=rh(()=>{t.g=null,t.i&&(t.i=!1,Py(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Gk extends Or{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Py(this)}M(){super.M(),this.g&&(_e.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oo(t){Or.call(this),this.h=t,this.g={}}kt(oo,Or);var Dm=[];function My(t,e,n,r){Array.isArray(n)||(n&&(Dm[0]=n.toString()),n=Dm);for(var s=0;s<n.length;s++){var i=ky(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Fy(t){Xf(t.g,function(e,n){this.g.hasOwnProperty(n)&&Jf(e)},t),t.g={}}oo.prototype.M=function(){oo.X.M.call(this),Fy(this)};oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Fl(){this.g=!0}Fl.prototype.Aa=function(){this.g=!1};function Kk(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");o=2<=l.length&&l[1]=="type"?o+(h+"="+c+"&"):o+(h+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function zk(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Rs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Xk(t,n)+(r?" "+r:"")})}function Yk(t,e){t.info(function(){return"TIMEOUT: "+e})}Fl.prototype.info=function(){};function Xk(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return th(n)}catch{return e}}var gs={},xm=null;function Ul(){return xm=xm||new wt}gs.Pa="serverreachability";function Uy(t){xt.call(this,gs.Pa,t)}kt(Uy,xt);function ao(t){const e=Ul();At(e,new Uy(e))}gs.STAT_EVENT="statevent";function $y(t,e){xt.call(this,gs.STAT_EVENT,t),this.stat=e}kt($y,xt);function Bt(t){const e=Ul();At(e,new $y(e,t))}gs.Qa="timingevent";function Vy(t,e){xt.call(this,gs.Qa,t),this.size=e}kt(Vy,xt);function Do(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return _e.setTimeout(function(){t()},e)}var $l={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},By={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function sh(){}sh.prototype.h=null;function Pm(t){return t.h||(t.h=t.i())}function jy(){}var xo={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ih(){xt.call(this,"d")}kt(ih,xt);function oh(){xt.call(this,"c")}kt(oh,xt);var Cc;function Vl(){}kt(Vl,sh);Vl.prototype.g=function(){return new XMLHttpRequest};Vl.prototype.i=function(){return{}};Cc=new Vl;function Po(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new oo(this),this.O=Qk,t=Ec?125:void 0,this.T=new Ml(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Hy}function Hy(){this.i=null,this.g="",this.h=!1}var Qk=45e3,Rc={},Wa={};ee=Po.prototype;ee.setTimeout=function(t){this.O=t};function Oc(t,e,n){t.K=1,t.v=jl(Gn(e)),t.s=n,t.P=!0,qy(t,null)}function qy(t,e){t.F=Date.now(),Mo(t),t.A=Gn(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),Jy(n.i,"t",r),t.C=0,n=t.l.H,t.h=new Hy,t.g=vv(t.l,n?e:null,!t.s),0<t.N&&(t.L=new Gk(Dt(t.La,t,t.g),t.N)),My(t.S,t.g,"readystatechange",t.ib),e=t.H?Ay(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),ao(),Kk(t.j,t.u,t.A,t.m,t.U,t.s)}ee.ib=function(t){t=t.target;const e=this.L;e&&$n(t)==3?e.l():this.La(t)};ee.La=function(t){try{if(t==this.g)e:{const h=$n(this.g);var e=this.g.Ea();const l=this.g.aa();if(!(3>h)&&(h!=3||Ec||this.g&&(this.h.h||this.g.fa()||$m(this.g)))){this.I||h!=4||e==7||(e==8||0>=l?ao(3):ao(2)),Bl(this);var n=this.g.aa();this.Y=n;t:if(Wy(this)){var r=$m(this.g);t="";var s=r.length,i=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),Ui(this);var o="";break t}this.h.i=new _e.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,zk(this.j,this.u,this.A,this.m,this.U,h,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ha(a)){var c=a;break t}}c=null}if(n=c)Rs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Nc(this,n);else{this.i=!1,this.o=3,Bt(12),Kr(this),Ui(this);break e}}this.P?(Gy(this,h,o),Ec&&this.i&&h==3&&(My(this.S,this.T,"tick",this.hb),this.T.start())):(Rs(this.j,this.m,o,null),Nc(this,o)),h==4&&Kr(this),this.i&&!this.I&&(h==4?pv(this.l,this):(this.i=!1,Mo(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Bt(12)):(this.o=0,Bt(13)),Kr(this),Ui(this)}}}catch{}finally{}};function Wy(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function Gy(t,e,n){let r=!0,s;for(;!t.I&&t.C<n.length;)if(s=Jk(t,n),s==Wa){e==4&&(t.o=4,Bt(14),r=!1),Rs(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Rc){t.o=4,Bt(15),Rs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Rs(t.j,t.m,s,null),Nc(t,s);Wy(t)&&s!=Wa&&s!=Rc&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Bt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),dh(e),e.K=!0,Bt(11))):(Rs(t.j,t.m,n,"[Invalid Chunked Response]"),Kr(t),Ui(t))}ee.hb=function(){if(this.g){var t=$n(this.g),e=this.g.fa();this.C<e.length&&(Bl(this),Gy(this,t,e),this.i&&t!=4&&Mo(this))}};function Jk(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Wa:(n=Number(e.substring(n,r)),isNaN(n)?Rc:(r+=1,r+n>e.length?Wa:(e=e.substr(r,n),t.C=r+n,e)))}ee.cancel=function(){this.I=!0,Kr(this)};function Mo(t){t.V=Date.now()+t.O,Ky(t,t.O)}function Ky(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Do(Dt(t.gb,t),e)}function Bl(t){t.B&&(_e.clearTimeout(t.B),t.B=null)}ee.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(Yk(this.j,this.A),this.K!=2&&(ao(),Bt(17)),Kr(this),this.o=2,Ui(this)):Ky(this,this.V-t)};function Ui(t){t.l.G==0||t.I||pv(t.l,t)}function Kr(t){Bl(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,nh(t.T),Fy(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Nc(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Lc(n.h,t))){if(!t.J&&Lc(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)za(n),Wl(n);else break e;hh(n),Bt(18)}}else n.Ba=s[1],0<n.Ba-n.T&&37500>s[2]&&n.L&&n.A==0&&!n.v&&(n.v=Do(Dt(n.cb,n),6e3));if(1>=tv(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else zr(n,11)}else if((t.J||n.g==t)&&za(n),!Ha(e))for(s=n.Fa.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.T=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.I=c[1],n.ka=c[2];const h=c[3];h!=null&&(n.ma=h,n.j.info("VER="+n.ma));const l=c[4];l!=null&&(n.Ca=l,n.j.info("SVER="+n.Ca));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=t.g;if(d){const g=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.h;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(ah(i,i.h),i.h=null))}if(r.D){const y=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.za=y,ze(r.F,r.D,y))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=yv(r,r.H?r.ka:null,r.V),o.J){nv(r.h,o);var a=o,u=r.J;u&&a.setTimeout(u),a.B&&(Bl(a),Mo(a)),r.g=o}else dv(r);0<n.i.length&&Gl(n)}else c[0]!="stop"&&c[0]!="close"||zr(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?zr(n,7):fh(n):c[0]!="noop"&&n.l&&n.l.wa(c),n.A=0)}}ao(4)}catch{}}function Zk(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Ll(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function eC(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Ll(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function zy(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ll(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=eC(t),r=Zk(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var Yy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tC(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Zr(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Zr){this.h=e!==void 0?e:t.h,Ga(this,t.j),this.s=t.s,this.g=t.g,Ka(this,t.m),this.l=t.l,e=t.i;var n=new lo;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Mm(this,n),this.o=t.o}else t&&(n=String(t).match(Yy))?(this.h=!!e,Ga(this,n[1]||"",!0),this.s=Oi(n[2]||""),this.g=Oi(n[3]||"",!0),Ka(this,n[4]),this.l=Oi(n[5]||"",!0),Mm(this,n[6]||"",!0),this.o=Oi(n[7]||"")):(this.h=!!e,this.i=new lo(null,this.h))}Zr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ni(e,Fm,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ni(e,Fm,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ni(n,n.charAt(0)=="/"?sC:rC,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ni(n,oC)),t.join("")};function Gn(t){return new Zr(t)}function Ga(t,e,n){t.j=n?Oi(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ka(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Mm(t,e,n){e instanceof lo?(t.i=e,aC(t.i,t.h)):(n||(e=Ni(e,iC)),t.i=new lo(e,t.h))}function ze(t,e,n){t.i.set(e,n)}function jl(t){return ze(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Oi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ni(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,nC),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function nC(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Fm=/[#\/\?@]/g,rC=/[#\?:]/g,sC=/[#\?]/g,iC=/[#\?@]/g,oC=/#/g;function lo(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Nr(t){t.g||(t.g=new Map,t.h=0,t.i&&tC(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ee=lo.prototype;ee.add=function(t,e){Nr(this),this.i=null,t=hi(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Xy(t,e){Nr(t),e=hi(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Qy(t,e){return Nr(t),e=hi(t,e),t.g.has(e)}ee.forEach=function(t,e){Nr(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};ee.oa=function(){Nr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};ee.W=function(t){Nr(this);let e=[];if(typeof t=="string")Qy(this,t)&&(e=e.concat(this.g.get(hi(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ee.set=function(t,e){return Nr(this),this.i=null,t=hi(this,t),Qy(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ee.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function Jy(t,e,n){Xy(t,e),0<n.length&&(t.i=null,t.g.set(hi(t,e),zf(n)),t.h+=n.length)}ee.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function hi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function aC(t,e){e&&!t.j&&(Nr(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(Xy(this,r),Jy(this,s,n))},t)),t.j=e}var lC=class{constructor(e,n){this.h=e,this.g=n}};function Zy(t){this.l=t||uC,_e.PerformanceNavigationTiming?(t=_e.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(_e.g&&_e.g.Ga&&_e.g.Ga()&&_e.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var uC=10;function ev(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function tv(t){return t.h?1:t.g?t.g.size:0}function Lc(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function ah(t,e){t.g?t.g.add(e):t.h=e}function nv(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Zy.prototype.cancel=function(){if(this.i=rv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function rv(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return zf(t.i)}function lh(){}lh.prototype.stringify=function(t){return _e.JSON.stringify(t,void 0)};lh.prototype.parse=function(t){return _e.JSON.parse(t,void 0)};function cC(){this.g=new lh}function fC(t,e,n){const r=n||"";try{zy(t,function(s,i){let o=s;No(s)&&(o=th(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function hC(t,e){const n=new Fl;if(_e.Image){const r=new Image;r.onload=ia(aa,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ia(aa,n,r,"TestLoadImage: error",!1,e),r.onabort=ia(aa,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ia(aa,n,r,"TestLoadImage: timeout",!1,e),_e.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function aa(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Fo(t){this.l=t.ac||null,this.j=t.jb||!1}kt(Fo,sh);Fo.prototype.g=function(){return new Hl(this.l,this.j)};Fo.prototype.i=function(t){return function(){return t}}({});function Hl(t,e){wt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=uh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kt(Hl,wt);var uh=0;ee=Hl.prototype;ee.open=function(t,e){if(this.readyState!=uh)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,uo(this)};ee.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||_e).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};ee.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uo(this)),this.readyState=uh};ee.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,uo(this)),this.g&&(this.readyState=3,uo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof _e.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sv(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function sv(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}ee.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Uo(this):uo(this),this.readyState==3&&sv(this)}};ee.Va=function(t){this.g&&(this.response=this.responseText=t,Uo(this))};ee.Ua=function(t){this.g&&(this.response=t,Uo(this))};ee.ga=function(){this.g&&Uo(this)};function Uo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,uo(t)}ee.setRequestHeader=function(t,e){this.v.append(t,e)};ee.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ee.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function uo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Hl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var dC=_e.JSON.parse;function et(t){wt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=iv,this.K=this.L=!1}kt(et,wt);var iv="",mC=/^https?$/i,pC=["POST","PUT"];ee=et.prototype;ee.Ka=function(t){this.L=t};ee.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Cc.g(),this.C=this.u?Pm(this.u):Pm(Cc),this.g.onreadystatechange=Dt(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){Um(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=_e.FormData&&t instanceof _e.FormData,!(0<=wy(pC,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{lv(this),0<this.B&&((this.K=gC(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dt(this.qa,this)):this.A=rh(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Um(this,i)}};function gC(t){return Ws&&Dk()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ee.qa=function(){typeof Kf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,At(this,"timeout"),this.abort(8))};function Um(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ov(t),ql(t)}function ov(t){t.D||(t.D=!0,At(t,"complete"),At(t,"error"))}ee.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,At(this,"complete"),At(this,"abort"),ql(this))};ee.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ql(this,!0)),et.X.M.call(this)};ee.Ha=function(){this.s||(this.F||this.v||this.l?av(this):this.fb())};ee.fb=function(){av(this)};function av(t){if(t.h&&typeof Kf<"u"&&(!t.C[1]||$n(t)!=4||t.aa()!=2)){if(t.v&&$n(t)==4)rh(t.Ha,0,t);else if(At(t,"readystatechange"),$n(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var s=String(t.H).match(Yy)[1]||null;if(!s&&_e.self&&_e.self.location){var i=_e.self.location.protocol;s=i.substr(0,i.length-1)}r=!mC.test(s?s.toLowerCase():"")}n=r}if(n)At(t,"complete"),At(t,"success");else{t.m=6;try{var o=2<$n(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",ov(t)}}finally{ql(t)}}}}function ql(t,e){if(t.g){lv(t);const n=t.g,r=t.C[0]?ja:null;t.g=null,t.C=null,e||At(t,"ready");try{n.onreadystatechange=r}catch{}}}function lv(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(_e.clearTimeout(t.A),t.A=null)}function $n(t){return t.g?t.g.readyState:0}ee.aa=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}};ee.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};ee.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),dC(e)}};function $m(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case iv:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}ee.Ea=function(){return this.m};ee.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function uv(t){let e="";return Xf(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function ch(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=uv(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ze(t,e,n))}function Ei(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function cv(t){this.Ca=0,this.i=[],this.j=new Fl,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ei("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ei("baseRetryDelayMs",5e3,t),this.bb=Ei("retryDelaySeedMs",1e4,t),this.$a=Ei("forwardChannelMaxRetries",2,t),this.ta=Ei("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new Zy(t&&t.concurrentRequestLimit),this.Fa=new cC,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}ee=cv.prototype;ee.ma=8;ee.G=1;function fh(t){if(fv(t),t.G==3){var e=t.U++,n=Gn(t.F);ze(n,"SID",t.I),ze(n,"RID",e),ze(n,"TYPE","terminate"),$o(t,n),e=new Po(t,t.j,e,void 0),e.K=2,e.v=jl(Gn(n)),n=!1,_e.navigator&&_e.navigator.sendBeacon&&(n=_e.navigator.sendBeacon(e.v.toString(),"")),!n&&_e.Image&&(new Image().src=e.v,n=!0),n||(e.g=vv(e.l,null),e.g.da(e.v)),e.F=Date.now(),Mo(e)}_v(t)}function Wl(t){t.g&&(dh(t),t.g.cancel(),t.g=null)}function fv(t){Wl(t),t.u&&(_e.clearTimeout(t.u),t.u=null),za(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&_e.clearTimeout(t.m),t.m=null)}function Gl(t){ev(t.h)||t.m||(t.m=!0,Dy(t.Ja,t),t.C=0)}function _C(t,e){return tv(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=Do(Dt(t.Ja,t,e),gv(t,t.C)),t.C++,!0)}ee.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const s=new Po(this,this.j,t,void 0);let i=this.s;if(this.S&&(i?(i=Ay(i),Sy(i,this.S)):i=this.S),this.o!==null||this.N||(s.H=i,i=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=hv(this,s,e),n=Gn(this.F),ze(n,"RID",t),ze(n,"CVER",22),this.D&&ze(n,"X-HTTP-Session-Id",this.D),$o(this,n),i&&(this.N?e="headers="+encodeURIComponent(String(uv(i)))+"&"+e:this.o&&ch(n,this.o,i)),ah(this.h,s),this.Ya&&ze(n,"TYPE","init"),this.O?(ze(n,"$req",e),ze(n,"SID","null"),s.Z=!0,Oc(s,n,null)):Oc(s,n,e),this.G=2}}else this.G==3&&(t?Vm(this,t):this.i.length==0||ev(this.h)||Vm(this))};function Vm(t,e){var n;e?n=e.m:n=t.U++;const r=Gn(t.F);ze(r,"SID",t.I),ze(r,"RID",n),ze(r,"AID",t.T),$o(t,r),t.o&&t.s&&ch(r,t.o,t.s),n=new Po(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=hv(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),ah(t.h,n),Oc(n,r,e)}function $o(t,e){t.ia&&Xf(t.ia,function(n,r){ze(e,r,n)}),t.l&&zy({},function(n,r){ze(e,r,n)})}function hv(t,e,n){n=Math.min(t.i.length,n);var r=t.l?Dt(t.l.Ra,t.l,t):null;e:{var s=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let u=0;u<n;u++){let c=s[u].h;const h=s[u].g;if(c-=i,0>c)i=Math.max(0,s[u].h-100),a=!1;else try{fC(h,o,"req"+c+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function dv(t){t.g||t.u||(t.Z=1,Dy(t.Ia,t),t.A=0)}function hh(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Do(Dt(t.Ia,t),gv(t,t.A)),t.A++,!0)}ee.Ia=function(){if(this.u=null,mv(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Do(Dt(this.eb,this),t)}};ee.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Bt(10),Wl(this),mv(this))};function dh(t){t.B!=null&&(_e.clearTimeout(t.B),t.B=null)}function mv(t){t.g=new Po(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=Gn(t.sa);ze(e,"RID","rpc"),ze(e,"SID",t.I),ze(e,"CI",t.L?"0":"1"),ze(e,"AID",t.T),ze(e,"TYPE","xmlhttp"),$o(t,e),t.o&&t.s&&ch(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=jl(Gn(e)),n.s=null,n.P=!0,qy(n,t)}ee.cb=function(){this.v!=null&&(this.v=null,Wl(this),hh(this),Bt(19))};function za(t){t.v!=null&&(_e.clearTimeout(t.v),t.v=null)}function pv(t,e){var n=null;if(t.g==e){za(t),dh(t),t.g=null;var r=2}else if(Lc(t.h,e))n=e.D,nv(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;r=Ul(),At(r,new Vy(r,n)),Gl(t)}else dv(t);else if(s=e.o,s==3||s==0&&0<t.pa||!(r==1&&_C(t,e)||r==2&&hh(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),s){case 1:zr(t,5);break;case 4:zr(t,10);break;case 3:zr(t,6);break;default:zr(t,2)}}}function gv(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function zr(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=Dt(t.kb,t);n||(n=new Zr("//www.google.com/images/cleardot.gif"),_e.location&&_e.location.protocol=="http"||Ga(n,"https"),jl(n)),hC(n.toString(),r)}else Bt(2);t.G=0,t.l&&t.l.va(e),_v(t),fv(t)}ee.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function _v(t){if(t.G=0,t.la=[],t.l){const e=rv(t.h);(e.length!=0||t.i.length!=0)&&(Rm(t.la,e),Rm(t.la,t.i),t.h.i.length=0,zf(t.i),t.i.length=0),t.l.ua()}}function yv(t,e,n){var r=n instanceof Zr?Gn(n):new Zr(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),Ka(r,r.m);else{var s=_e.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Zr(null,void 0);r&&Ga(i,r),e&&(i.g=e),s&&Ka(i,s),n&&(i.l=n),r=i}return n=t.D,e=t.za,n&&e&&ze(r,n,e),ze(r,"VER",t.ma),$o(t,r),r}function vv(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new et(new Fo({jb:!0})):new et(t.ra),e.Ka(t.H),e}function bv(){}ee=bv.prototype;ee.xa=function(){};ee.wa=function(){};ee.va=function(){};ee.ua=function(){};ee.Ra=function(){};function Ya(){if(Ws&&!(10<=Number(xk)))throw Error("Environmental error: no available transport.")}Ya.prototype.g=function(t,e){return new tn(t,e)};function tn(t,e){wt.call(this),this.g=new cv(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Ha(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ha(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new di(this)}kt(tn,wt);tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Bt(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=yv(t,null,t.V),Gl(t)};tn.prototype.close=function(){fh(this.g)};tn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=th(t),t=n);e.i.push(new lC(e.ab++,t)),e.G==3&&Gl(e)};tn.prototype.M=function(){this.g.l=null,delete this.j,fh(this.g),delete this.g,tn.X.M.call(this)};function wv(t){ih.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}kt(wv,ih);function Ev(){oh.call(this),this.status=1}kt(Ev,oh);function di(t){this.g=t}kt(di,bv);di.prototype.xa=function(){At(this.g,"a")};di.prototype.wa=function(t){At(this.g,new wv(t))};di.prototype.va=function(t){At(this.g,new Ev)};di.prototype.ua=function(){At(this.g,"b")};Ya.prototype.createWebChannel=Ya.prototype.g;tn.prototype.send=tn.prototype.u;tn.prototype.open=tn.prototype.m;tn.prototype.close=tn.prototype.close;$l.NO_ERROR=0;$l.TIMEOUT=8;$l.HTTP_ERROR=6;By.COMPLETE="complete";jy.EventType=xo;xo.OPEN="a";xo.CLOSE="b";xo.ERROR="c";xo.MESSAGE="d";wt.prototype.listen=wt.prototype.N;et.prototype.listenOnce=et.prototype.O;et.prototype.getLastError=et.prototype.Oa;et.prototype.getLastErrorCode=et.prototype.Ea;et.prototype.getStatus=et.prototype.aa;et.prototype.getResponseJson=et.prototype.Sa;et.prototype.getResponseText=et.prototype.fa;et.prototype.send=et.prototype.da;et.prototype.setWithCredentials=et.prototype.Ka;var yC=function(){return new Ya},vC=function(){return Ul()},Vu=$l,bC=By,wC=gs,Bm={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},EC=Fo,la=jy,TC=et;const jm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mi="9.16.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Pf("@firebase/firestore");function Hm(){return us.logLevel}function ne(t,...e){if(us.logLevel<=De.DEBUG){const n=e.map(mh);us.debug(`Firestore (${mi}): ${t}`,...n)}}function Kn(t,...e){if(us.logLevel<=De.ERROR){const n=e.map(mh);us.error(`Firestore (${mi}): ${t}`,...n)}}function Dc(t,...e){if(us.logLevel<=De.WARN){const n=e.map(mh);us.warn(`Firestore (${mi}): ${t}`,...n)}}function mh(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t="Unexpected state"){const e=`FIRESTORE (${mi}) INTERNAL ASSERTION FAILED: `+t;throw Kn(e),new Error(e)}function He(t,e){t||me()}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Dn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class AC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class SC{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Vn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He(typeof r.accessToken=="string"),new Tv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new Ct(e)}}class kC{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(He(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class CC{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s}getToken(){return Promise.resolve(new kC(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OC{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=i=>{i.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.A;return this.A=i.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?s(i):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string"),this.A=n.token,new RC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=NC(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function Gs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ht(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ve(e)}static min(){return new ve(new ht(0,0))}static max(){return new ve(new ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n,r){n===void 0?n=0:n>e.length&&me(),r===void 0?r=e.length-n:r>e.length-n&&me(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return co.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof co?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class $e extends co{construct(e,n,r){return new $e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const LC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends co{construct(e,n,r){return new Nt(e,n,r)}static isValidIdentifier(e){return LC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new z(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new z(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new z(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re($e.fromString(e))}static fromName(e){return new re($e.fromString(e).popFirst(5))}static empty(){return new re($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new $e(e.slice()))}}function DC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new Sr(s,re.empty(),e)}function xC(t){return new Sr(t.readTime,t.key,-1)}class Sr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Sr(ve.min(),re.empty(),-1)}static max(){return new Sr(ve.max(),re.empty(),-1)}}function PC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==MC)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Bo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}ph.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n,r,s,i,o,a,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class fo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new fo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof fo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _s(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Av(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t){return t==null}function Xa(t){return t===0&&1/t==-1/0}function $C(t){return typeof t=="number"&&Number.isInteger(t)&&!Xa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Mt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new Mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const VC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(t){if(He(!!t),typeof t=="string"){let e=0;const n=VC.exec(t);if(He(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ks(t){return typeof t=="string"?Mt.fromBase64String(t):Mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Sv(t){const e=t.mapValue.fields.__previous_value__;return gh(e)?Sv(e):e}function ho(t){const e=kr(t.mapValue.fields.__local_write_time__.timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gh(t)?4:BC(t)?9007199254740991:10:me()}function Ln(t,e){if(t===e)return!0;const n=cs(t);if(n!==cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ho(t).isEqual(ho(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=kr(r.timestampValue),o=kr(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Ks(r.bytesValue).isEqual(Ks(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return it(r.geoPointValue.latitude)===it(s.geoPointValue.latitude)&&it(r.geoPointValue.longitude)===it(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return it(r.integerValue)===it(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=it(r.doubleValue),o=it(s.doubleValue);return i===o?Xa(i)===Xa(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Gs(t.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(qm(i)!==qm(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Ln(i[a],o[a])))return!1;return!0}(t,e);default:return me()}}function mo(t,e){return(t.values||[]).find(n=>Ln(n,e))!==void 0}function zs(t,e){if(t===e)return 0;const n=cs(t),r=cs(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=it(s.integerValue||s.doubleValue),a=it(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Wm(t.timestampValue,e.timestampValue);case 4:return Wm(ho(t),ho(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Ks(s),a=Ks(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=xe(o[u],a[u]);if(c!==0)return c}return xe(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=xe(it(s.latitude),it(i.latitude));return o!==0?o:xe(it(s.longitude),it(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=zs(o[u],a[u]);if(c)return c}return xe(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===ua.mapValue&&i===ua.mapValue)return 0;if(s===ua.mapValue)return 1;if(i===ua.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),u=i.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let h=0;h<a.length&&h<c.length;++h){const l=xe(a[h],c[h]);if(l!==0)return l;const f=zs(o[a[h]],u[c[h]]);if(f!==0)return f}return xe(a.length,c.length)}(t.mapValue,e.mapValue);default:throw me()}}function Wm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=kr(t),r=kr(e),s=xe(n.seconds,r.seconds);return s!==0?s:xe(n.nanos,r.nanos)}function Ys(t){return xc(t)}function xc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=kr(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ks(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,re.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=xc(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${xc(r.fields[a])}`;return i+"}"}(t.mapValue):me();var e,n}function Qa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pc(t){return!!t&&"integerValue"in t}function _h(t){return!!t&&"arrayValue"in t}function Gm(t){return!!t&&"nullValue"in t}function Km(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ia(t){return!!t&&"mapValue"in t}function $i(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _s(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$i(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$i(t.arrayValue.values[n]);return e}return Object.assign({},t)}function BC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n){this.position=e,this.inclusive=n}}function zm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=zs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ym(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ln(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{}class at extends kv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new HC(e,n,r):n==="array-contains"?new GC(e,r):n==="in"?new KC(e,r):n==="not-in"?new zC(e,r):n==="array-contains-any"?new YC(e,r):new at(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new qC(e,r):new WC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zs(n,this.value)):n!==null&&cs(this.value)===cs(n)&&this.matchesComparison(zs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class pn extends kv{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new pn(e,n)}matches(e){return Cv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Cv(t){return t.op==="and"}function Rv(t){return jC(t)&&Cv(t)}function jC(t){for(const e of t.filters)if(e instanceof pn)return!1;return!0}function Mc(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+Ys(t.value);if(Rv(t))return t.filters.map(e=>Mc(e)).join(",");{const e=t.filters.map(n=>Mc(n)).join(",");return`${t.op}(${e})`}}function Ov(t,e){return t instanceof at?function(n,r){return r instanceof at&&n.op===r.op&&n.field.isEqual(r.field)&&Ln(n.value,r.value)}(t,e):t instanceof pn?function(n,r){return r instanceof pn&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,i,o)=>s&&Ov(i,r.filters[o]),!0):!1}(t,e):void me()}function Nv(t){return t instanceof at?function(e){return`${e.field.canonicalString()} ${e.op} ${Ys(e.value)}`}(t):t instanceof pn?function(e){return e.op.toString()+" {"+e.getFilters().map(Nv).join(" ,")+"}"}(t):"Filter"}class HC extends at{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class qC extends at{constructor(e,n){super(e,"in",n),this.keys=Lv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class WC extends at{constructor(e,n){super(e,"not-in",n),this.keys=Lv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Lv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class GC extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _h(n)&&mo(n.arrayValue,this.value)}}class KC extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mo(this.value.arrayValue,n)}}class zC extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!mo(this.value.arrayValue,n)}}class YC extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_h(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n="asc"){this.field=e,this.dir=n}}function XC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ca(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ca(this.root,e,this.comparator,!1)}getReverseIterator(){return new ca(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ca(this.root,e,this.comparator,!0)}}class ca{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??It.RED,this.left=s??It.EMPTY,this.right=i??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new It(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return It.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const e=this.left.check();if(e!==this.right.check())throw me();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(t,e,n,r,s){return this}insert(t,e,n){return new It(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xm(this.data.getIterator())}getIteratorFrom(e){return new Xm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class Xm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new Qt([])}unionWith(e){let n=new dt(Nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ia(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$i(n)}setAll(e){let n=Nt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=$i(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ia(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ia(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){_s(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Kt($i(this.value))}}function Dv(t){const e=[];return _s(t.fields,(n,r)=>{const s=new Nt([n]);if(Ia(r)){const i=Dv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Rt(e,0,ve.min(),ve.min(),ve.min(),Kt.empty(),0)}static newFoundDocument(e,n,r,s){return new Rt(e,1,n,ve.min(),r,s,0)}static newNoDocument(e,n){return new Rt(e,2,n,ve.min(),ve.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,ve.min(),ve.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ft=null}}function Qm(t,e=null,n=[],r=[],s=null,i=null,o=null){return new QC(t,e,n,r,s,i,o)}function yh(t){const e=be(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Mc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Kl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ys(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ys(r)).join(",")),e.ft=n}return e.ft}function vh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!XC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ov(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ym(t.startAt,e.startAt)&&Ym(t.endAt,e.endAt)}function Fc(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.dt=null,this._t=null,this.startAt,this.endAt}}function JC(t,e,n,r,s,i,o,a){return new ys(t,e,n,r,s,i,o,a)}function bh(t){return new ys(t)}function Jm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function zl(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Eh(t){return t.collectionGroup!==null}function es(t){const e=be(t);if(e.dt===null){e.dt=[];const n=zl(e),r=wh(e);if(n!==null&&r===null)n.isKeyField()||e.dt.push(new Us(n)),e.dt.push(new Us(Nt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.dt.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Us(Nt.keyField(),i))}}}return e.dt}function zn(t){const e=be(t);if(!e._t)if(e.limitType==="F")e._t=Qm(e.path,e.collectionGroup,es(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of es(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new Us(i.field,o))}const r=e.endAt?new Xs(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Xs(e.startAt.position,e.startAt.inclusive):null;e._t=Qm(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e._t}function Uc(t,e){e.getFirstInequalityField(),zl(t);const n=t.filters.concat([e]);return new ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ja(t,e,n){return new ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yl(t,e){return vh(zn(t),zn(e))&&t.limitType===e.limitType}function xv(t){return`${yh(zn(t))}|lt:${t.limitType}`}function $c(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Nv(r)).join(", ")}]`),Kl(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ys(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ys(r)).join(",")),`Target(${n})`}(zn(t))}; limitType=${t.limitType})`}function Th(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):re.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of es(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=zm(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,es(n),r)||n.endAt&&!function(s,i,o){const a=zm(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,es(n),r))}(t,e)}function ZC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Pv(t){return(e,n)=>{let r=!1;for(const s of es(t)){const i=e1(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function e1(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),u=o.data.field(s);return a!==null&&u!==null?zs(a,u):me()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xa(e)?"-0":e}}function Fv(t){return{integerValue:""+t}}function t1(t,e){return $C(e)?Fv(e):Mv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(){this._=void 0}}function n1(t,e,n){return t instanceof Za?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof po?$v(t,e):t instanceof go?Vv(t,e):function(r,s){const i=Uv(r,s),o=Zm(i)+Zm(r.gt);return Pc(i)&&Pc(r.gt)?Fv(o):Mv(r.yt,o)}(t,e)}function r1(t,e,n){return t instanceof po?$v(t,e):t instanceof go?Vv(t,e):n}function Uv(t,e){return t instanceof el?Pc(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Za extends Xl{}class po extends Xl{constructor(e){super(),this.elements=e}}function $v(t,e){const n=Bv(e);for(const r of t.elements)n.some(s=>Ln(s,r))||n.push(r);return{arrayValue:{values:n}}}class go extends Xl{constructor(e){super(),this.elements=e}}function Vv(t,e){let n=Bv(e);for(const r of t.elements)n=n.filter(s=>!Ln(s,r));return{arrayValue:{values:n}}}class el extends Xl{constructor(e,n){super(),this.yt=e,this.gt=n}}function Zm(t){return it(t.integerValue||t.doubleValue)}function Bv(t){return _h(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function s1(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof po&&r instanceof po||n instanceof go&&r instanceof go?Gs(n.elements,r.elements,Ln):n instanceof el&&r instanceof el?Ln(n.gt,r.gt):n instanceof Za&&r instanceof Za}(t.transform,e.transform)}class i1{constructor(e,n){this.version=e,this.transformResults=n}}class an{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Aa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ql{}function jv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ih(t.key,an.none()):new jo(t.key,t.data,an.none());{const n=t.data,r=Kt.empty();let s=new dt(Nt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Lr(t.key,r,new Qt(s.toArray()),an.none())}}function o1(t,e,n){t instanceof jo?function(r,s,i){const o=r.value.clone(),a=tp(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Lr?function(r,s,i){if(!Aa(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=tp(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(Hv(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Vi(t,e,n,r){return t instanceof jo?function(s,i,o,a){if(!Aa(s.precondition,i))return o;const u=s.value.clone(),c=np(s.fieldTransforms,a,i);return u.setAll(c),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Lr?function(s,i,o,a){if(!Aa(s.precondition,i))return o;const u=np(s.fieldTransforms,a,i),c=i.data;return c.setAll(Hv(s)),c.setAll(u),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,i,o){return Aa(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function a1(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Uv(r.transform,s||null);i!=null&&(n===null&&(n=Kt.empty()),n.set(r.field,i))}return n||null}function ep(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Gs(n,r,(s,i)=>s1(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jo extends Ql{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Lr extends Ql{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Hv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tp(t,e,n){const r=new Map;He(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,r1(o,a,n[s]))}return r}function np(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,n1(i,o,e))}return r}class Ih extends Ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l1 extends Ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Ce;function c1(t){switch(t){default:return me();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function qv(t){if(t===void 0)return Kn("GRPC error has no .code"),U.UNKNOWN;switch(t){case st.OK:return U.OK;case st.CANCELLED:return U.CANCELLED;case st.UNKNOWN:return U.UNKNOWN;case st.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case st.INTERNAL:return U.INTERNAL;case st.UNAVAILABLE:return U.UNAVAILABLE;case st.UNAUTHENTICATED:return U.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case st.NOT_FOUND:return U.NOT_FOUND;case st.ALREADY_EXISTS:return U.ALREADY_EXISTS;case st.PERMISSION_DENIED:return U.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case st.ABORTED:return U.ABORTED;case st.OUT_OF_RANGE:return U.OUT_OF_RANGE;case st.UNIMPLEMENTED:return U.UNIMPLEMENTED;case st.DATA_LOSS:return U.DATA_LOSS;default:return me()}}(Ce=st||(st={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Av(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new pt(re.comparator);function Yn(){return f1}const Wv=new pt(re.comparator);function Li(...t){let e=Wv;for(const n of t)e=e.insert(n.key,n);return e}function Gv(t){let e=Wv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yr(){return Bi()}function Kv(){return Bi()}function Bi(){return new pi(t=>t.toString(),(t,e)=>t.isEqual(e))}const h1=new pt(re.comparator),d1=new dt(re.comparator);function Ae(...t){let e=d1;for(const n of t)e=e.add(n);return e}const m1=new dt(xe);function zv(){return m1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ho.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Jl(ve.min(),s,zv(),Yn(),Ae())}}class Ho{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ho(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n,r,s){this.It=e,this.removedTargetIds=n,this.key=r,this.Tt=s}}class Yv{constructor(e,n){this.targetId=e,this.Et=n}}class Xv{constructor(e,n,r=Mt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class rp{constructor(){this.At=0,this.Rt=ip(),this.bt=Mt.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Ae(),n=Ae(),r=Ae();return this.Rt.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:me()}}),new Ho(this.bt,this.Pt,e,n,r)}xt(){this.vt=!1,this.Rt=ip()}Nt(e,n){this.vt=!0,this.Rt=this.Rt.insert(e,n)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class p1{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Yn(),this.qt=sp(),this.Ut=new dt(xe)}Kt(e){for(const n of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(n,e.Tt):this.Qt(n,e.key,e.Tt);for(const n of e.removedTargetIds)this.Qt(n,e.key,e.Tt)}jt(e){this.forEachTarget(e,n=>{const r=this.Wt(n);switch(e.state){case 0:this.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(n);break;case 3:this.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(n)&&(this.Ht(n),r.Dt(e.resumeToken));break;default:me()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Bt.forEach((r,s)=>{this.zt(s)&&n(s)})}Jt(e){const n=e.targetId,r=e.Et.count,s=this.Yt(n);if(s){const i=s.target;if(Fc(i))if(r===0){const o=new re(i.path);this.Qt(n,o,Rt.newNoDocument(o,ve.min()))}else He(r===1);else this.Xt(n)!==r&&(this.Ht(n),this.Ut=this.Ut.add(n))}}Zt(e){const n=new Map;this.Bt.forEach((i,o)=>{const a=this.Yt(o);if(a){if(i.current&&Fc(a.target)){const u=new re(a.target.path);this.Lt.get(u)!==null||this.te(o,u)||this.Qt(o,u,Rt.newNoDocument(u,e))}i.St&&(n.set(o,i.Ct()),i.xt())}});let r=Ae();this.qt.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Yt(u);return!c||c.purpose===2||(a=!1,!1)}),a&&(r=r.add(i))}),this.Lt.forEach((i,o)=>o.setReadTime(e));const s=new Jl(e,n,this.Ut,this.Lt,r);return this.Lt=Yn(),this.qt=sp(),this.Ut=new dt(xe),s}Gt(e,n){if(!this.zt(e))return;const r=this.te(e,n.key)?2:0;this.Wt(e).Nt(n.key,r),this.Lt=this.Lt.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ee(n.key).add(e))}Qt(e,n,r){if(!this.zt(e))return;const s=this.Wt(e);this.te(e,n)?s.Nt(n,1):s.kt(n),this.qt=this.qt.insert(n,this.ee(n).delete(e)),r&&(this.Lt=this.Lt.insert(n,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const n=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let n=this.Bt.get(e);return n||(n=new rp,this.Bt.set(e,n)),n}ee(e){let n=this.qt.get(e);return n||(n=new dt(xe),this.qt=this.qt.insert(e,n)),n}zt(e){const n=this.Yt(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Yt(e){const n=this.Bt.get(e);return n&&n.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new rp),this.$t.getRemoteKeysForTarget(e).forEach(n=>{this.Qt(e,n,null)})}te(e,n){return this.$t.getRemoteKeysForTarget(e).has(n)}}function sp(){return new pt(re.comparator)}function ip(){return new pt(re.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),_1=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),y1=(()=>({and:"AND",or:"OR"}))();class v1{constructor(e,n){this.databaseId=e,this.wt=n}}function tl(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qv(t,e){return t.wt?e.toBase64():e.toUint8Array()}function b1(t,e){return tl(t,e.toTimestamp())}function On(t){return He(!!t),ve.fromTimestamp(function(e){const n=kr(e);return new ht(n.seconds,n.nanos)}(t))}function Ah(t,e){return function(n){return new $e(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Jv(t){const e=$e.fromString(t);return He(nb(e)),e}function Vc(t,e){return Ah(t.databaseId,e.path)}function Bu(t,e){const n=Jv(e);if(n.get(1)!==t.databaseId.projectId)throw new z(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(Zv(n))}function Bc(t,e){return Ah(t.databaseId,e)}function w1(t){const e=Jv(t);return e.length===4?$e.emptyPath():Zv(e)}function jc(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Zv(t){return He(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function op(t,e,n){return{name:Vc(t,e),fields:n.value.mapValue.fields}}function E1(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:me()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,c){return u.wt?(He(c===void 0||typeof c=="string"),Mt.fromBase64String(c||"")):(He(c===void 0||c instanceof Uint8Array),Mt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?U.UNKNOWN:qv(u.code);return new z(c,u.message||"")}(o);n=new Xv(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Bu(t,r.document.name),i=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):ve.min(),a=new Kt({mapValue:{fields:r.document.fields}}),u=Rt.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Sa(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Bu(t,r.document),i=r.readTime?On(r.readTime):ve.min(),o=Rt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Sa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Bu(t,r.document),i=r.removedTargetIds||[];n=new Sa([],i,s,null)}else{if(!("filter"in e))return me();{e.filter;const r=e.filter;r.targetId;const s=r.count||0,i=new u1(s),o=r.targetId;n=new Yv(o,i)}}return n}function T1(t,e){let n;if(e instanceof jo)n={update:op(t,e.key,e.value)};else if(e instanceof Ih)n={delete:Vc(t,e.key)};else if(e instanceof Lr)n={update:op(t,e.key,e.data),updateMask:L1(e.fieldMask)};else{if(!(e instanceof l1))return me();n={verify:Vc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof Za)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof po)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof go)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof el)return{fieldPath:i.field.canonicalString(),increment:o.gt};throw me()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:b1(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:me()}(t,e.precondition)),n}function I1(t,e){return t&&t.length>0?(He(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?On(r.updateTime):On(s);return i.isEqual(ve.min())&&(i=On(s)),new i1(i,r.transformResults||[])}(n,e))):[]}function A1(t,e){return{documents:[Bc(t,e.path)]}}function S1(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Bc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Bc(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(u){if(u.length!==0)return tb(pn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(c=>function(h){return{field:As(h.field),direction:R1(h.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(u,c){return u.wt||Kl(c)?c:{value:c}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function k1(t){let e=w1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){He(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(h){const l=eb(h);return l instanceof pn&&Rv(l)?l.getFilters():[l]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(h=>function(l){return new Us(Ss(l.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(l.direction))}(h)));let a=null;n.limit&&(a=function(h){let l;return l=typeof h=="object"?h.value:h,Kl(l)?null:l}(n.limit));let u=null;n.startAt&&(u=function(h){const l=!!h.before,f=h.values||[];return new Xs(f,l)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const l=!h.before,f=h.values||[];return new Xs(f,l)}(n.endAt)),JC(e,s,o,i,a,"F",u,c)}function C1(t,e){const n=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return me()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function eb(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ss(e.unaryFilter.field);return at.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Ss(e.unaryFilter.field);return at.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ss(e.unaryFilter.field);return at.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ss(e.unaryFilter.field);return at.create(i,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(t):t.fieldFilter!==void 0?function(e){return at.create(Ss(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return pn.create(e.compositeFilter.filters.map(n=>eb(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return me()}}(e.compositeFilter.op))}(t):me()}function R1(t){return g1[t]}function O1(t){return _1[t]}function N1(t){return y1[t]}function As(t){return{fieldPath:t.canonicalString()}}function Ss(t){return Nt.fromServerFormat(t.fieldPath)}function tb(t){return t instanceof at?function(e){if(e.op==="=="){if(Km(e.value))return{unaryFilter:{field:As(e.field),op:"IS_NAN"}};if(Gm(e.value))return{unaryFilter:{field:As(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Km(e.value))return{unaryFilter:{field:As(e.field),op:"IS_NOT_NAN"}};if(Gm(e.value))return{unaryFilter:{field:As(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(e.field),op:O1(e.op),value:e.value}}}(t):t instanceof pn?function(e){const n=e.getFilters().map(r=>tb(r));return n.length===1?n[0]:{compositeFilter:{op:N1(e.op),filters:n}}}(t):me()}function L1(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function nb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&o1(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Kv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=jv(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Gs(this.mutations,e.mutations,(n,r)=>ep(n,r))&&Gs(this.baseMutations,e.baseMutations,(n,r)=>ep(n,r))}}class Sh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){He(e.mutations.length===r.length);let s=h1;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Sh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r,s,i=ve.min(),o=ve.min(),a=Mt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.ie=e}}function M1(t){const e=k1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ja(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.Je=new U1}addToCollectionParentIndex(e,n){return this.Je.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Je.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Sr.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Sr.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class U1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new dt($e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new dt($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Qs(0)}static vn(){return new Qs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.changes=new pi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Vi(r.mutation,s,Qt.empty(),ht.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const s=Yr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Li();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Yn();const o=Bi(),a=Bi();return n.forEach((u,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Lr)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Vi(h.mutation,c,h.mutation.getFieldMask(),ht.now())):o.set(c.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var l;return a.set(c,new V1(h,(l=o.get(c))!==null&&l!==void 0?l:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Bi();let s=new pt((o,a)=>o-a),i=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Qt.empty();h=a.applyToLocalView(c,h),r.set(u,h);const l=(s.get(a.batchId)||Ae()).add(u);s=s.insert(a.batchId,l)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,l=Kv();h.forEach(f=>{if(!i.has(f)){const d=jv(n.get(f),r.get(f));d!==null&&l.set(f,d),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,l))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return re.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Eh(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(Yr());let a=-1,u=i;return o.next(c=>G.forEach(c,(h,l)=>(a<l.largestBatchId&&(a=l.largestBatchId),i.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{u=u.insert(h,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,Ae())).next(h=>({batchId:a,changes:Gv(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let s=Li();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Li();return this.indexManager.getCollectionParents(e,s).next(o=>G.forEach(o,a=>{const u=function(c,h){return new ys(h,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((h,l)=>{i=i.insert(h,l)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(i=>(s=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(i=>{i.forEach((a,u)=>{const c=u.getKey();s.get(c)===null&&(s=s.insert(c,Rt.newInvalidDocument(c)))});let o=Li();return s.forEach((a,u)=>{const c=i.get(a);c!==void 0&&Vi(c.mutation,u,Qt.empty(),ht.now()),Th(n,u)&&(o=o.insert(a,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return G.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var r;return this.Zn.set(n.id,{id:(r=n).id,version:r.version,createTime:On(r.createTime)}),G.resolve()}getNamedQuery(e,n){return G.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(r){return{name:r.name,query:M1(r.bundledQuery),readTime:On(r.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.overlays=new pt(re.comparator),this.es=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yr();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.oe(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.es.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.es.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=Yr(),i=n.length+1,o=new re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new pt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Yr(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Yr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return G.resolve(a)}oe(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new x1(n,r));let i=this.es.get(n);i===void 0&&(i=Ae(),this.es.set(n,i)),this.es.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this.ns=new dt(gt.ss),this.rs=new dt(gt.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const r=new gt(e,n);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.cs(new gt(e,n))}hs(e,n){e.forEach(r=>this.removeReference(r,n))}ls(e){const n=new re(new $e([])),r=new gt(n,e),s=new gt(n,e+1),i=[];return this.rs.forEachInRange([r,s],o=>{this.cs(o),i.push(o.key)}),i}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new re(new $e([])),r=new gt(n,e),s=new gt(n,e+1);let i=Ae();return this.rs.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new gt(e,0),r=this.ns.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gt{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return re.comparator(e.key,n.key)||xe(e._s,n._s)}static os(e,n){return xe(e._s,n._s)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new dt(gt.ss)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new D1(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.gs=this.gs.add(new gt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ps(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gt(n,0),s=new gt(n,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([r,s],o=>{const a=this.ys(o._s);i.push(a)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(xe);return n.forEach(s=>{const i=new gt(s,0),o=new gt(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([i,o],a=>{r=r.add(a._s)})}),G.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;re.isDocumentKey(i)||(i=i.child(""));const o=new gt(new re(i),0);let a=new dt(xe);return this.gs.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u._s)),!0)},o),G.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(r=>{const s=this.ys(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){He(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.gs;return G.forEach(n.mutations,s=>{const i=new gt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,n){const r=new gt(n,0),s=this.gs.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.Es=e,this.docs=new pt(re.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Es(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Rt.newInvalidDocument(s))}),G.resolve(r)}getAllFromCollection(e,n,r){let s=Yn();const i=new re(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:u}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||PC(xC(u),r)<=0||(s=s.insert(u.key,u.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,n,r,s){me()}As(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new G1(this)}getSize(e){return G.resolve(this.size)}}class G1 extends $1{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.persistence=e,this.Rs=new pi(n=>yh(n),vh),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.bs=0,this.Ps=new kh,this.targetCount=0,this.vs=Qs.Pn()}forEachTarget(e,n){return this.Rs.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),G.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new Qs(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Dn(n),G.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Rs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.Rs.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.Ps.us(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.Ps.hs(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ps.ds(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new ph(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new K1(this),this.indexManager=new F1,this.remoteDocumentCache=function(r){return new W1(r)}(r=>this.referenceDelegate.xs(r)),this.yt=new P1(n),this.Ns=new j1(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new H1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Vs[e.toKey()];return r||(r=new q1(n,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const s=new Y1(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(i=>this.referenceDelegate.Os(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ms(e,n){return G.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,n)))}}class Y1 extends FC{constructor(e){super(),this.currentSequenceNumber=e}}class Ch{constructor(e){this.persistence=e,this.Fs=new kh,this.$s=null}static Bs(e){return new Ch(e)}get Ls(){if(this.$s)return this.$s;throw me()}addReference(e,n,r){return this.Fs.addReference(r,n),this.Ls.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Fs.removeReference(r,n),this.Ls.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),G.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Ls.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Ls,r=>{const s=re.fromPath(r);return this.qs(e,s).next(i=>{i||n.removeEntry(s,ve.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.qs(e,n).next(r=>{r?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}qs(e,n){return G.or([()=>G.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Si=r,this.Di=s}static Ci(e,n){let r=Ae(),s=Ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Rh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.ki(e,n).next(i=>i||this.Oi(e,n,s,r)).next(i=>i||this.Mi(e,n))}ki(e,n){if(Jm(n))return G.resolve(null);let r=zn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ja(n,null,"F"),r=zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ae(...i);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Fi(n,a);return this.$i(n,c,o,u.readTime)?this.ki(e,Ja(n,null,"F")):this.Bi(e,c,n,u)}))})))}Oi(e,n,r,s){return Jm(n)||s.isEqual(ve.min())?this.Mi(e,n):this.Ni.getDocuments(e,r).next(i=>{const o=this.Fi(n,i);return this.$i(n,o,r,s)?this.Mi(e,n):(Hm()<=De.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$c(n)),this.Bi(e,o,n,DC(s,-1)))})}Fi(e,n){let r=new dt(Pv(e));return n.forEach((s,i)=>{Th(e,i)&&(r=r.add(i))}),r}$i(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Mi(e,n){return Hm()<=De.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",$c(n)),this.Ni.getDocumentsMatchingQuery(e,n,Sr.min())}Bi(e,n,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n,r,s){this.persistence=e,this.Li=n,this.yt=s,this.qi=new pt(xe),this.Ui=new pi(i=>yh(i),vh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B1(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.qi))}}function J1(t,e,n,r){return new Q1(t,e,n,r)}async function rb(t,e){const n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Qi(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=Ae();for(const c of s){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:a}))})})}function Z1(t,e){const n=be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const h=u.batch,l=h.keys();let f=G.resolve();return l.forEach(d=>{f=f.next(()=>c.getEntry(a,d)).next(g=>{const y=u.docVersions.get(d);He(y!==null),g.version.compareTo(y)<0&&(h.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),c.addEntry(g)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Ae();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function sb(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function eR(t,e){const n=be(t),r=e.snapshotVersion;let s=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});s=n.qi;const a=[];e.targetChanges.forEach((h,l)=>{const f=s.get(l);if(!f)return;a.push(n.Cs.removeMatchingKeys(i,h.removedDocuments,l).next(()=>n.Cs.addMatchingKeys(i,h.addedDocuments,l)));let d=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(l)?d=d.withResumeToken(Mt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):h.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(h.resumeToken,r)),s=s.insert(l,d),function(g,y,v){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,d,h)&&a.push(n.Cs.updateTargetData(i,d))});let u=Yn(),c=Ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(tR(i,o,e.documentUpdates).next(h=>{u=h.Wi,c=h.zi})),!r.isEqual(ve.min())){const h=n.Cs.getLastRemoteSnapshotVersion(i).next(l=>n.Cs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return G.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.qi=s,i))}function tR(t,e,n){let r=Ae(),s=Ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Yn();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(ve.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Wi:o,zi:s}})}function nR(t,e){const n=be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rR(t,e){const n=be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Cs.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.Cs.allocateTargetId(r).next(o=>(s=new ts(e,o,0,r.currentSequenceNumber),n.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.qi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.qi=n.qi.insert(r.targetId,r),n.Ui.set(e,r.targetId)),r})}async function Hc(t,e,n){const r=be(t),s=r.qi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Bo(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.qi=r.qi.remove(e),r.Ui.delete(s.target)}function ap(t,e,n){const r=be(t);let s=ve.min(),i=Ae();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,c){const h=be(a),l=h.Ui.get(c);return l!==void 0?G.resolve(h.qi.get(l)):h.Cs.getTargetData(u,c)}(r,o,zn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,n?s:ve.min(),n?i:Ae())).next(a=>(sR(r,ZC(e),a),{documents:a,Hi:i})))}function sR(t,e,n){let r=t.Ki.get(e)||ve.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ki.set(e,r)}class lp{constructor(){this.activeTargetIds=zv()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iR{constructor(){this.Lr=new lp,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,n,r){this.qr[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new lp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{Ur(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,r,s,i){const o=this.ho(e,n);ne("RestConnection","Sending: ",o,r);const a={};return this.lo(a,s,i),this.fo(e,o,a,r).then(u=>(ne("RestConnection","Received: ",u),u),u=>{throw Dc("RestConnection",`${e} failed with error: `,u,"url: ",o,"request:",r),u})}_o(e,n,r,s,i,o){return this.ao(e,n,r,s,i)}lo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+mi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}ho(e,n){const r=aR[e];return`${this.oo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,r,s){return new Promise((i,o)=>{const a=new TC;a.setWithCredentials(!0),a.listenOnce(bC.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Vu.NO_ERROR:const c=a.getResponseJson();ne("Connection","XHR received:",JSON.stringify(c)),i(c);break;case Vu.TIMEOUT:ne("Connection",'RPC "'+e+'" timed out'),o(new z(U.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:const h=a.getStatus();if(ne("Connection",'RPC "'+e+'" failed with status:',h,"response text:",a.getResponseText()),h>0){let l=a.getResponseJson();Array.isArray(l)&&(l=l[0]);const f=l==null?void 0:l.error;if(f&&f.status&&f.message){const d=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(y)>=0?y:U.UNKNOWN}(f.status);o(new z(d,f.message))}else o(new z(U.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new z(U.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{ne("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(s);a.send(n,"POST",u,r,15)})}wo(e,n,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=yC(),o=vC(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new EC({})),this.lo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const u=s.join("");ne("Connection","Creating WebChannel: "+u,a);const c=i.createWebChannel(u,a);let h=!1,l=!1;const f=new lR({Hr:g=>{l?ne("Connection","Not sending because WebChannel is closed:",g):(h||(ne("Connection","Opening WebChannel transport."),c.open(),h=!0),ne("Connection","WebChannel sending:",g),c.send(g))},Jr:()=>c.close()}),d=(g,y,v)=>{g.listen(y,p=>{try{v(p)}catch(E){setTimeout(()=>{throw E},0)}})};return d(c,la.EventType.OPEN,()=>{l||ne("Connection","WebChannel transport opened.")}),d(c,la.EventType.CLOSE,()=>{l||(l=!0,ne("Connection","WebChannel transport closed"),f.io())}),d(c,la.EventType.ERROR,g=>{l||(l=!0,Dc("Connection","WebChannel transport errored:",g),f.io(new z(U.UNAVAILABLE,"The operation could not be completed")))}),d(c,la.EventType.MESSAGE,g=>{var y;if(!l){const v=g.data[0];He(!!v);const p=v,E=p.error||((y=p[0])===null||y===void 0?void 0:y.error);if(E){ne("Connection","WebChannel received error:",E);const T=E.status;let w=function(N){const L=st[N];if(L!==void 0)return qv(L)}(T),S=E.message;w===void 0&&(w=U.INTERNAL,S="Unknown error status: "+T+" with message "+E.message),l=!0,f.io(new z(w,S)),c.close()}else ne("Connection","WebChannel received:",v),f.ro(v)}}),d(o,wC.STAT_EVENT,g=>{g.stat===Bm.PROXY?ne("Connection","Detected buffering proxy"):g.stat===Bm.NOPROXY&&ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{f.so()},0),f}}function ju(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){return new v1(t,!0)}class ib{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Hs=e,this.timerId=n,this.mo=r,this.yo=s,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,n-r);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n,r,s,i,o,a,u){this.Hs=e,this.vo=r,this.Vo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new ib(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Kn(n.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===n&&this.Go(r,s)},r=>{e(()=>{const s=new z(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,n){const r=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cR extends ob{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.yt=i}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=E1(this.yt,e),r=function(s){if(!("targetChange"in s))return ve.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?ve.min():i.readTime?On(i.readTime):ve.min()}(e);return this.listener.Wo(n,r)}zo(e){const n={};n.database=jc(this.yt),n.addTarget=function(s,i){let o;const a=i.target;return o=Fc(a)?{documents:A1(s,a)}:{query:S1(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=Qv(s,i.resumeToken):i.snapshotVersion.compareTo(ve.min())>0&&(o.readTime=tl(s,i.snapshotVersion.toTimestamp())),o}(this.yt,e);const r=C1(this.yt,e);r&&(n.labels=r),this.Bo(n)}Ho(e){const n={};n.database=jc(this.yt),n.removeTarget=e,this.Bo(n)}}class fR extends ob{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.yt=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=I1(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.Zo(r,n)}return He(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=jc(this.yt),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>T1(this.yt,r))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.yt=s,this.nu=!1}su(){if(this.nu)throw new z(U.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.ao(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(U.UNKNOWN,s.toString())})}_o(e,n,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection._o(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new z(U.UNKNOWN,i.toString())})}terminate(){this.nu=!0}}class dR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Kn(n),this.ou=!1):ne("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.Ur(o=>{r.enqueueAndForget(async()=>{vs(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(a){const u=be(a);u._u.add(4),await qo(u),u.gu.set("Unknown"),u._u.delete(4),await eu(u)}(this))})}),this.gu=new dR(r,s)}}async function eu(t){if(vs(t))for(const e of t.wu)await e(!0)}async function qo(t){for(const e of t.wu)await e(!1)}function ab(t,e){const n=be(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Lh(n)?Nh(n):gi(n).ko()&&Oh(n,e))}function lb(t,e){const n=be(t),r=gi(n);n.du.delete(e),r.ko()&&ub(n,e),n.du.size===0&&(r.ko()?r.Fo():vs(n)&&n.gu.set("Unknown"))}function Oh(t,e){t.yu.Ot(e.targetId),gi(t).zo(e)}function ub(t,e){t.yu.Ot(e),gi(t).Ho(e)}function Nh(t){t.yu=new p1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),gi(t).start(),t.gu.uu()}function Lh(t){return vs(t)&&!gi(t).No()&&t.du.size>0}function vs(t){return be(t)._u.size===0}function cb(t){t.yu=void 0}async function pR(t){t.du.forEach((e,n)=>{Oh(t,e)})}async function gR(t,e){cb(t),Lh(t)?(t.gu.hu(e),Nh(t)):t.gu.set("Unknown")}async function _R(t,e,n){if(t.gu.set("Online"),e instanceof Xv&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.du.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.du.delete(o),r.yu.removeTarget(o))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nl(t,r)}else if(e instanceof Sa?t.yu.Kt(e):e instanceof Yv?t.yu.Jt(e):t.yu.jt(e),!n.isEqual(ve.min()))try{const r=await sb(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.yu.Zt(i);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=s.du.get(u);c&&s.du.set(u,c.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const u=s.du.get(a);if(!u)return;s.du.set(a,u.withResumeToken(Mt.EMPTY_BYTE_STRING,u.snapshotVersion)),ub(s,a);const c=new ts(u.target,a,1,u.sequenceNumber);Oh(s,c)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await nl(t,r)}}async function nl(t,e,n){if(!Bo(e))throw e;t._u.add(1),await qo(t),t.gu.set("Offline"),n||(n=()=>sb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await eu(t)})}function fb(t,e){return e().catch(n=>nl(t,n,e))}async function tu(t){const e=be(t),n=Cr(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;yR(e);)try{const s=await nR(e.localStore,r);if(s===null){e.fu.length===0&&n.Fo();break}r=s.batchId,vR(e,s)}catch(s){await nl(e,s)}hb(e)&&db(e)}function yR(t){return vs(t)&&t.fu.length<10}function vR(t,e){t.fu.push(e);const n=Cr(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function hb(t){return vs(t)&&!Cr(t).No()&&t.fu.length>0}function db(t){Cr(t).start()}async function bR(t){Cr(t).eu()}async function wR(t){const e=Cr(t);for(const n of t.fu)e.Xo(n.mutations)}async function ER(t,e,n){const r=t.fu.shift(),s=Sh.from(r,e,n);await fb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await tu(t)}async function TR(t,e){e&&Cr(t).Yo&&await async function(n,r){if(s=r.code,c1(s)&&s!==U.ABORTED){const i=n.fu.shift();Cr(n).Mo(),await fb(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await tu(n)}var s}(t,e),hb(t)&&db(t)}async function cp(t,e){const n=be(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=vs(n);n._u.add(3),await qo(n),r&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await eu(n)}async function IR(t,e){const n=be(t);e?(n._u.delete(2),await eu(n)):e||(n._u.add(2),await qo(n),n.gu.set("Unknown"))}function gi(t){return t.pu||(t.pu=function(e,n,r){const s=be(e);return s.su(),new cR(n,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(t.datastore,t.asyncQueue,{Yr:pR.bind(null,t),Zr:gR.bind(null,t),Wo:_R.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),Lh(t)?Nh(t):t.gu.set("Unknown")):(await t.pu.stop(),cb(t))})),t.pu}function Cr(t){return t.Iu||(t.Iu=function(e,n,r){const s=be(e);return s.su(),new fR(n,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(t.datastore,t.asyncQueue,{Yr:bR.bind(null,t),Zr:TR.bind(null,t),tu:wR.bind(null,t),Zo:ER.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await tu(t)):(await t.Iu.stop(),t.fu.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Dh(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xh(t,e){if(Kn("AsyncQueue",`${e}: ${t}`),Bo(t))return new z(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=Li(),this.sortedSet=new pt(this.comparator)}static emptySet(e){return new $s(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $s)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $s;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this.Tu=new pt(re.comparator)}track(e){const n=e.doc.key,r=this.Tu.get(n);r?e.type!==0&&r.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&r.type!==1?this.Tu=this.Tu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Tu=this.Tu.remove(n):e.type===1&&r.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):me():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Js{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Js(e,n,$s.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.Au=void 0,this.listeners=[]}}class SR{constructor(){this.queries=new pi(e=>xv(e),Yl),this.onlineState="Unknown",this.Ru=new Set}}async function mb(t,e){const n=be(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new AR),s)try{i.Au=await n.onListen(r)}catch(o){const a=xh(o,`Initialization of query '${$c(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.bu(n.onlineState),i.Au&&e.Pu(i.Au)&&Ph(n)}async function pb(t,e){const n=be(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function kR(t,e){const n=be(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Pu(s)&&(r=!0);o.Au=s}}r&&Ph(n)}function CR(t,e,n){const r=be(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function Ph(t){t.Ru.forEach(e=>{e.next()})}class gb{constructor(e,n,r){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Js(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Nu||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=Js.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.key=e}}class yb{constructor(e){this.key=e}}class RR{constructor(e,n){this.query=e,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ae(),this.mutatedKeys=Ae(),this.Gu=Pv(e),this.Qu=new $s(this.Gu)}get ju(){return this.qu}Wu(e,n){const r=n?n.zu:new fp,s=n?n.Qu:this.Qu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,l)=>{const f=s.get(h),d=Th(this.query,l)?l:null,g=!!f&&this.mutatedKeys.has(f.key),y=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let v=!1;f&&d?f.data.isEqual(d.data)?g!==y&&(r.track({type:3,doc:d}),v=!0):this.Hu(f,d)||(r.track({type:2,doc:d}),v=!0,(u&&this.Gu(d,u)>0||c&&this.Gu(d,c)<0)&&(a=!0)):!f&&d?(r.track({type:0,doc:d}),v=!0):f&&!d&&(r.track({type:1,doc:f}),v=!0,(u||c)&&(a=!0)),v&&(d?(o=o.add(d),i=y?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Qu:o,zu:r,$i:a,mutatedKeys:i}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Eu();i.sort((c,h)=>function(l,f){const d=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return d(l)-d(f)}(c.type,h.type)||this.Gu(c.doc,h.doc)),this.Ju(r);const o=n?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,u=a!==this.Uu;return this.Uu=a,i.length!==0||u?{snapshot:new Js(this.query,e.Qu,s,i,e.mutatedKeys,a===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new fp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.qu=this.qu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qu=this.qu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ae(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const n=[];return e.forEach(r=>{this.Ku.has(r)||n.push(new yb(r))}),this.Ku.forEach(r=>{e.has(r)||n.push(new _b(r))}),n}tc(e){this.qu=e.Hi,this.Ku=Ae();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return Js.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}}class OR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class NR{constructor(e){this.key=e,this.nc=!1}}class LR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new pi(a=>xv(a),Yl),this.rc=new Map,this.oc=new Set,this.uc=new pt(re.comparator),this.cc=new Map,this.ac=new kh,this.hc={},this.lc=new Map,this.fc=Qs.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function DR(t,e){const n=HR(t);let r,s;const i=n.ic.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.ec();else{const o=await rR(n.localStore,zn(e));n.isPrimaryClient&&ab(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await xR(n,e,r,a==="current",o.resumeToken)}return s}async function xR(t,e,n,r,s){t._c=(l,f,d)=>async function(g,y,v,p){let E=y.view.Wu(v);E.$i&&(E=await ap(g.localStore,y.query,!1).then(({documents:S})=>y.view.Wu(S,E)));const T=p&&p.targetChanges.get(y.targetId),w=y.view.applyChanges(E,g.isPrimaryClient,T);return dp(g,y.targetId,w.Xu),w.snapshot}(t,l,f,d);const i=await ap(t.localStore,e,!0),o=new RR(e,i.Hi),a=o.Wu(i.documents),u=Ho.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);dp(t,n,c.Xu);const h=new OR(e,n,o);return t.ic.set(e,h),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),c.snapshot}async function PR(t,e){const n=be(t),r=n.ic.get(e),s=n.rc.get(r.targetId);if(s.length>1)return n.rc.set(r.targetId,s.filter(i=>!Yl(i,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Hc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),lb(n.remoteStore,r.targetId),qc(n,r.targetId)}).catch(Vo)):(qc(n,r.targetId),await Hc(n.localStore,r.targetId,!0))}async function MR(t,e,n){const r=qR(t);try{const s=await function(i,o){const a=be(i),u=ht.now(),c=o.reduce((f,d)=>f.add(d.key),Ae());let h,l;return a.persistence.runTransaction("Locally write mutations","readwrite",f=>{let d=Yn(),g=Ae();return a.Gi.getEntries(f,c).next(y=>{d=y,d.forEach((v,p)=>{p.isValidDocument()||(g=g.add(v))})}).next(()=>a.localDocuments.getOverlayedDocuments(f,d)).next(y=>{h=y;const v=[];for(const p of o){const E=a1(p,h.get(p.key).overlayedDocument);E!=null&&v.push(new Lr(p.key,E,Dv(E.value.mapValue),an.exists(!0)))}return a.mutationQueue.addMutationBatch(f,u,v,o)}).next(y=>{l=y;const v=y.applyToLocalDocumentSet(h,g);return a.documentOverlayCache.saveOverlays(f,y.batchId,v)})}).then(()=>({batchId:l.batchId,changes:Gv(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let u=i.hc[i.currentUser.toKey()];u||(u=new pt(xe)),u=u.insert(o,a),i.hc[i.currentUser.toKey()]=u}(r,s.batchId,n),await Wo(r,s.changes),await tu(r.remoteStore)}catch(s){const i=xh(s,"Failed to persist write");n.reject(i)}}async function vb(t,e){const n=be(t);try{const r=await eR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.cc.get(i);o&&(He(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.nc=!0:s.modifiedDocuments.size>0?He(o.nc):s.removedDocuments.size>0&&(He(o.nc),o.nc=!1))}),await Wo(n,r,e)}catch(r){await Vo(r)}}function hp(t,e,n){const r=be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ic.forEach((i,o)=>{const a=o.view.bu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=be(i);a.onlineState=o;let u=!1;a.queries.forEach((c,h)=>{for(const l of h.listeners)l.bu(o)&&(u=!0)}),u&&Ph(a)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FR(t,e,n){const r=be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.cc.get(e),i=s&&s.key;if(i){let o=new pt(re.comparator);o=o.insert(i,Rt.newNoDocument(i,ve.min()));const a=Ae().add(i),u=new Jl(ve.min(),new Map,new dt(xe),o,a);await vb(r,u),r.uc=r.uc.remove(i),r.cc.delete(e),Mh(r)}else await Hc(r.localStore,e,!1).then(()=>qc(r,e,n)).catch(Vo)}async function UR(t,e){const n=be(t),r=e.batch.batchId;try{const s=await Z1(n.localStore,e);wb(n,r,null),bb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wo(n,s)}catch(s){await Vo(s)}}async function $R(t,e,n){const r=be(t);try{const s=await function(i,o){const a=be(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(h=>(He(h!==null),c=h.keys(),a.mutationQueue.removeMutationBatch(u,h))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(r.localStore,e);wb(r,e,n),bb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Wo(r,s)}catch(s){await Vo(s)}}function bb(t,e){(t.lc.get(e)||[]).forEach(n=>{n.resolve()}),t.lc.delete(e)}function wb(t,e,n){const r=be(t);let s=r.hc[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function qc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.rc.get(e))t.ic.delete(r),n&&t.sc.wc(r,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(r=>{t.ac.containsKey(r)||Eb(t,r)})}function Eb(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);n!==null&&(lb(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),Mh(t))}function dp(t,e,n){for(const r of n)r instanceof _b?(t.ac.addReference(r.key,e),VR(t,r)):r instanceof yb?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.ac.removeReference(r.key,e),t.ac.containsKey(r.key)||Eb(t,r.key)):me()}function VR(t,e){const n=e.key,r=n.path.canonicalString();t.uc.get(n)||t.oc.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.oc.add(r),Mh(t))}function Mh(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new re($e.fromString(e)),r=t.fc.next();t.cc.set(r,new NR(n)),t.uc=t.uc.insert(n,r),ab(t.remoteStore,new ts(zn(bh(n.path)),r,2,ph.at))}}async function Wo(t,e,n){const r=be(t),s=[],i=[],o=[];r.ic.isEmpty()||(r.ic.forEach((a,u)=>{o.push(r._c(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const h=Rh.Ci(u.targetId,c);i.push(h)}}))}),await Promise.all(o),r.sc.Wo(s),await async function(a,u){const c=be(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>G.forEach(u,l=>G.forEach(l.Si,f=>c.persistence.referenceDelegate.addReference(h,l.targetId,f)).next(()=>G.forEach(l.Di,f=>c.persistence.referenceDelegate.removeReference(h,l.targetId,f)))))}catch(h){if(!Bo(h))throw h;ne("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const l=h.targetId;if(!h.fromCache){const f=c.qi.get(l),d=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(d);c.qi=c.qi.insert(l,g)}}}(r.localStore,i))}async function BR(t,e){const n=be(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await rb(n.localStore,e);n.currentUser=e,function(s,i){s.lc.forEach(o=>{o.forEach(a=>{a.reject(new z(U.CANCELLED,i))})}),s.lc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wo(n,r.ji)}}function jR(t,e){const n=be(t),r=n.cc.get(e);if(r&&r.nc)return Ae().add(r.key);{let s=Ae();const i=n.rc.get(e);if(!i)return s;for(const o of i){const a=n.ic.get(o);s=s.unionWith(a.view.ju)}return s}}function HR(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FR.bind(null,e),e.sc.Wo=kR.bind(null,e.eventManager),e.sc.wc=CR.bind(null,e.eventManager),e}function qR(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$R.bind(null,e),e}class WR{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=Zl(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return J1(this.persistence,new X1,e.initialUser,this.yt)}yc(e){return new z1(Ch.Bs,this.yt)}gc(e){return new iR}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class GR{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BR.bind(null,this.syncEngine),await IR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new SR}createDatastore(e){const n=Zl(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new uR(s));var s;return function(i,o,a,u){return new hR(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>hp(this.syncEngine,a,0),o=up.C()?new up:new oR,new mR(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,u,c){const h=new LR(r,s,i,o,a,u);return c&&(h.dc=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=be(e);ne("RemoteStore","RemoteStore shutting down."),n._u.add(5),await qo(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t,e,n){if(!n)throw new z(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KR(t,e,n,r){if(e===!0&&r===!0)throw new z(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mp(t){if(!re.isDocumentKey(t))throw new z(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pp(t){if(re.isDocumentKey(t))throw new z(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me()}function gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nu(t);throw new z(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function zR(t,e){if(e<=0)throw new z(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp=new Map;class _p{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new z(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,KR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _p({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new z(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new z(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _p(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new IC;switch(n.type){case"gapi":const r=n.client;return new CC(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new z(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=gp.get(e);n&&(ne("ComponentProvider","Removing Datastore"),gp.delete(e),n.terminate())}(this),Promise.resolve()}}function YR(t,e,n,r={}){var s;const i=(t=gn(t,ru))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&Dc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=Ct.MOCK_USER;else{o=V_(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new z(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Ct(u)}t._authCredentials=new AC(new Tv(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class Jn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jn(this.firestore,e,this._query)}}class Er extends Jn{constructor(e,n,r){super(e,n,bh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new re(e))}withConverter(e){return new Er(this.firestore,e,this._path)}}function Fh(t,e,...n){if(t=Qe(t),Tb("collection","path",e),t instanceof ru){const r=$e.fromString(e,...n);return pp(r),new Er(t,null,r)}{if(!(t instanceof jt||t instanceof Er))throw new z(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return pp(r),new Er(t.firestore,null,r)}}function fs(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=Iv.R()),Tb("doc","path",e),t instanceof ru){const r=$e.fromString(e,...n);return mp(r),new jt(t,null,new re(r))}{if(!(t instanceof jt||t instanceof Er))throw new z(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return mp(r),new jt(t.firestore,t instanceof Er?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Kn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ct.UNAUTHENTICATED,this.clientId=Iv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{ne("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(ne("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new z(U.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function QR(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await rb(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function JR(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ZR(t);ne("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>cp(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>cp(e.remoteStore,i)),t.onlineComponents=e}async function ZR(t){return t.offlineComponents||(ne("FirestoreClient","Using default OfflineComponentProvider"),await QR(t,new WR)),t.offlineComponents}async function Ab(t){return t.onlineComponents||(ne("FirestoreClient","Using default OnlineComponentProvider"),await JR(t,new GR)),t.onlineComponents}function eO(t){return Ab(t).then(e=>e.syncEngine)}async function Sb(t){const e=await Ab(t),n=e.eventManager;return n.onListen=DR.bind(null,e.syncEngine),n.onUnlisten=PR.bind(null,e.syncEngine),n}function tO(t,e,n={}){const r=new Vn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,u){const c=new Ib({next:l=>{i.enqueueAndForget(()=>pb(s,h));const f=l.docs.has(o);!f&&l.fromCache?u.reject(new z(U.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&l.fromCache&&a&&a.source==="server"?u.reject(new z(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(l)},error:l=>u.reject(l)}),h=new gb(bh(o.path),c,{includeMetadataChanges:!0,Nu:!0});return mb(s,h)}(await Sb(t),t.asyncQueue,e,n,r)),r.promise}function nO(t,e,n={}){const r=new Vn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,u){const c=new Ib({next:l=>{i.enqueueAndForget(()=>pb(s,h)),l.fromCache&&a.source==="server"?u.reject(new z(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(l)},error:l=>u.reject(l)}),h=new gb(o,c,{includeMetadataChanges:!0,Nu:!0});return mb(s,h)}(await Sb(t),t.asyncQueue,e,n,r)),r.promise}class rO{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new ib(this,"async_queue_retry"),this.Wc=()=>{const n=ju();n&&ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=ju();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const n=ju();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const n=new Vn;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!Bo(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{this.Kc=r,this.Gc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Kn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Gc=!1,r))));return this.Bc=n,n}enqueueAfterDelay(e,n,r){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const s=Dh.createAndSchedule(this,e,n,r,i=>this.Yc(i));return this.Uc.push(s),s}zc(){this.Kc&&me()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}class bs extends ru{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new rO,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||kb(this),this._firestoreClient.terminate()}}function sO(t,e){const n=typeof t=="object"?t:Ff(),r=typeof t=="string"?t:e||"(default)",s=Cl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=U_("firestore");i&&YR(s,...i)}return s}function Uh(t){return t._firestoreClient||kb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function kb(t){var e;const n=t._freezeSettings(),r=function(s,i,o,a){return new UC(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new XR(t._authCredentials,t._appCheckCredentials,t._queue,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zs(Mt.fromBase64String(e))}catch(n){throw new z(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zs(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=/^__.*__$/;class oO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new jo(e,this.data,n,this.fieldTransforms)}}class Cb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me()}}class Bh{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=s,i===void 0&&this.na(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Bh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return rl(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(Rb(this.sa)&&iO.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class aO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.yt=r||Zl(e)}da(e,n,r,s=!1){return new Bh({sa:e,methodName:n,fa:r,path:Nt.emptyPath(),oa:!1,la:s},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Go(t){const e=t._freezeSettings(),n=Zl(t._databaseId);return new aO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ob(t,e,n,r,s,i={}){const o=t.da(i.merge||i.mergeFields?2:0,e,n,s);jh("Data must be an object, but it was:",o,r);const a=Lb(r,o);let u,c;if(i.merge)u=new Qt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const l of i.mergeFields){const f=Wc(e,l,n);if(!o.contains(f))throw new z(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);xb(h,f)||h.push(f)}u=new Qt(h),c=o.fieldTransforms.filter(l=>u.covers(l.field))}else u=null,c=o.fieldTransforms;return new oO(new Kt(a),u,c)}class iu extends $h{_toFieldTransform(e){if(e.sa!==2)throw e.sa===1?e.ha(`${this._methodName}() can only appear at the top level of your update data`):e.ha(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof iu}}function lO(t,e,n,r){const s=t.da(1,e,n);jh("Data must be an object, but it was:",s,r);const i=[],o=Kt.empty();_s(r,(u,c)=>{const h=Hh(e,u,n);c=Qe(c);const l=s.ca(h);if(c instanceof iu)i.push(h);else{const f=Ko(c,l);f!=null&&(i.push(h),o.set(h,f))}});const a=new Qt(i);return new Cb(o,a,s.fieldTransforms)}function uO(t,e,n,r,s,i){const o=t.da(1,e,n),a=[Wc(e,r,n)],u=[s];if(i.length%2!=0)throw new z(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Wc(e,i[f])),u.push(i[f+1]);const c=[],h=Kt.empty();for(let f=a.length-1;f>=0;--f)if(!xb(c,a[f])){const d=a[f];let g=u[f];g=Qe(g);const y=o.ca(d);if(g instanceof iu)c.push(d);else{const v=Ko(g,y);v!=null&&(c.push(d),h.set(d,v))}}const l=new Qt(c);return new Cb(h,l,o.fieldTransforms)}function Nb(t,e,n,r=!1){return Ko(n,t.da(r?4:3,e))}function Ko(t,e){if(Db(t=Qe(t)))return jh("Unsupported field value:",e,t),Lb(t,e);if(t instanceof $h)return function(n,r){if(!Rb(r.sa))throw r.ha(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=Ko(o,r.aa(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=Qe(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return t1(r.yt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ht.fromDate(n);return{timestampValue:tl(r.yt,s)}}if(n instanceof ht){const s=new ht(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:tl(r.yt,s)}}if(n instanceof Vh)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Zs)return{bytesValue:Qv(r.yt,n._byteString)};if(n instanceof jt){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r.ha(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ah(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.ha(`Unsupported field value: ${nu(n)}`)}(t,e)}function Lb(t,e){const n={};return Av(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(t,(r,s)=>{const i=Ko(s,e.ra(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Db(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof Vh||t instanceof Zs||t instanceof jt||t instanceof $h)}function jh(t,e,n){if(!Db(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=nu(n);throw r==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+r)}}function Wc(t,e,n){if((e=Qe(e))instanceof su)return e._internalPath;if(typeof e=="string")return Hh(t,e);throw rl("Field path arguments must be of type string or ",t,!1,void 0,n)}const cO=new RegExp("[~\\*/\\[\\]]");function Hh(t,e,n){if(e.search(cO)>=0)throw rl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new su(...e.split("."))._internalPath}catch{throw rl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new z(U.INVALID_ARGUMENT,a+t+u)}function xb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ou("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fO extends qh{data(){return super.data()}}function ou(t,e){return typeof e=="string"?Hh(t,e):e instanceof su?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wh{}class au extends Wh{}function sl(t,e,...n){let r=[];e instanceof Wh&&r.push(e),r=r.concat(n),function(s){const i=s.filter(a=>a instanceof Gh).length,o=s.filter(a=>a instanceof lu).length;if(i>1||i>0&&o>0)throw new z(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class lu extends au{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new lu(e,n,r)}_apply(e){const n=this._parse(e);return Mb(e._query,n),new Jn(e.firestore,e.converter,Uc(e._query,n))}_parse(e){const n=Go(e.firestore);return function(s,i,o,a,u,c,h){let l;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new z(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){wp(h,c);const f=[];for(const d of h)f.push(bp(a,s,d));l={arrayValue:{values:f}}}else l=bp(a,s,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||wp(h,c),l=Nb(o,i,h,c==="in"||c==="not-in");return at.create(u,c,l)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Pb(t,e,n){const r=e,s=ou("where",t);return lu._create(s,r,n)}class Gh extends Wh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let i=r;const o=s.getFlattenedFilters();for(const a of o)Mb(i,a),i=Uc(i,a)}(e._query,n),new Jn(e.firestore,e.converter,Uc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kh extends au{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Kh(e,n)}_apply(e){const n=function(r,s,i){if(r.startAt!==null)throw new z(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new z(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Us(s,i);return function(a,u){if(wh(a)===null){const c=zl(a);c!==null&&Fb(a,c,u.field)}}(r,o),o}(e._query,this._field,this._direction);return new Jn(e.firestore,e.converter,function(r,s){const i=r.explicitOrderBy.concat([s]);return new ys(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function yp(t,e="asc"){const n=e,r=ou("orderBy",t);return Kh._create(r,n)}class zh extends au{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new zh(e,n,r)}_apply(e){return new Jn(e.firestore,e.converter,Ja(e._query,this._limit,this._limitType))}}function vp(t){return zR("limit",t),zh._create("limit",t,"F")}class Yh extends au{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Yh(e,n,r)}_apply(e){const n=mO(e,this.type,this._docOrFields,this._inclusive);return new Jn(e.firestore,e.converter,function(r,s){return new ys(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function dO(...t){return Yh._create("startAfter",t,!1)}function mO(t,e,n,r){if(n[0]=Qe(n[0]),n[0]instanceof qh)return function(s,i,o,a,u){if(!a)throw new z(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const h of es(s))if(h.field.isKeyField())c.push(Qa(i,a.key));else{const l=a.data.field(h.field);if(gh(l))throw new z(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(l===null){const f=h.field.canonicalString();throw new z(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}c.push(l)}return new Xs(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Go(t.firestore);return function(i,o,a,u,c,h){const l=i.explicitOrderBy;if(c.length>l.length)throw new z(U.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let d=0;d<c.length;d++){const g=c[d];if(l[d].field.isKeyField()){if(typeof g!="string")throw new z(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof g}`);if(!Eh(i)&&g.indexOf("/")!==-1)throw new z(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${g}' contains a slash.`);const y=i.path.child($e.fromString(g));if(!re.isDocumentKey(y))throw new z(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);const v=new re(y);f.push(Qa(o,v))}else{const y=Nb(a,u,g);f.push(y)}}return new Xs(f,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function bp(t,e,n){if(typeof(n=Qe(n))=="string"){if(n==="")throw new z(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Eh(e)&&n.indexOf("/")!==-1)throw new z(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child($e.fromString(n));if(!re.isDocumentKey(r))throw new z(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qa(t,new re(r))}if(n instanceof jt)return Qa(t,n._key);throw new z(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nu(n)}.`)}function wp(t,e){if(!Array.isArray(t)||t.length===0)throw new z(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new z(U.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Mb(t,e){if(e.isInequality()){const r=zl(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new z(U.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=wh(t);i!==null&&Fb(t,s,i)}const n=function(r,s){for(const i of r)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Fb(t,e,n){if(!n.isEqual(e))throw new z(U.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class pO{convertValue(e,n="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw me()}}convertObject(e,n){const r={};return _s(e.fields,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Vh(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Sv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ho(e));default:return null}}convertTimestamp(e){const n=kr(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=$e.fromString(e);He(nb(r));const s=new fo(r.get(1),r.get(3)),i=new re(r.popFirst(5));return s.isEqual(n)||Kn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $b extends qh{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ka(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ou("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ka extends $b{data(e={}){return super.data(e)}}class gO{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Di(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ka(this._firestore,this._userDataWriter,r.key,r,new Di(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>{const a=new ka(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Di(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new ka(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Di(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),c=i.indexOf(o.doc.key)),{type:_O(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _O(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t){t=gn(t,jt);const e=gn(t.firestore,bs);return tO(Uh(e),t._key).then(n=>bO(e,t,n))}class Vb extends pO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function il(t){t=gn(t,Jn);const e=gn(t.firestore,bs),n=Uh(e),r=new Vb(e);return hO(t._query),nO(n,t._query).then(s=>new gO(e,r,t,s))}function yO(t,e,n){t=gn(t,jt);const r=gn(t.firestore,bs),s=Ub(t.converter,e,n);return uu(r,[Ob(Go(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,an.none())])}function Bb(t,e,n,...r){t=gn(t,jt);const s=gn(t.firestore,bs),i=Go(s);let o;return o=typeof(e=Qe(e))=="string"||e instanceof su?uO(i,"updateDoc",t._key,e,n,r):lO(i,"updateDoc",t._key,e),uu(s,[o.toMutation(t._key,an.exists(!0))])}function vO(t){return uu(gn(t.firestore,bs),[new Ih(t._key,an.none())])}function jb(t,e){const n=gn(t.firestore,bs),r=fs(t),s=Ub(t.converter,e);return uu(n,[Ob(Go(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,an.exists(!1))]).then(()=>r)}function uu(t,e){return function(n,r){const s=new Vn;return n.asyncQueue.enqueueAndForget(async()=>MR(await eO(n),r,s)),s.promise}(Uh(t),e)}function bO(t,e,n){const r=n.docs.get(e._key),s=new Vb(t);return new $b(t,s,e._key,r,new Di(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){mi=n})(ui),os(new Ar("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new bs(new SC(n.getProvider("auth-internal")),new OC(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new z(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fo(a.options.projectId,u)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),kn(jm,"3.8.1",t),kn(jm,"3.8.1","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="firebasestorage.googleapis.com",qb="storageBucket",wO=2*60*1e3,EO=10*60*1e3,TO=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je extends Dn{constructor(e,n,r=0){super(Hu(e),`Firebase Storage: ${n} (${Hu(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hu(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function Hu(t){return"storage/"+t}function Qh(){const t="An unknown error occurred, please check the error payload for server response.";return new Je("unknown",t)}function IO(t){return new Je("object-not-found","Object '"+t+"' does not exist.")}function AO(t){return new Je("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function SO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Je("unauthenticated",t)}function kO(){return new Je("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function CO(t){return new Je("unauthorized","User does not have permission to access '"+t+"'.")}function Wb(){return new Je("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Gb(){return new Je("canceled","User canceled the upload/download.")}function RO(t){return new Je("invalid-url","Invalid URL '"+t+"'.")}function OO(t){return new Je("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function NO(){return new Je("no-default-bucket","No default bucket found. Did you set the '"+qb+"' property when initializing the app?")}function Kb(){return new Je("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function LO(){return new Je("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function DO(){return new Je("no-download-url","The given file does not have any download URLs.")}function xO(t){return new Je("unsupported-environment",`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Gc(t){return new Je("invalid-argument",t)}function zb(){return new Je("app-deleted","The Firebase app was deleted.")}function PO(t){return new Je("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ji(t,e){return new Je("invalid-format","String does not match format '"+t+"': "+e)}function Ti(t){throw new Je("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Jt.makeFromUrl(e,n)}catch{return new Jt(e,"")}if(r.path==="")return r;throw OO(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function c(w){w.path_=decodeURIComponent(w.path)}const h="v[A-Za-z0-9_]+",l=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",d=new RegExp(`^https?://${l}/${h}/b/${s}/o${f}`,"i"),g={bucket:1,path:3},y=n===Hb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",p=new RegExp(`^https?://${y}/${s}/${v}`,"i"),T=[{regex:a,indices:u,postModify:i},{regex:d,indices:g,postModify:c},{regex:p,indices:{bucket:1,path:2},postModify:c}];for(let w=0;w<T.length;w++){const S=T[w],N=S.regex.exec(e);if(N){const L=N[S.indices.bucket];let P=N[S.indices.path];P||(P=""),r=new Jt(L,P),S.postModify(r);break}}if(r==null)throw RO(e);return r}}class MO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...v){c||(c=!0,e.apply(null,v))}function l(v){s=setTimeout(()=>{s=null,t(d,u())},v)}function f(){i&&clearTimeout(i)}function d(v,...p){if(c){f();return}if(v){f(),h.call(null,v,...p);return}if(u()||o){f(),h.call(null,v,...p);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,l(T)}let g=!1;function y(v){g||(g=!0,f(),!c&&(s!==null?(v||(a=2),clearTimeout(s),l(0)):v||(a=1)))}return l(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function UO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(t){return t!==void 0}function VO(t){return typeof t=="function"}function BO(t){return typeof t=="object"&&!Array.isArray(t)}function cu(t){return typeof t=="string"||t instanceof String}function Ep(t){return Jh()&&t instanceof Blob}function Jh(){return typeof Blob<"u"&&!JT()}function Tp(t,e,n,r){if(r<e)throw Gc(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Gc(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Yb(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ns;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ns||(ns={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n,r,s,i,o,a,u,c,h,l,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=l,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,g)=>{this.resolve_=d,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new fa(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ns.NO_ERROR,u=i.getStatus();if(!a||Xb(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===ns.ABORT;r(!1,new fa(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new fa(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());$O(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=Qh();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(s.canceled){const u=this.appDelete_?zb():Gb();o(u)}else{const u=Wb();o(u)}};this.canceled_?n(!1,new fa(!1,null,!0)):this.backoffId_=FO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&UO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fa{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function HO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function qO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function WO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function GO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function KO(t,e,n,r,s,i,o=!0){const a=Yb(t.urlParams),u=t.url+a,c=Object.assign({},t.headers);return WO(c,e),HO(c,n),qO(c,i),GO(c,r),new jO(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function YO(...t){const e=zO();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Jh())return new Blob(t);throw new Je("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function XO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t){if(typeof atob>"u")throw xO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qu{constructor(e,n){this.data=e,this.contentType=n||null}}function JO(t,e){switch(t){case Sn.RAW:return new qu(Qb(e));case Sn.BASE64:case Sn.BASE64URL:return new qu(Jb(t,e));case Sn.DATA_URL:return new qu(eN(e),tN(e))}throw Qh()}function Qb(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function ZO(t){let e;try{e=decodeURIComponent(t)}catch{throw ji(Sn.DATA_URL,"Malformed data URL.")}return Qb(e)}function Jb(t,e){switch(t){case Sn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ji(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Sn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ji(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=QO(e)}catch(s){throw s.message.includes("polyfill")?s:ji(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Zb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ji(Sn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=nN(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function eN(t){const e=new Zb(t);return e.base64?Jb(Sn.BASE64,e.rest):ZO(e.rest)}function tN(t){return new Zb(t).contentType}function nN(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n){let r=0,s="";Ep(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ep(this.data_)){const r=this.data_,s=XO(r,e,n);return s===null?null:new mr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new mr(r,!0)}}static getBlob(...e){if(Jh()){const n=e.map(r=>r instanceof mr?r.data_:r);return new mr(YO.apply(null,n))}else{const n=e.map(o=>cu(o)?JO(Sn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new mr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t){let e;try{e=JSON.parse(t)}catch{return null}return BO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function sN(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function tw(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t,e){return e}class Ft{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||iN}}let ha=null;function oN(t){return!cu(t)||t.length<2?t:tw(t)}function nw(){if(ha)return ha;const t=[];t.push(new Ft("bucket")),t.push(new Ft("generation")),t.push(new Ft("metageneration")),t.push(new Ft("name","fullPath",!0));function e(i,o){return oN(o)}const n=new Ft("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Ft("size");return s.xform=r,t.push(s),t.push(new Ft("timeCreated")),t.push(new Ft("updated")),t.push(new Ft("md5Hash",null,!0)),t.push(new Ft("cacheControl",null,!0)),t.push(new Ft("contentDisposition",null,!0)),t.push(new Ft("contentEncoding",null,!0)),t.push(new Ft("contentLanguage",null,!0)),t.push(new Ft("contentType",null,!0)),t.push(new Ft("metadata","customMetadata",!0)),ha=t,ha}function aN(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Jt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function lN(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return aN(r,t),r}function rw(t,e,n){const r=ew(e);return r===null?null:lN(t,r,n)}function uN(t,e,n,r){const s=ew(e);if(s===null||!cu(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,l=t.fullPath,f="/b/"+o(h)+"/o/"+o(l),d=_i(f,n,r),g=Yb({alt:"media",token:c});return d+g})[0]}function sw(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class ws{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t){if(!t)throw Qh()}function Zh(t,e){function n(r,s){const i=rw(t,s,e);return Bn(i!==null),i}return n}function cN(t,e){function n(r,s){const i=rw(t,s,e);return Bn(i!==null),uN(i,s,t.host,t._protocol)}return n}function zo(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=kO():s=SO():n.getStatus()===402?s=AO(t.bucket):n.getStatus()===403?s=CO(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function ed(t){const e=zo(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=IO(t.path)),i.serverResponse=s.serverResponse,i}return n}function fN(t,e,n){const r=e.fullServerUrl(),s=_i(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new ws(s,i,Zh(t,n),o);return a.errorHandler=ed(e),a}function hN(t,e,n){const r=e.fullServerUrl(),s=_i(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new ws(s,i,cN(t,n),o);return a.errorHandler=ed(e),a}function dN(t,e){const n=e.fullServerUrl(),r=_i(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,c){}const a=new ws(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=ed(e),a}function mN(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function iw(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=mN(null,e)),r}function pN(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let w=0;w<2;w++)T=T+Math.random().toString().slice(2);return T}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=iw(e,r,s),h=sw(c,n),l="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+u+"--",d=mr.getBlob(l,r,f);if(d===null)throw Kb();const g={name:c.fullPath},y=_i(i,t.host,t._protocol),v="POST",p=t.maxUploadRetryTime,E=new ws(y,v,Zh(t,n),p);return E.urlParams=g,E.headers=o,E.body=d.uploadData(),E.errorHandler=zo(e),E}class ol{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function td(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Bn(!1)}return Bn(!!n&&(e||["active"]).indexOf(n)!==-1),n}function gN(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=iw(e,r,s),a={name:o.fullPath},u=_i(i,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=sw(o,n),f=t.maxUploadRetryTime;function d(y){td(y);let v;try{v=y.getResponseHeader("X-Goog-Upload-URL")}catch{Bn(!1)}return Bn(cu(v)),v}const g=new ws(u,c,d,f);return g.urlParams=a,g.headers=h,g.body=l,g.errorHandler=zo(e),g}function _N(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const h=td(c,["active","final"]);let l=null;try{l=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Bn(!1)}l||Bn(!1);const f=Number(l);return Bn(!isNaN(f)),new ol(f,r.size(),h==="final")}const o="POST",a=t.maxUploadRetryTime,u=new ws(n,o,i,a);return u.headers=s,u.errorHandler=zo(e),u}const Ip=256*1024;function yN(t,e,n,r,s,i,o,a){const u=new ol(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw LO();const c=u.total-u.current;let h=c;s>0&&(h=Math.min(h,s));const l=u.current,f=l+h;let d="";h===0?d="finalize":c===h?d="upload, finalize":d="upload";const g={"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":`${u.current}`},y=r.slice(l,f);if(y===null)throw Kb();function v(w,S){const N=td(w,["active","final"]),L=u.current+h,P=r.size();let F;return N==="final"?F=Zh(e,i)(w,S):F=null,new ol(L,P,N==="final",F)}const p="POST",E=e.maxUploadRetryTime,T=new ws(n,p,v,E);return T.headers=g,T.body=y.uploadData(),T.progressCallback=a||null,T.errorHandler=zo(t),T}const Gt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Wu(t){switch(t){case"running":case"pausing":case"canceling":return Gt.RUNNING;case"paused":return Gt.PAUSED;case"success":return Gt.SUCCESS;case"canceled":return Gt.CANCELED;case"error":return Gt.ERROR;default:return Gt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n,r){if(VO(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class bN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ns.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ns.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ns.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ti("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ti("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ti("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ti("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ti("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class wN extends bN{initXhr(){this.xhr_.responseType="text"}}function Wr(){return new wN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=nw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(Xb(s.status,[]))if(i)s=Wb();else{this.sleepTime=Math.max(this.sleepTime*2,TO),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=gN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Wr,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=_N(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Wr,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Ip*this._chunkMultiplier,n=new ol(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=yN(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Wr,s,i,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Ip*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=fN(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Wr,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=pN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Wr,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Gb(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Wu(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new vN(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Wu(this._state)){case Gt.SUCCESS:Ts(this._resolve.bind(null,this.snapshot))();break;case Gt.CANCELED:case Gt.ERROR:const n=this._reject;Ts(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Wu(this._state)){case Gt.RUNNING:case Gt.PAUSED:e.next&&Ts(e.next.bind(e,this.snapshot))();break;case Gt.SUCCESS:e.complete&&Ts(e.complete.bind(e))();break;case Gt.CANCELED:case Gt.ERROR:e.error&&Ts(e.error.bind(e,this._error))();break;default:e.error&&Ts(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n){this._service=e,n instanceof Jt?this._location=n:this._location=Jt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new hs(e,n)}get root(){const e=new Jt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tw(this._location.path)}get storage(){return this._service}get parent(){const e=rN(this._location.path);if(e===null)return null;const n=new Jt(this._location.bucket,e);return new hs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw PO(e)}}function TN(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new EN(t,new mr(e),n)}function IN(t){t._throwIfRoot("getDownloadURL");const e=hN(t.storage,t._location,nw());return t.storage.makeRequestWithTokens(e,Wr).then(n=>{if(n===null)throw DO();return n})}function AN(t){t._throwIfRoot("deleteObject");const e=dN(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Wr)}function SN(t,e){const n=sN(t._location.path,e),r=new Jt(t._location.bucket,n);return new hs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t){return/^[A-Za-z]+:\/\//.test(t)}function CN(t,e){return new hs(t,e)}function ow(t,e){if(t instanceof nd){const n=t;if(n._bucket==null)throw NO();const r=new hs(n,n._bucket);return e!=null?ow(r,e):r}else return e!==void 0?SN(t,e):t}function RN(t,e){if(e&&kN(e)){if(t instanceof nd)return CN(t,e);throw Gc("To use ref(service, url), the first argument must be a Storage instance.")}else return ow(t,e)}function Ap(t,e){const n=e==null?void 0:e[qb];return n==null?null:Jt.makeFromBucketSpec(n,t)}function ON(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:V_(s,t.app.options.projectId))}class nd{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Hb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wO,this._maxUploadRetryTime=EO,this._requests=new Set,s!=null?this._bucket=Jt.makeFromBucketSpec(s,this._host):this._bucket=Ap(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jt.makeFromBucketSpec(this._url,e):this._bucket=Ap(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Tp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Tp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hs(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new MO(zb());{const o=KO(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Sp="@firebase/storage",kp="0.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="storage";function NN(t,e,n){return t=Qe(t),TN(t,e,n)}function LN(t){return t=Qe(t),IN(t)}function DN(t){return t=Qe(t),AN(t)}function lw(t,e){return t=Qe(t),RN(t,e)}function xN(t=Ff(),e){t=Qe(t);const r=Cl(t,aw).getImmediate({identifier:e}),s=U_("storage");return s&&PN(r,...s),r}function PN(t,e,n,r={}){ON(t,e,n,r)}function MN(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new nd(n,r,s,e,ui)}function FN(){os(new Ar(aw,MN,"PUBLIC").setMultipleInstances(!0)),kn(Sp,kp,""),kn(Sp,kp,"esm2017")}FN();const UN={apiKey:"AIzaSyDT5kNloiw7uhhBLdRHezeVNg3QqZDhx1s",authDomain:"music-9a6d5.firebaseapp.com",projectId:"music-9a6d5",storageBucket:"music-9a6d5.appspot.com",appId:"1:860898955430:web:145066f681bdd6c1b7e467"},uw=H_(UN),ds=sO(uw),cw=xN(uw);Fh(ds,"users");const ei=Fh(ds,"songs"),Cp=Fh(ds,"comments"),yi=xf("user",{state:()=>({userLoggedIn:!1}),actions:{async register(t){const e=await rS(fn(),t.email,t.password);await yO(fs(ds,"users",e.user.uid),{name:t.name,email:t.email,age:t.age,country:t.country}),await oS(fn().currentUser,{displayName:t.name}),this.userLoggedIn=!0},async authenticate(t){await sS(fn(),t.email,t.password),this.userLoggedIn=!0},async signOut(){await fn().signOut(),this.userLoggedIn=!1}}}),nn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},$N={name:"AppHeader",computed:{...jT(mc,yi),currentLocale(){return this.$i18n.locale==="zh"?"":"English"}},methods:{toggleAuthModal(){this.modalStore.isOpen=!this.modalStore.isOpen,console.log(this.modalStore.isOpen)},signOut(){this.userStore.signOut(),this.$route.meta.requiresAuth&&this.$router.push({name:"home"})},changeLocale(){this.$i18n.locale=this.$i18n.locale==="zh"?"en":"zh"}}},VN={id:"header",class:"bg-gray-700"},BN={class:"container mx-auto flex justify-start items-center py-5 px-4"},jN={class:"flex flex-grow items-center"},HN={class:"flex flex-row mt-1"},qN={key:0},WN={class:"ml-auto"};function GN(t,e,n,r,s,i){const o=Xe("router-link");return Se(),Me("header",VN,[D("nav",BN,[oe(o,{class:"text-white font-bold uppercase text-2xl mr-4",to:{name:"home"},"exact-active-class":"no-active"},{default:Vt(()=>[vr("Music")]),_:1}),D("div",jN,[D("ul",HN,[D("li",null,[oe(o,{class:"px-2 text-white",to:{name:"about"}},{default:Vt(()=>[vr(ae(t.$t("header.about")),1)]),_:1})]),t.userStore.userLoggedIn?(Se(),Me(ot,{key:1},[D("li",null,[oe(o,{class:"px-2 text-white",to:{name:"manage"}},{default:Vt(()=>[vr(ae(t.$t("header.manage")),1)]),_:1})]),D("li",null,[D("a",{class:"px-2 text-white",href:"#",onClick:e[1]||(e[1]=_t((...a)=>i.signOut&&i.signOut(...a),["prevent"]))},ae(t.$t("header.logout")),1)])],64)):(Se(),Me("li",qN,[D("a",{class:"px-2 text-white",href:"#",onClick:e[0]||(e[0]=_t((...a)=>i.toggleAuthModal&&i.toggleAuthModal(...a),["prevent"]))},ae(t.$t("header.login_register")),1)]))]),D("ul",WN,[D("li",null,[D("a",{class:"px-2 text-white",href:"#",onClick:e[2]||(e[2]=_t((...a)=>i.changeLocale&&i.changeLocale(...a),["prevent"]))},ae(i.currentLocale),1)])])])])])}const KN=nn($N,[["render",GN]]),zN={name:"RegisterForm",data(){return{schema:{name:"required|min:3|max:100|alphaSpaces",email:"required|min:3|max:100|email",age:"required|minVal:18|maxVal:100",password:"required|min:9|max:100|excluded:password",confirm_password:"passwords_mismatch:@password",country:"required|country_excluded:Antarctica",tos:"tos"},userData:{country:"USA"},reg_in_submission:!1,reg_show_alert:!1,reg_alert_variant:"bg-blur-500",reg_alert_msg:"Please wait! Your account is being created"}},methods:{...Sl(yi,{createUser:"register"}),async register(t){this.reg_show_alert=!0,this.reg_in_submission=!0,this.reg_alert_variant="bg-blue-500",this.reg_alert_msg="Please wait! Your account is being created.";try{await this.createUser(t)}catch{this.reg_in_submission=!1,this.reg_alert_variant="bg-red-500",this.reg_alert_msg="An unexpection error occured. Please try again later.";return}this.reg_alert_variant="bg-green-500",this.reg_alert_msg="Success! Your account has been created.",window.location.reload()}}},YN={class:"mb-3"},XN={class:"inline-block mb-2"},QN={class:"mb-3"},JN={class:"inline-block mb-2"},ZN={class:"mb-3"},eL={class:"inline-block mb-2"},tL={class:"mb-3"},nL={class:"inline-block mb-2"},rL={class:"mb-3"},sL={class:"inline-block mb-2"},iL={class:"mb-3"},oL={class:"inline-block mb-2"},aL=D("option",{value:"USA"},"USA",-1),lL=D("option",{value:"Mexico"},"Mexico",-1),uL=D("option",{value:"Germany"},"Germany",-1),cL=D("option",{value:"Antarctica"},"Antarctica",-1),fL={class:"mb-3 pl-6"},hL={href:"#"},dL=["disabled"];function mL(t,e,n,r,s,i){const o=Xe("vee-field"),a=Xe("ErrorMessage"),u=Xe("i18n-t"),c=Xe("vee-form");return Se(),Me(ot,null,[s.reg_show_alert?(Se(),Me("div",{key:0,class:Lt(["text-white text-center font-blod p-4 rounded mb-4",s.reg_alert_variant])},ae(s.reg_alert_msg),3)):js("",!0),oe(c,{"validation-schema":s.schema,onSubmit:i.register,"initial-values":s.userData},{default:Vt(()=>[D("div",YN,[D("label",XN,ae(t.$t("register.name")),1),oe(o,{type:"text",name:"name",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Name"}),oe(a,{class:"text-red-600",name:"name"})]),D("div",QN,[D("label",JN,ae(t.$t("register.email")),1),oe(o,{type:"email",name:"email",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Email"}),oe(a,{class:"text-red-600",name:"email"})]),D("div",ZN,[D("label",eL,ae(t.$t("register.age")),1),oe(o,{type:"number",name:"age",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"}),oe(a,{class:"text-red-600",name:"age"})]),D("div",tL,[D("label",nL,ae(t.$t("register.password")),1),oe(o,{name:"password",bails:!1},{default:Vt(({field:h,errors:l})=>[D("input",I_({type:"password",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Password"},h),null,16),(Se(!0),Me(ot,null,wo(l,f=>(Se(),Me("div",{class:"text-red-600",key:f},ae(f),1))),128))]),_:1})]),D("div",rL,[D("label",sL,ae(t.$t("register.confirm_password")),1),oe(o,{name:"confirm_password",type:"password",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Confirm Password"}),oe(a,{class:"text-red-600",name:"confirm_password"})]),D("div",iL,[D("label",oL,ae(t.$t("register.country")),1),oe(o,{as:"select",name:"country",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"},{default:Vt(()=>[aL,lL,uL,cL]),_:1}),oe(a,{class:"text-red-600",name:"country"})]),D("div",fL,[oe(o,{type:"checkbox",name:"tos",value:"1",class:"w-4 h-4 float-left -ml-6 mt-1 rounded"}),oe(u,{class:"inline-block",keypath:"register.accept",tag:"label"},{default:Vt(()=>[D("a",hL,ae(t.$t("register.tos")),1)]),_:1}),oe(a,{class:"text-red-600 block",name:"tos"})]),D("button",{type:"submit",class:"block w-full bg-purple-600 text-white py-1.5 px-3 rounded transition hover:bg-purple-700",disabled:s.reg_in_submission}," Submit ",8,dL)]),_:1},8,["validation-schema","onSubmit","initial-values"])],64)}const pL=nn(zN,[["render",mL]]),gL={name:"LoginForm",data(){return{loginSchema:{email:"required|min:3|max:100|email",password:"required|min:9|max:100"},login_in_submission:!1,login_show_alert:!1,login_alert_variant:"bg-blur-500",login_alert_msg:"Please wait! We are logging you in."}},methods:{...Sl(yi,["authenticate"]),async login(t){this.login_show_alert=!0,this.login_in_submission=!0,this.login_alert_variant="bg-blue-500",this.login_alert_msg="Please wait! We are logging you in.";try{await this.authenticate(t)}catch{this.login_in_submission=!1,this.login_alert_variant="bg-red-500",this.login_alert_msg="Invalid login details";return}this.login_alert_variant="bg-green-500",this.login_alert_msg="Success! Your are now logged in.",window.location.reload()}}},_L={class:"mb-3"},yL={class:"inline-block mb-2"},vL={class:"mb-3"},bL={class:"inline-block mb-2"},wL=["disabled"];function EL(t,e,n,r,s,i){const o=Xe("vee-field"),a=Xe("ErrorMessage"),u=Xe("vee-form");return Se(),Me(ot,null,[s.login_show_alert?(Se(),Me("div",{key:0,class:Lt(["text-white text-center font-blod p-4 mb-4",s.login_alert_variant])},ae(s.login_alert_msg),3)):js("",!0),oe(u,{"validation-schema":s.loginSchema,onSubmit:i.login},{default:Vt(()=>[D("div",_L,[D("label",yL,ae(t.$t("login.email")),1),oe(o,{name:"email",type:"email",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Email"}),oe(a,{class:"text-red-600",name:"email"})]),D("div",vL,[D("label",bL,ae(t.$t("login.password")),1),oe(o,{name:"password",type:"password",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Password"}),oe(a,{class:"text-red-600",name:"password"})]),D("button",{type:"submit",class:"block w-full bg-purple-600 text-white py-1.5 px-3 rounded transition hover:bg-purple-700",disabled:s.login_in_submission}," Submit ",8,wL)]),_:1},8,["validation-schema","onSubmit"])],64)}const TL=nn(gL,[["render",EL]]),IL={name:"Auth",components:{AppLoginForm:TL,AppRegisterForm:pL},data(){return{tab:"login"}},computed:{...xa(mc,["hiddenClass"]),...D_(mc,{modalVisibility:"isOpen"})}},AL={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},SL=D("div",{class:"fixed inset-0 transition-opacity"},[D("div",{class:"absolute inset-0 bg-gray-800 opacity-75"})],-1),kL=D("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"",-1),CL={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},RL={class:"py-4 text-left px-6"},OL={class:"flex justify-between items-center pb-4"},NL={class:"text-2xl font-bold"},LL=D("i",{class:"fas fa-times"},null,-1),DL=[LL],xL={class:"flex flex-wrap mb-4"},PL={class:"flex-auto text-center"},ML={class:"flex-auto text-center"};function FL(t,e,n,r,s,i){const o=Xe("app-login-form"),a=Xe("app-register-form");return Se(),Me("div",{class:Lt(["fixed z-10 inset-0 overflow-y-auto",t.hiddenClass]),id:"modal"},[D("div",AL,[SL,kL,D("div",CL,[D("div",RL,[D("div",OL,[D("p",NL,ae(t.$t("auth.title")),1),D("div",{class:"modal-close cursor-pointer z-50",onClick:e[0]||(e[0]=u=>t.modalVisibility=!1)},DL)]),D("ul",xL,[D("li",PL,[D("a",{class:Lt(["block rounded py-3 px-4 transition",{"hover:text-white text-white bg-blue-600":s.tab==="login","hover:text-blue-600":s.tab==="register"}]),href:"#",onClick:e[1]||(e[1]=_t(u=>s.tab="login",["prevent"]))},ae(t.$t("auth.login")),3)]),D("li",ML,[D("a",{class:Lt(["block rounded py-3 px-4 transition",{"hover:text-white text-white bg-blue-600":s.tab==="register","hover:text-blue-600":s.tab==="login"}]),href:"#",onClick:e[2]||(e[2]=_t(u=>s.tab="register",["prevent"]))},ae(t.$t("auth.register")),3)])]),s.tab==="login"?(Se(),ss(o,{key:0})):(Se(),ss(a,{key:1}))])])])],2)}const UL=nn(IL,[["render",FL]]);var Ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kc={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var l=this||n;return l._counter=1e3,l._html5AudioPool=[],l.html5PoolSize=10,l._codecs={},l._howls=[],l._muted=!1,l._volume=1,l._canPlayEvent="canplaythrough",l._navigator=typeof window<"u"&&window.navigator?window.navigator:null,l.masterGain=null,l.noAudio=!1,l.usingWebAudio=!0,l.autoSuspend=!0,l.ctx=null,l.autoUnlock=!0,l._setup(),l},volume:function(l){var f=this||n;if(l=parseFloat(l),f.ctx||h(),typeof l<"u"&&l>=0&&l<=1){if(f._volume=l,f._muted)return f;f.usingWebAudio&&f.masterGain.gain.setValueAtTime(l,n.ctx.currentTime);for(var d=0;d<f._howls.length;d++)if(!f._howls[d]._webAudio)for(var g=f._howls[d]._getSoundIds(),y=0;y<g.length;y++){var v=f._howls[d]._soundById(g[y]);v&&v._node&&(v._node.volume=v._volume*l)}return f}return f._volume},mute:function(l){var f=this||n;f.ctx||h(),f._muted=l,f.usingWebAudio&&f.masterGain.gain.setValueAtTime(l?0:f._volume,n.ctx.currentTime);for(var d=0;d<f._howls.length;d++)if(!f._howls[d]._webAudio)for(var g=f._howls[d]._getSoundIds(),y=0;y<g.length;y++){var v=f._howls[d]._soundById(g[y]);v&&v._node&&(v._node.muted=l?!0:v._muted)}return f},stop:function(){for(var l=this||n,f=0;f<l._howls.length;f++)l._howls[f].stop();return l},unload:function(){for(var l=this||n,f=l._howls.length-1;f>=0;f--)l._howls[f].unload();return l.usingWebAudio&&l.ctx&&typeof l.ctx.close<"u"&&(l.ctx.close(),l.ctx=null,h()),l},codecs:function(l){return(this||n)._codecs[l.replace(/^x-/,"")]},_setup:function(){var l=this||n;if(l.state=l.ctx&&l.ctx.state||"suspended",l._autoSuspend(),!l.usingWebAudio)if(typeof Audio<"u")try{var f=new Audio;typeof f.oncanplaythrough>"u"&&(l._canPlayEvent="canplay")}catch{l.noAudio=!0}else l.noAudio=!0;try{var f=new Audio;f.muted&&(l.noAudio=!0)}catch{}return l.noAudio||l._setupCodecs(),l},_setupCodecs:function(){var l=this||n,f=null;try{f=typeof Audio<"u"?new Audio:null}catch{return l}if(!f||typeof f.canPlayType!="function")return l;var d=f.canPlayType("audio/mpeg;").replace(/^no$/,""),g=l._navigator?l._navigator.userAgent:"",y=g.match(/OPR\/([0-6].)/g),v=y&&parseInt(y[0].split("/")[1],10)<33,p=g.indexOf("Safari")!==-1&&g.indexOf("Chrome")===-1,E=g.match(/Version\/(.*?) /),T=p&&E&&parseInt(E[1],10)<15;return l._codecs={mp3:!!(!v&&(d||f.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!d,opus:!!f.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(f.canPlayType('audio/wav; codecs="1"')||f.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!f.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!f.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(f.canPlayType("audio/x-m4a;")||f.canPlayType("audio/m4a;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(f.canPlayType("audio/x-m4b;")||f.canPlayType("audio/m4b;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(f.canPlayType("audio/x-mp4;")||f.canPlayType("audio/mp4;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!T&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!T&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!f.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(f.canPlayType("audio/x-flac;")||f.canPlayType("audio/flac;")).replace(/^no$/,"")},l},_unlockAudio:function(){var l=this||n;if(!(l._audioUnlocked||!l.ctx)){l._audioUnlocked=!1,l.autoUnlock=!1,!l._mobileUnloaded&&l.ctx.sampleRate!==44100&&(l._mobileUnloaded=!0,l.unload()),l._scratchBuffer=l.ctx.createBuffer(1,1,22050);var f=function(d){for(;l._html5AudioPool.length<l.html5PoolSize;)try{var g=new Audio;g._unlocked=!0,l._releaseHtml5Audio(g)}catch{l.noAudio=!0;break}for(var y=0;y<l._howls.length;y++)if(!l._howls[y]._webAudio)for(var v=l._howls[y]._getSoundIds(),p=0;p<v.length;p++){var E=l._howls[y]._soundById(v[p]);E&&E._node&&!E._node._unlocked&&(E._node._unlocked=!0,E._node.load())}l._autoResume();var T=l.ctx.createBufferSource();T.buffer=l._scratchBuffer,T.connect(l.ctx.destination),typeof T.start>"u"?T.noteOn(0):T.start(0),typeof l.ctx.resume=="function"&&l.ctx.resume(),T.onended=function(){T.disconnect(0),l._audioUnlocked=!0,document.removeEventListener("touchstart",f,!0),document.removeEventListener("touchend",f,!0),document.removeEventListener("click",f,!0),document.removeEventListener("keydown",f,!0);for(var w=0;w<l._howls.length;w++)l._howls[w]._emit("unlock")}};return document.addEventListener("touchstart",f,!0),document.addEventListener("touchend",f,!0),document.addEventListener("click",f,!0),document.addEventListener("keydown",f,!0),l}},_obtainHtml5Audio:function(){var l=this||n;if(l._html5AudioPool.length)return l._html5AudioPool.pop();var f=new Audio().play();return f&&typeof Promise<"u"&&(f instanceof Promise||typeof f.then=="function")&&f.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(l){var f=this||n;return l._unlocked&&f._html5AudioPool.push(l),f},_autoSuspend:function(){var l=this;if(!(!l.autoSuspend||!l.ctx||typeof l.ctx.suspend>"u"||!n.usingWebAudio)){for(var f=0;f<l._howls.length;f++)if(l._howls[f]._webAudio){for(var d=0;d<l._howls[f]._sounds.length;d++)if(!l._howls[f]._sounds[d]._paused)return l}return l._suspendTimer&&clearTimeout(l._suspendTimer),l._suspendTimer=setTimeout(function(){if(l.autoSuspend){l._suspendTimer=null,l.state="suspending";var g=function(){l.state="suspended",l._resumeAfterSuspend&&(delete l._resumeAfterSuspend,l._autoResume())};l.ctx.suspend().then(g,g)}},3e4),l}},_autoResume:function(){var l=this;if(!(!l.ctx||typeof l.ctx.resume>"u"||!n.usingWebAudio))return l.state==="running"&&l.ctx.state!=="interrupted"&&l._suspendTimer?(clearTimeout(l._suspendTimer),l._suspendTimer=null):l.state==="suspended"||l.state==="running"&&l.ctx.state==="interrupted"?(l.ctx.resume().then(function(){l.state="running";for(var f=0;f<l._howls.length;f++)l._howls[f]._emit("resume")}),l._suspendTimer&&(clearTimeout(l._suspendTimer),l._suspendTimer=null)):l.state==="suspending"&&(l._resumeAfterSuspend=!0),l}};var n=new e,r=function(l){var f=this;if(!l.src||l.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}f.init(l)};r.prototype={init:function(l){var f=this;return n.ctx||h(),f._autoplay=l.autoplay||!1,f._format=typeof l.format!="string"?l.format:[l.format],f._html5=l.html5||!1,f._muted=l.mute||!1,f._loop=l.loop||!1,f._pool=l.pool||5,f._preload=typeof l.preload=="boolean"||l.preload==="metadata"?l.preload:!0,f._rate=l.rate||1,f._sprite=l.sprite||{},f._src=typeof l.src!="string"?l.src:[l.src],f._volume=l.volume!==void 0?l.volume:1,f._xhr={method:l.xhr&&l.xhr.method?l.xhr.method:"GET",headers:l.xhr&&l.xhr.headers?l.xhr.headers:null,withCredentials:l.xhr&&l.xhr.withCredentials?l.xhr.withCredentials:!1},f._duration=0,f._state="unloaded",f._sounds=[],f._endTimers={},f._queue=[],f._playLock=!1,f._onend=l.onend?[{fn:l.onend}]:[],f._onfade=l.onfade?[{fn:l.onfade}]:[],f._onload=l.onload?[{fn:l.onload}]:[],f._onloaderror=l.onloaderror?[{fn:l.onloaderror}]:[],f._onplayerror=l.onplayerror?[{fn:l.onplayerror}]:[],f._onpause=l.onpause?[{fn:l.onpause}]:[],f._onplay=l.onplay?[{fn:l.onplay}]:[],f._onstop=l.onstop?[{fn:l.onstop}]:[],f._onmute=l.onmute?[{fn:l.onmute}]:[],f._onvolume=l.onvolume?[{fn:l.onvolume}]:[],f._onrate=l.onrate?[{fn:l.onrate}]:[],f._onseek=l.onseek?[{fn:l.onseek}]:[],f._onunlock=l.onunlock?[{fn:l.onunlock}]:[],f._onresume=[],f._webAudio=n.usingWebAudio&&!f._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(f),f._autoplay&&f._queue.push({event:"play",action:function(){f.play()}}),f._preload&&f._preload!=="none"&&f.load(),f},load:function(){var l=this,f=null;if(n.noAudio){l._emit("loaderror",null,"No audio support.");return}typeof l._src=="string"&&(l._src=[l._src]);for(var d=0;d<l._src.length;d++){var g,y;if(l._format&&l._format[d])g=l._format[d];else{if(y=l._src[d],typeof y!="string"){l._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}g=/^data:audio\/([^;,]+);/i.exec(y),g||(g=/\.([^.]+)$/.exec(y.split("?",1)[0])),g&&(g=g[1].toLowerCase())}if(g||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),g&&n.codecs(g)){f=l._src[d];break}}if(!f){l._emit("loaderror",null,"No codec support for selected audio sources.");return}return l._src=f,l._state="loading",window.location.protocol==="https:"&&f.slice(0,5)==="http:"&&(l._html5=!0,l._webAudio=!1),new s(l),l._webAudio&&o(l),l},play:function(l,f){var d=this,g=null;if(typeof l=="number")g=l,l=null;else{if(typeof l=="string"&&d._state==="loaded"&&!d._sprite[l])return null;if(typeof l>"u"&&(l="__default",!d._playLock)){for(var y=0,v=0;v<d._sounds.length;v++)d._sounds[v]._paused&&!d._sounds[v]._ended&&(y++,g=d._sounds[v]._id);y===1?l=null:g=null}}var p=g?d._soundById(g):d._inactiveSound();if(!p)return null;if(g&&!l&&(l=p._sprite||"__default"),d._state!=="loaded"){p._sprite=l,p._ended=!1;var E=p._id;return d._queue.push({event:"play",action:function(){d.play(E)}}),E}if(g&&!p._paused)return f||d._loadQueue("play"),p._id;d._webAudio&&n._autoResume();var T=Math.max(0,p._seek>0?p._seek:d._sprite[l][0]/1e3),w=Math.max(0,(d._sprite[l][0]+d._sprite[l][1])/1e3-T),S=w*1e3/Math.abs(p._rate),N=d._sprite[l][0]/1e3,L=(d._sprite[l][0]+d._sprite[l][1])/1e3;p._sprite=l,p._ended=!1;var P=function(){p._paused=!1,p._seek=T,p._start=N,p._stop=L,p._loop=!!(p._loop||d._sprite[l][2])};if(T>=L){d._ended(p);return}var F=p._node;if(d._webAudio){var Q=function(){d._playLock=!1,P(),d._refreshBuffer(p);var ce=p._muted||d._muted?0:p._volume;F.gain.setValueAtTime(ce,n.ctx.currentTime),p._playStart=n.ctx.currentTime,typeof F.bufferSource.start>"u"?p._loop?F.bufferSource.noteGrainOn(0,T,86400):F.bufferSource.noteGrainOn(0,T,w):p._loop?F.bufferSource.start(0,T,86400):F.bufferSource.start(0,T,w),S!==1/0&&(d._endTimers[p._id]=setTimeout(d._ended.bind(d,p),S)),f||setTimeout(function(){d._emit("play",p._id),d._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?Q():(d._playLock=!0,d.once("resume",Q),d._clearTimer(p._id))}else{var Z=function(){F.currentTime=T,F.muted=p._muted||d._muted||n._muted||F.muted,F.volume=p._volume*n.volume(),F.playbackRate=p._rate;try{var ce=F.play();if(ce&&typeof Promise<"u"&&(ce instanceof Promise||typeof ce.then=="function")?(d._playLock=!0,P(),ce.then(function(){d._playLock=!1,F._unlocked=!0,f?d._loadQueue():d._emit("play",p._id)}).catch(function(){d._playLock=!1,d._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):f||(d._playLock=!1,P(),d._emit("play",p._id)),F.playbackRate=p._rate,F.paused){d._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}l!=="__default"||p._loop?d._endTimers[p._id]=setTimeout(d._ended.bind(d,p),S):(d._endTimers[p._id]=function(){d._ended(p),F.removeEventListener("ended",d._endTimers[p._id],!1)},F.addEventListener("ended",d._endTimers[p._id],!1))}catch(Te){d._emit("playerror",p._id,Te)}};F.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(F.src=d._src,F.load());var W=window&&window.ejecta||!F.readyState&&n._navigator.isCocoonJS;if(F.readyState>=3||W)Z();else{d._playLock=!0,d._state="loading";var te=function(){d._state="loaded",Z(),F.removeEventListener(n._canPlayEvent,te,!1)};F.addEventListener(n._canPlayEvent,te,!1),d._clearTimer(p._id)}}return p._id},pause:function(l){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"pause",action:function(){f.pause(l)}}),f;for(var d=f._getSoundIds(l),g=0;g<d.length;g++){f._clearTimer(d[g]);var y=f._soundById(d[g]);if(y&&!y._paused&&(y._seek=f.seek(d[g]),y._rateSeek=0,y._paused=!0,f._stopFade(d[g]),y._node))if(f._webAudio){if(!y._node.bufferSource)continue;typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),f._cleanBuffer(y._node)}else(!isNaN(y._node.duration)||y._node.duration===1/0)&&y._node.pause();arguments[1]||f._emit("pause",y?y._id:null)}return f},stop:function(l,f){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"stop",action:function(){d.stop(l)}}),d;for(var g=d._getSoundIds(l),y=0;y<g.length;y++){d._clearTimer(g[y]);var v=d._soundById(g[y]);v&&(v._seek=v._start||0,v._rateSeek=0,v._paused=!0,v._ended=!0,d._stopFade(g[y]),v._node&&(d._webAudio?v._node.bufferSource&&(typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),d._cleanBuffer(v._node)):(!isNaN(v._node.duration)||v._node.duration===1/0)&&(v._node.currentTime=v._start||0,v._node.pause(),v._node.duration===1/0&&d._clearSound(v._node))),f||d._emit("stop",v._id))}return d},mute:function(l,f){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"mute",action:function(){d.mute(l,f)}}),d;if(typeof f>"u")if(typeof l=="boolean")d._muted=l;else return d._muted;for(var g=d._getSoundIds(f),y=0;y<g.length;y++){var v=d._soundById(g[y]);v&&(v._muted=l,v._interval&&d._stopFade(v._id),d._webAudio&&v._node?v._node.gain.setValueAtTime(l?0:v._volume,n.ctx.currentTime):v._node&&(v._node.muted=n._muted?!0:l),d._emit("mute",v._id))}return d},volume:function(){var l=this,f=arguments,d,g;if(f.length===0)return l._volume;if(f.length===1||f.length===2&&typeof f[1]>"u"){var y=l._getSoundIds(),v=y.indexOf(f[0]);v>=0?g=parseInt(f[0],10):d=parseFloat(f[0])}else f.length>=2&&(d=parseFloat(f[0]),g=parseInt(f[1],10));var p;if(typeof d<"u"&&d>=0&&d<=1){if(l._state!=="loaded"||l._playLock)return l._queue.push({event:"volume",action:function(){l.volume.apply(l,f)}}),l;typeof g>"u"&&(l._volume=d),g=l._getSoundIds(g);for(var E=0;E<g.length;E++)p=l._soundById(g[E]),p&&(p._volume=d,f[2]||l._stopFade(g[E]),l._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(d,n.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=d*n.volume()),l._emit("volume",p._id))}else return p=g?l._soundById(g):l._sounds[0],p?p._volume:0;return l},fade:function(l,f,d,g){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"fade",action:function(){y.fade(l,f,d,g)}}),y;l=Math.min(Math.max(0,parseFloat(l)),1),f=Math.min(Math.max(0,parseFloat(f)),1),d=parseFloat(d),y.volume(l,g);for(var v=y._getSoundIds(g),p=0;p<v.length;p++){var E=y._soundById(v[p]);if(E){if(g||y._stopFade(v[p]),y._webAudio&&!E._muted){var T=n.ctx.currentTime,w=T+d/1e3;E._volume=l,E._node.gain.setValueAtTime(l,T),E._node.gain.linearRampToValueAtTime(f,w)}y._startFadeInterval(E,l,f,d,v[p],typeof g>"u")}}return y},_startFadeInterval:function(l,f,d,g,y,v){var p=this,E=f,T=d-f,w=Math.abs(T/.01),S=Math.max(4,w>0?g/w:g),N=Date.now();l._fadeTo=d,l._interval=setInterval(function(){var L=(Date.now()-N)/g;N=Date.now(),E+=T*L,E=Math.round(E*100)/100,T<0?E=Math.max(d,E):E=Math.min(d,E),p._webAudio?l._volume=E:p.volume(E,l._id,!0),v&&(p._volume=E),(d<f&&E<=d||d>f&&E>=d)&&(clearInterval(l._interval),l._interval=null,l._fadeTo=null,p.volume(d,l._id),p._emit("fade",l._id))},S)},_stopFade:function(l){var f=this,d=f._soundById(l);return d&&d._interval&&(f._webAudio&&d._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(d._interval),d._interval=null,f.volume(d._fadeTo,l),d._fadeTo=null,f._emit("fade",l)),f},loop:function(){var l=this,f=arguments,d,g,y;if(f.length===0)return l._loop;if(f.length===1)if(typeof f[0]=="boolean")d=f[0],l._loop=d;else return y=l._soundById(parseInt(f[0],10)),y?y._loop:!1;else f.length===2&&(d=f[0],g=parseInt(f[1],10));for(var v=l._getSoundIds(g),p=0;p<v.length;p++)y=l._soundById(v[p]),y&&(y._loop=d,l._webAudio&&y._node&&y._node.bufferSource&&(y._node.bufferSource.loop=d,d&&(y._node.bufferSource.loopStart=y._start||0,y._node.bufferSource.loopEnd=y._stop,l.playing(v[p])&&(l.pause(v[p],!0),l.play(v[p],!0)))));return l},rate:function(){var l=this,f=arguments,d,g;if(f.length===0)g=l._sounds[0]._id;else if(f.length===1){var y=l._getSoundIds(),v=y.indexOf(f[0]);v>=0?g=parseInt(f[0],10):d=parseFloat(f[0])}else f.length===2&&(d=parseFloat(f[0]),g=parseInt(f[1],10));var p;if(typeof d=="number"){if(l._state!=="loaded"||l._playLock)return l._queue.push({event:"rate",action:function(){l.rate.apply(l,f)}}),l;typeof g>"u"&&(l._rate=d),g=l._getSoundIds(g);for(var E=0;E<g.length;E++)if(p=l._soundById(g[E]),p){l.playing(g[E])&&(p._rateSeek=l.seek(g[E]),p._playStart=l._webAudio?n.ctx.currentTime:p._playStart),p._rate=d,l._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(d,n.ctx.currentTime):p._node&&(p._node.playbackRate=d);var T=l.seek(g[E]),w=(l._sprite[p._sprite][0]+l._sprite[p._sprite][1])/1e3-T,S=w*1e3/Math.abs(p._rate);(l._endTimers[g[E]]||!p._paused)&&(l._clearTimer(g[E]),l._endTimers[g[E]]=setTimeout(l._ended.bind(l,p),S)),l._emit("rate",p._id)}}else return p=l._soundById(g),p?p._rate:l._rate;return l},seek:function(){var l=this,f=arguments,d,g;if(f.length===0)l._sounds.length&&(g=l._sounds[0]._id);else if(f.length===1){var y=l._getSoundIds(),v=y.indexOf(f[0]);v>=0?g=parseInt(f[0],10):l._sounds.length&&(g=l._sounds[0]._id,d=parseFloat(f[0]))}else f.length===2&&(d=parseFloat(f[0]),g=parseInt(f[1],10));if(typeof g>"u")return 0;if(typeof d=="number"&&(l._state!=="loaded"||l._playLock))return l._queue.push({event:"seek",action:function(){l.seek.apply(l,f)}}),l;var p=l._soundById(g);if(p)if(typeof d=="number"&&d>=0){var E=l.playing(g);E&&l.pause(g,!0),p._seek=d,p._ended=!1,l._clearTimer(g),!l._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=d);var T=function(){E&&l.play(g,!0),l._emit("seek",g)};if(E&&!l._webAudio){var w=function(){l._playLock?setTimeout(w,0):T()};setTimeout(w,0)}else T()}else if(l._webAudio){var S=l.playing(g)?n.ctx.currentTime-p._playStart:0,N=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(N+S*Math.abs(p._rate))}else return p._node.currentTime;return l},playing:function(l){var f=this;if(typeof l=="number"){var d=f._soundById(l);return d?!d._paused:!1}for(var g=0;g<f._sounds.length;g++)if(!f._sounds[g]._paused)return!0;return!1},duration:function(l){var f=this,d=f._duration,g=f._soundById(l);return g&&(d=f._sprite[g._sprite][1]/1e3),d},state:function(){return this._state},unload:function(){for(var l=this,f=l._sounds,d=0;d<f.length;d++)f[d]._paused||l.stop(f[d]._id),l._webAudio||(l._clearSound(f[d]._node),f[d]._node.removeEventListener("error",f[d]._errorFn,!1),f[d]._node.removeEventListener(n._canPlayEvent,f[d]._loadFn,!1),f[d]._node.removeEventListener("ended",f[d]._endFn,!1),n._releaseHtml5Audio(f[d]._node)),delete f[d]._node,l._clearTimer(f[d]._id);var g=n._howls.indexOf(l);g>=0&&n._howls.splice(g,1);var y=!0;for(d=0;d<n._howls.length;d++)if(n._howls[d]._src===l._src||l._src.indexOf(n._howls[d]._src)>=0){y=!1;break}return i&&y&&delete i[l._src],n.noAudio=!1,l._state="unloaded",l._sounds=[],l=null,null},on:function(l,f,d,g){var y=this,v=y["_on"+l];return typeof f=="function"&&v.push(g?{id:d,fn:f,once:g}:{id:d,fn:f}),y},off:function(l,f,d){var g=this,y=g["_on"+l],v=0;if(typeof f=="number"&&(d=f,f=null),f||d)for(v=0;v<y.length;v++){var p=d===y[v].id;if(f===y[v].fn&&p||!f&&p){y.splice(v,1);break}}else if(l)g["_on"+l]=[];else{var E=Object.keys(g);for(v=0;v<E.length;v++)E[v].indexOf("_on")===0&&Array.isArray(g[E[v]])&&(g[E[v]]=[])}return g},once:function(l,f,d){var g=this;return g.on(l,f,d,1),g},_emit:function(l,f,d){for(var g=this,y=g["_on"+l],v=y.length-1;v>=0;v--)(!y[v].id||y[v].id===f||l==="load")&&(setTimeout(function(p){p.call(this,f,d)}.bind(g,y[v].fn),0),y[v].once&&g.off(l,y[v].fn,y[v].id));return g._loadQueue(l),g},_loadQueue:function(l){var f=this;if(f._queue.length>0){var d=f._queue[0];d.event===l&&(f._queue.shift(),f._loadQueue()),l||d.action()}return f},_ended:function(l){var f=this,d=l._sprite;if(!f._webAudio&&l._node&&!l._node.paused&&!l._node.ended&&l._node.currentTime<l._stop)return setTimeout(f._ended.bind(f,l),100),f;var g=!!(l._loop||f._sprite[d][2]);if(f._emit("end",l._id),!f._webAudio&&g&&f.stop(l._id,!0).play(l._id),f._webAudio&&g){f._emit("play",l._id),l._seek=l._start||0,l._rateSeek=0,l._playStart=n.ctx.currentTime;var y=(l._stop-l._start)*1e3/Math.abs(l._rate);f._endTimers[l._id]=setTimeout(f._ended.bind(f,l),y)}return f._webAudio&&!g&&(l._paused=!0,l._ended=!0,l._seek=l._start||0,l._rateSeek=0,f._clearTimer(l._id),f._cleanBuffer(l._node),n._autoSuspend()),!f._webAudio&&!g&&f.stop(l._id,!0),f},_clearTimer:function(l){var f=this;if(f._endTimers[l]){if(typeof f._endTimers[l]!="function")clearTimeout(f._endTimers[l]);else{var d=f._soundById(l);d&&d._node&&d._node.removeEventListener("ended",f._endTimers[l],!1)}delete f._endTimers[l]}return f},_soundById:function(l){for(var f=this,d=0;d<f._sounds.length;d++)if(l===f._sounds[d]._id)return f._sounds[d];return null},_inactiveSound:function(){var l=this;l._drain();for(var f=0;f<l._sounds.length;f++)if(l._sounds[f]._ended)return l._sounds[f].reset();return new s(l)},_drain:function(){var l=this,f=l._pool,d=0,g=0;if(!(l._sounds.length<f)){for(g=0;g<l._sounds.length;g++)l._sounds[g]._ended&&d++;for(g=l._sounds.length-1;g>=0;g--){if(d<=f)return;l._sounds[g]._ended&&(l._webAudio&&l._sounds[g]._node&&l._sounds[g]._node.disconnect(0),l._sounds.splice(g,1),d--)}}},_getSoundIds:function(l){var f=this;if(typeof l>"u"){for(var d=[],g=0;g<f._sounds.length;g++)d.push(f._sounds[g]._id);return d}else return[l]},_refreshBuffer:function(l){var f=this;return l._node.bufferSource=n.ctx.createBufferSource(),l._node.bufferSource.buffer=i[f._src],l._panner?l._node.bufferSource.connect(l._panner):l._node.bufferSource.connect(l._node),l._node.bufferSource.loop=l._loop,l._loop&&(l._node.bufferSource.loopStart=l._start||0,l._node.bufferSource.loopEnd=l._stop||0),l._node.bufferSource.playbackRate.setValueAtTime(l._rate,n.ctx.currentTime),f},_cleanBuffer:function(l){var f=this,d=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&l.bufferSource&&(l.bufferSource.onended=null,l.bufferSource.disconnect(0),d))try{l.bufferSource.buffer=n._scratchBuffer}catch{}return l.bufferSource=null,f},_clearSound:function(l){var f=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);f||(l.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(l){this._parent=l,this.init()};s.prototype={init:function(){var l=this,f=l._parent;return l._muted=f._muted,l._loop=f._loop,l._volume=f._volume,l._rate=f._rate,l._seek=0,l._paused=!0,l._ended=!0,l._sprite="__default",l._id=++n._counter,f._sounds.push(l),l.create(),l},create:function(){var l=this,f=l._parent,d=n._muted||l._muted||l._parent._muted?0:l._volume;return f._webAudio?(l._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),l._node.gain.setValueAtTime(d,n.ctx.currentTime),l._node.paused=!0,l._node.connect(n.masterGain)):n.noAudio||(l._node=n._obtainHtml5Audio(),l._errorFn=l._errorListener.bind(l),l._node.addEventListener("error",l._errorFn,!1),l._loadFn=l._loadListener.bind(l),l._node.addEventListener(n._canPlayEvent,l._loadFn,!1),l._endFn=l._endListener.bind(l),l._node.addEventListener("ended",l._endFn,!1),l._node.src=f._src,l._node.preload=f._preload===!0?"auto":f._preload,l._node.volume=d*n.volume(),l._node.load()),l},reset:function(){var l=this,f=l._parent;return l._muted=f._muted,l._loop=f._loop,l._volume=f._volume,l._rate=f._rate,l._seek=0,l._rateSeek=0,l._paused=!0,l._ended=!0,l._sprite="__default",l._id=++n._counter,l},_errorListener:function(){var l=this;l._parent._emit("loaderror",l._id,l._node.error?l._node.error.code:0),l._node.removeEventListener("error",l._errorFn,!1)},_loadListener:function(){var l=this,f=l._parent;f._duration=Math.ceil(l._node.duration*10)/10,Object.keys(f._sprite).length===0&&(f._sprite={__default:[0,f._duration*1e3]}),f._state!=="loaded"&&(f._state="loaded",f._emit("load"),f._loadQueue()),l._node.removeEventListener(n._canPlayEvent,l._loadFn,!1)},_endListener:function(){var l=this,f=l._parent;f._duration===1/0&&(f._duration=Math.ceil(l._node.duration*10)/10,f._sprite.__default[1]===1/0&&(f._sprite.__default[1]=f._duration*1e3),f._ended(l)),l._node.removeEventListener("ended",l._endFn,!1)}};var i={},o=function(l){var f=l._src;if(i[f]){l._duration=i[f].duration,c(l);return}if(/^data:[^;]+;base64,/.test(f)){for(var d=atob(f.split(",")[1]),g=new Uint8Array(d.length),y=0;y<d.length;++y)g[y]=d.charCodeAt(y);u(g.buffer,l)}else{var v=new XMLHttpRequest;v.open(l._xhr.method,f,!0),v.withCredentials=l._xhr.withCredentials,v.responseType="arraybuffer",l._xhr.headers&&Object.keys(l._xhr.headers).forEach(function(p){v.setRequestHeader(p,l._xhr.headers[p])}),v.onload=function(){var p=(v.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){l._emit("loaderror",null,"Failed loading audio file with status: "+v.status+".");return}u(v.response,l)},v.onerror=function(){l._webAudio&&(l._html5=!0,l._webAudio=!1,l._sounds=[],delete i[f],l.load())},a(v)}},a=function(l){try{l.send()}catch{l.onerror()}},u=function(l,f){var d=function(){f._emit("loaderror",null,"Decoding audio data failed.")},g=function(y){y&&f._sounds.length>0?(i[f._src]=y,c(f,y)):d()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(l).then(g).catch(d):n.ctx.decodeAudioData(l,g,d)},c=function(l,f){f&&!l._duration&&(l._duration=f.duration),Object.keys(l._sprite).length===0&&(l._sprite={__default:[0,l._duration*1e3]}),l._state!=="loaded"&&(l._state="loaded",l._emit("load"),l._loadQueue())},h=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var l=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),f=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),d=f?parseInt(f[1],10):null;if(l&&d&&d<9){var g=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!g&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=r,typeof Ii<"u"?(Ii.HowlerGlobal=e,Ii.Howler=n,Ii.Howl=r,Ii.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=r,window.Sound=s)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var s=r._howls.length-1;s>=0;s--)r._howls[s].stereo(n);return r},HowlerGlobal.prototype.pos=function(n,r,s){var i=this;if(!i.ctx||!i.ctx.listener)return i;if(r=typeof r!="number"?i._pos[1]:r,s=typeof s!="number"?i._pos[2]:s,typeof n=="number")i._pos=[n,r,s],typeof i.ctx.listener.positionX<"u"?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]);else return i._pos;return i},HowlerGlobal.prototype.orientation=function(n,r,s,i,o,a){var u=this;if(!u.ctx||!u.ctx.listener)return u;var c=u._orientation;if(r=typeof r!="number"?c[1]:r,s=typeof s!="number"?c[2]:s,i=typeof i!="number"?c[3]:i,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof n=="number")u._orientation=[n,r,s,i,o,a],typeof u.ctx.listener.forwardX<"u"?(u.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(n,r,s,i,o,a);else return c;return u},Howl.prototype.init=function(n){return function(r){var s=this;return s._orientation=r.orientation||[1,0,0],s._stereo=r.stereo||null,s._pos=r.pos||null,s._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},s._onstereo=r.onstereo?[{fn:r.onstereo}]:[],s._onpos=r.onpos?[{fn:r.onpos}]:[],s._onorientation=r.onorientation?[{fn:r.onorientation}]:[],n.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,r){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(n,r)}}),s;var i=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof n=="number")s._stereo=n,s._pos=[n,0,0];else return s._stereo;for(var o=s._getSoundIds(r),a=0;a<o.length;a++){var u=s._soundById(o[a]);if(u)if(typeof n=="number")u._stereo=n,u._pos=[n,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&e(u,i),i==="spatial"?typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(n,0,0):u._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),s._emit("stereo",u._id);else return u._stereo}return s},Howl.prototype.pos=function(n,r,s,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,r,s,i)}}),o;if(r=typeof r!="number"?0:r,s=typeof s!="number"?-.5:s,typeof i>"u")if(typeof n=="number")o._pos=[n,r,s];else return o._pos;for(var a=o._getSoundIds(i),u=0;u<a.length;u++){var c=o._soundById(a[u]);if(c)if(typeof n=="number")c._pos=[n,r,s],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):c._panner.setPosition(n,r,s)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(n,r,s,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,r,s,i)}}),o;if(r=typeof r!="number"?o._orientation[1]:r,s=typeof s!="number"?o._orientation[2]:s,typeof i>"u")if(typeof n=="number")o._orientation=[n,r,s];else return o._orientation;for(var a=o._getSoundIds(i),u=0;u<a.length;u++){var c=o._soundById(a[u]);if(c)if(typeof n=="number")c._orientation=[n,r,s],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):c._panner.setOrientation(n,r,s)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,r=arguments,s,i,o;if(!n._webAudio)return n;if(r.length===0)return n._pannerAttr;if(r.length===1)if(typeof r[0]=="object")s=r[0],typeof i>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),n._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(r[0],10)),o?o._pannerAttr:n._pannerAttr;else r.length===2&&(s=r[0],i=parseInt(r[1],10));for(var a=n._getSoundIds(i),u=0;u<a.length;u++)if(o=n._soundById(a[u]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:c.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:c.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:c.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:c.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:c.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:c.panningModel};var h=o._panner;h?(h.coneInnerAngle=c.coneInnerAngle,h.coneOuterAngle=c.coneOuterAngle,h.coneOuterGain=c.coneOuterGain,h.distanceModel=c.distanceModel,h.maxDistance=c.maxDistance,h.refDistance=c.refDistance,h.rolloffFactor=c.rolloffFactor,h.panningModel=c.panningModel):(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"))}return n},Sound.prototype.init=function(n){return function(){var r=this,s=r._parent;r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,n.call(this),r._stereo?s.stereo(r._stereo):r._pos&&s.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var r=this,s=r._parent;return r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,r._stereo?s.stereo(r._stereo):r._pos?s.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,s._refreshBuffer(r)),n.call(this)}}(Sound.prototype.reset);var e=function(n,r){r=r||"spatial",r==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(Kc);const Rp={formatTime(t){const e=Math.floor(t/60)||0,n=Math.round(t-e*60||0);return`${e}:${n<10?"0":""}${n}`}},al=xf("player",{state:()=>({current_song:{},sound:{},seek:"00:00",duration:"00:00",playerProgress:"0%"}),actions:{async newSong(t){if(this.sound.playing&&this.sound.playing()){this.sound.pause(),this.sound.seek(0);return}this.sound instanceof Kc.Howl&&this.sound.unload(),this.current_song=t,this.sound=new Kc.Howl({src:[t.url],html5:!0}),this.sound.play(),this.sound.on("play",()=>{requestAnimationFrame(this.progress)})},async toggleAudio(){this.sound.playing&&(this.sound.playing()?this.sound.pause():this.sound.play())},progress(){this.seek=Rp.formatTime(this.sound.seek()),this.duration=Rp.formatTime(this.sound.duration()),this.playerProgress=`${this.sound.seek()/this.sound.duration()*100}%`,this.sound.playing()&&requestAnimationFrame(this.progress)},updateSeek(t){if(!this.sound.playing)return;const{x:e,width:n}=t.currentTarget.getBoundingClientRect(),s=(t.clientX-e)/n,i=this.sound.duration()*s;this.sound.seek(i),this.sound.once("seek",this.progress())}},getters:{playing:t=>t.sound.playing?t.sound.playing():!1}}),$L={name:"Player",methods:{...Sl(al,["toggleAudio","updateSeek"])},computed:{...xa(al,["playing","duration","seek","playerProgress","current_song"])}},VL={class:"fixed bottom-0 left-0 bg-white px-4 py-2 w-full"},BL={key:0,class:"text-center"},jL={class:"song-title font-bold"},HL={class:"song-artist"},qL={class:"flex flex-nowrap gap-4 items-center"},WL={class:"player-currenttime"},GL=D("i",{class:"fas fa-circle"},null,-1),KL=[GL],zL={class:"player-duration"};function YL(t,e,n,r,s,i){return Se(),Me("div",VL,[t.current_song.modified_name?(Se(),Me("div",BL,[D("span",jL,ae(t.current_song.modified_name),1),vr(" by "),D("span",HL,ae(t.current_song.display_name),1)])):js("",!0),D("div",qL,[D("button",{type:"button",onClick:e[0]||(e[0]=_t((...o)=>t.toggleAudio&&t.toggleAudio(...o),["prevent"]))},[D("i",{class:Lt(["fa text-gray-500 text-xl",{"fa-play":!t.playing,"fa-pause":t.playing}])},null,2)]),D("div",WL,ae(t.seek),1),D("div",{onClick:e[1]||(e[1]=_t((...o)=>t.updateSeek&&t.updateSeek(...o),["prevent"])),class:"w-full h-2 rounded bg-gray-200 relative cursor-pointer"},[D("span",{class:"absolute -top-2.5 -ml-2.5 text-gray-800 text-lg",style:Vs({left:t.playerProgress})},KL,4),D("span",{class:"block h-2 rounded bg-gradient-to-r from-green-500 to-green-400",style:Vs({width:t.playerProgress})},null,4)]),D("div",zL,ae(t.duration),1)])])}const XL=nn($L,[["render",YL]]);const QL={name:"App",components:{AppHeader:KN,Auth:UL,AppPlayer:XL},computed:{...D_(yi,["userLoggedIn"])},created(){fn().currentUser&&(this.userLoggedIn=!0)}};function JL(t,e,n,r,s,i){const o=Xe("app-header"),a=Xe("router-view"),u=Xe("app-player"),c=Xe("auth");return Se(),Me(ot,null,[oe(o),oe(a,null,{default:Vt(({Component:h})=>[oe(Df,{name:"fade",mode:"out-in"},{default:Vt(()=>[(Se(),ss(El(h)))]),_:2},1024)]),_:1}),oe(u),oe(c)],64)}const ZL=nn(QL,[["render",JL]]);/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const ks=typeof window<"u";function eD(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Pe=Object.assign;function Gu(t,e){const n={};for(const r in e){const s=e[r];n[r]=_n(s)?s.map(t):t(s)}return n}const Hi=()=>{},_n=Array.isArray,tD=/\/$/,nD=t=>t.replace(tD,"");function Ku(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let u=e.indexOf("?");return a<u&&a>=0&&(u=-1),u>-1&&(r=e.slice(0,u),i=e.slice(u+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=oD(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function rD(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Op(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function sD(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ti(e.matched[r],n.matched[s])&&fw(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ti(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function fw(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!iD(t[n],e[n]))return!1;return!0}function iD(t,e){return _n(t)?Np(t,e):_n(e)?Np(e,t):t===e}function Np(t,e){return _n(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function oD(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let s=n.length-1,i,o;for(i=0;i<r.length;i++)if(o=r[i],o!==".")if(o==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var _o;(function(t){t.pop="pop",t.push="push"})(_o||(_o={}));var qi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(qi||(qi={}));function aD(t){if(!t)if(ks){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),nD(t)}const lD=/^[^#]+#/;function uD(t,e){return t.replace(lD,"#")+e}function cD(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const fu=()=>({left:window.pageXOffset,top:window.pageYOffset});function fD(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=cD(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Lp(t,e){return(history.state?history.state.position-e:-1)+t}const zc=new Map;function hD(t,e){zc.set(t,e)}function dD(t){const e=zc.get(t);return zc.delete(t),e}let mD=()=>location.protocol+"//"+location.host;function hw(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,u=s.slice(a);return u[0]!=="/"&&(u="/"+u),Op(u,"")}return Op(n,t)+r+s}function pD(t,e,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const d=hw(t,location),g=n.value,y=e.value;let v=0;if(f){if(n.value=d,e.value=f,o&&o===g){o=null;return}v=y?f.position-y.position:0}else r(d);s.forEach(p=>{p(n.value,g,{delta:v,type:_o.pop,direction:v?v>0?qi.forward:qi.back:qi.unknown})})};function u(){o=n.value}function c(f){s.push(f);const d=()=>{const g=s.indexOf(f);g>-1&&s.splice(g,1)};return i.push(d),d}function h(){const{history:f}=window;f.state&&f.replaceState(Pe({},f.state,{scroll:fu()}),"")}function l(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h),{pauseListeners:u,listen:c,destroy:l}}function Dp(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?fu():null}}function gD(t){const{history:e,location:n}=window,r={value:hw(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(u,c,h){const l=t.indexOf("#"),f=l>-1?(n.host&&document.querySelector("base")?t:t.slice(l))+u:mD()+t+u;try{e[h?"replaceState":"pushState"](c,"",f),s.value=c}catch(d){console.error(d),n[h?"replace":"assign"](f)}}function o(u,c){const h=Pe({},e.state,Dp(s.value.back,u,s.value.forward,!0),c,{position:s.value.position});i(u,h,!0),r.value=u}function a(u,c){const h=Pe({},s.value,e.state,{forward:u,scroll:fu()});i(h.current,h,!0);const l=Pe({},Dp(r.value,u,null),{position:h.position+1},c);i(u,l,!1),r.value=u}return{location:r,state:s,push:a,replace:o}}function _D(t){t=aD(t);const e=gD(t),n=pD(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Pe({location:"",base:t,go:r,createHref:uD.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function yD(t){return typeof t=="string"||t&&typeof t=="object"}function dw(t){return typeof t=="string"||typeof t=="symbol"}const rr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},mw=Symbol("");var xp;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(xp||(xp={}));function ni(t,e){return Pe(new Error,{type:t,[mw]:!0},e)}function xn(t,e){return t instanceof Error&&mw in t&&(e==null||!!(t.type&e))}const Pp="[^/]+?",vD={sensitive:!1,strict:!1,start:!0,end:!0},bD=/[.+*?^${}()[\]/\\]/g;function wD(t,e){const n=Pe({},vD,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const h=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let l=0;l<c.length;l++){const f=c[l];let d=40+(n.sensitive?.25:0);if(f.type===0)l||(s+="/"),s+=f.value.replace(bD,"\\$&"),d+=40;else if(f.type===1){const{value:g,repeatable:y,optional:v,regexp:p}=f;i.push({name:g,repeatable:y,optional:v});const E=p||Pp;if(E!==Pp){d+=10;try{new RegExp(`(${E})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${g}" (${E}): `+w.message)}}let T=y?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;l||(T=v&&c.length<2?`(?:/${T})`:"/"+T),v&&(T+="?"),s+=T,d+=20,v&&(d+=-8),y&&(d+=-20),E===".*"&&(d+=-50)}h.push(d)}r.push(h)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const h=c.match(o),l={};if(!h)return null;for(let f=1;f<h.length;f++){const d=h[f]||"",g=i[f-1];l[g.name]=d&&g.repeatable?d.split("/"):d}return l}function u(c){let h="",l=!1;for(const f of t){(!l||!h.endsWith("/"))&&(h+="/"),l=!1;for(const d of f)if(d.type===0)h+=d.value;else if(d.type===1){const{value:g,repeatable:y,optional:v}=d,p=g in c?c[g]:"";if(_n(p)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const E=_n(p)?p.join("/"):p;if(!E)if(v)f.length<2&&(h.endsWith("/")?h=h.slice(0,-1):l=!0);else throw new Error(`Missing required param "${g}"`);h+=E}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:u}}function ED(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function TD(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=ED(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Mp(r))return 1;if(Mp(s))return-1}return s.length-r.length}function Mp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const ID={type:0,value:""},AD=/[a-zA-Z0-9_]/;function SD(t){if(!t)return[[]];if(t==="/")return[[ID]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,u,c="",h="";function l(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:h,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=u}for(;a<t.length;){if(u=t[a++],u==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:u==="/"?(c&&l(),o()):u===":"?(l(),n=1):f();break;case 4:f(),n=r;break;case 1:u==="("?n=2:AD.test(u)?f():(l(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--);break;case 2:u===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+u:n=3:h+=u;break;case 3:l(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),l(),o(),s}function kD(t,e,n){const r=wD(SD(t.path),n),s=Pe(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function CD(t,e){const n=[],r=new Map;e=$p({strict:!1,end:!0,sensitive:!1},e);function s(h){return r.get(h)}function i(h,l,f){const d=!f,g=RD(h);g.aliasOf=f&&f.record;const y=$p(e,h),v=[g];if("alias"in h){const T=typeof h.alias=="string"?[h.alias]:h.alias;for(const w of T)v.push(Pe({},g,{components:f?f.record.components:g.components,path:w,aliasOf:f?f.record:g}))}let p,E;for(const T of v){const{path:w}=T;if(l&&w[0]!=="/"){const S=l.record.path,N=S[S.length-1]==="/"?"":"/";T.path=l.record.path+(w&&N+w)}if(p=kD(T,l,y),f?f.alias.push(p):(E=E||p,E!==p&&E.alias.push(p),d&&h.name&&!Up(p)&&o(h.name)),g.children){const S=g.children;for(let N=0;N<S.length;N++)i(S[N],p,f&&f.children[N])}f=f||p,(p.record.components&&Object.keys(p.record.components).length||p.record.name||p.record.redirect)&&u(p)}return E?()=>{o(E)}:Hi}function o(h){if(dw(h)){const l=r.get(h);l&&(r.delete(h),n.splice(n.indexOf(l),1),l.children.forEach(o),l.alias.forEach(o))}else{const l=n.indexOf(h);l>-1&&(n.splice(l,1),h.record.name&&r.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function u(h){let l=0;for(;l<n.length&&TD(h,n[l])>=0&&(h.record.path!==n[l].record.path||!pw(h,n[l]));)l++;n.splice(l,0,h),h.record.name&&!Up(h)&&r.set(h.record.name,h)}function c(h,l){let f,d={},g,y;if("name"in h&&h.name){if(f=r.get(h.name),!f)throw ni(1,{location:h});y=f.record.name,d=Pe(Fp(l.params,f.keys.filter(E=>!E.optional).map(E=>E.name)),h.params&&Fp(h.params,f.keys.map(E=>E.name))),g=f.stringify(d)}else if("path"in h)g=h.path,f=n.find(E=>E.re.test(g)),f&&(d=f.parse(g),y=f.record.name);else{if(f=l.name?r.get(l.name):n.find(E=>E.re.test(l.path)),!f)throw ni(1,{location:h,currentLocation:l});y=f.record.name,d=Pe({},l.params,h.params),g=f.stringify(d)}const v=[];let p=f;for(;p;)v.unshift(p.record),p=p.parent;return{name:y,path:g,params:d,matched:v,meta:ND(v)}}return t.forEach(h=>i(h)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Fp(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function RD(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:OD(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function OD(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function Up(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ND(t){return t.reduce((e,n)=>Pe(e,n.meta),{})}function $p(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function pw(t,e){return e.children.some(n=>n===t||pw(t,n))}const gw=/#/g,LD=/&/g,DD=/\//g,xD=/=/g,PD=/\?/g,_w=/\+/g,MD=/%5B/g,FD=/%5D/g,yw=/%5E/g,UD=/%60/g,vw=/%7B/g,$D=/%7C/g,bw=/%7D/g,VD=/%20/g;function rd(t){return encodeURI(""+t).replace($D,"|").replace(MD,"[").replace(FD,"]")}function BD(t){return rd(t).replace(vw,"{").replace(bw,"}").replace(yw,"^")}function Yc(t){return rd(t).replace(_w,"%2B").replace(VD,"+").replace(gw,"%23").replace(LD,"%26").replace(UD,"`").replace(vw,"{").replace(bw,"}").replace(yw,"^")}function jD(t){return Yc(t).replace(xD,"%3D")}function HD(t){return rd(t).replace(gw,"%23").replace(PD,"%3F")}function qD(t){return t==null?"":HD(t).replace(DD,"%2F")}function ll(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function WD(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(_w," "),o=i.indexOf("="),a=ll(o<0?i:i.slice(0,o)),u=o<0?null:ll(i.slice(o+1));if(a in e){let c=e[a];_n(c)||(c=e[a]=[c]),c.push(u)}else e[a]=u}return e}function Vp(t){let e="";for(let n in t){const r=t[n];if(n=jD(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(_n(r)?r.map(i=>i&&Yc(i)):[r&&Yc(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function GD(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=_n(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const KD=Symbol(""),Bp=Symbol(""),sd=Symbol(""),ww=Symbol(""),Xc=Symbol("");function Ai(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function ur(t,e,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const u=l=>{l===!1?a(ni(4,{from:n,to:e})):l instanceof Error?a(l):yD(l)?a(ni(2,{from:e,to:l})):(i&&r.enterCallbacks[s]===i&&typeof l=="function"&&i.push(l),o())},c=t.call(r&&r.instances[s],e,n,u);let h=Promise.resolve(c);t.length<3&&(h=h.then(u)),h.catch(l=>a(l))})}function zu(t,e,n,r){const s=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(zD(a)){const c=(a.__vccOpts||a)[e];c&&s.push(ur(c,n,r,i,o))}else{let u=a();s.push(()=>u.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const h=eD(c)?c.default:c;i.components[o]=h;const f=(h.__vccOpts||h)[e];return f&&ur(f,n,r,i,o)()}))}}return s}function zD(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function jp(t){const e=Zt(sd),n=Zt(ww),r=Ee(()=>e.resolve(J(t.to))),s=Ee(()=>{const{matched:u}=r.value,{length:c}=u,h=u[c-1],l=n.matched;if(!h||!l.length)return-1;const f=l.findIndex(ti.bind(null,h));if(f>-1)return f;const d=Hp(u[c-2]);return c>1&&Hp(h)===d&&l[l.length-1].path!==d?l.findIndex(ti.bind(null,u[c-2])):f}),i=Ee(()=>s.value>-1&&JD(n.params,r.value.params)),o=Ee(()=>s.value>-1&&s.value===n.matched.length-1&&fw(n.params,r.value.params));function a(u={}){return QD(u)?e[J(t.replace)?"replace":"push"](J(t.to)).catch(Hi):Promise.resolve()}return{route:r,href:Ee(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const YD=li({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:jp,setup(t,{slots:e}){const n=Xn(jp(t)),{options:r}=Zt(sd),s=Ee(()=>({[qp(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[qp(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:qn("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),XD=YD;function QD(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function JD(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!_n(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Hp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const qp=(t,e,n)=>t??e??n,ZD=li({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Zt(Xc),s=Ee(()=>t.route||r.value),i=Zt(Bp,0),o=Ee(()=>{let c=J(i);const{matched:h}=s.value;let l;for(;(l=h[c])&&!l.components;)c++;return c}),a=Ee(()=>s.value.matched[o.value]);Ps(Bp,Ee(()=>o.value+1)),Ps(KD,a),Ps(Xc,s);const u=Ye();return lt(()=>[u.value,a.value,t.name],([c,h,l],[f,d,g])=>{h&&(h.instances[l]=c,d&&d!==h&&c&&c===f&&(h.leaveGuards.size||(h.leaveGuards=d.leaveGuards),h.updateGuards.size||(h.updateGuards=d.updateGuards))),c&&h&&(!d||!ti(h,d)||!f)&&(h.enterCallbacks[l]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=s.value,h=t.name,l=a.value,f=l&&l.components[h];if(!f)return Wp(n.default,{Component:f,route:c});const d=l.props[h],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,v=qn(f,Pe({},g,e,{onVnodeUnmounted:p=>{p.component.isUnmounted&&(l.instances[h]=null)},ref:u}));return Wp(n.default,{Component:v,route:c})||v}}});function Wp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const ex=ZD;function tx(t){const e=CD(t.routes,t),n=t.parseQuery||WD,r=t.stringifyQuery||Vp,s=t.history,i=Ai(),o=Ai(),a=Ai(),u=Qg(rr);let c=rr;ks&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Gu.bind(null,$=>""+$),l=Gu.bind(null,qD),f=Gu.bind(null,ll);function d($,x){let V,K;return dw($)?(V=e.getRecordMatcher($),K=x):K=$,e.addRoute(K,V)}function g($){const x=e.getRecordMatcher($);x&&e.removeRoute(x)}function y(){return e.getRoutes().map($=>$.record)}function v($){return!!e.getRecordMatcher($)}function p($,x){if(x=Pe({},x||u.value),typeof $=="string"){const b=Ku(n,$,x.path),m=e.resolve({path:b.path},x),_=s.createHref(b.fullPath);return Pe(b,m,{params:f(m.params),hash:ll(b.hash),redirectedFrom:void 0,href:_})}let V;if("path"in $)V=Pe({},$,{path:Ku(n,$.path,x.path).path});else{const b=Pe({},$.params);for(const m in b)b[m]==null&&delete b[m];V=Pe({},$,{params:l($.params)}),x.params=l(x.params)}const K=e.resolve(V,x),de=$.hash||"";K.params=h(f(K.params));const Ie=rD(r,Pe({},$,{hash:BD(de),path:K.path})),ie=s.createHref(Ie);return Pe({fullPath:Ie,hash:de,query:r===Vp?GD($.query):$.query||{}},K,{redirectedFrom:void 0,href:ie})}function E($){return typeof $=="string"?Ku(n,$,u.value.path):Pe({},$)}function T($,x){if(c!==$)return ni(8,{from:x,to:$})}function w($){return L($)}function S($){return w(Pe(E($),{replace:!0}))}function N($){const x=$.matched[$.matched.length-1];if(x&&x.redirect){const{redirect:V}=x;let K=typeof V=="function"?V($):V;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=E(K):{path:K},K.params={}),Pe({query:$.query,hash:$.hash,params:"path"in K?{}:$.params},K)}}function L($,x){const V=c=p($),K=u.value,de=$.state,Ie=$.force,ie=$.replace===!0,b=N(V);if(b)return L(Pe(E(b),{state:typeof b=="object"?Pe({},de,b.state):de,force:Ie,replace:ie}),x||V);const m=V;m.redirectedFrom=x;let _;return!Ie&&sD(r,K,V)&&(_=ni(16,{to:m,from:K}),Ze(K,K,!0,!1)),(_?Promise.resolve(_):F(m,K)).catch(I=>xn(I)?xn(I,2)?I:Ke(I):se(I,m,K)).then(I=>{if(I){if(xn(I,2))return L(Pe({replace:ie},E(I.to),{state:typeof I.to=="object"?Pe({},de,I.to.state):de,force:Ie}),x||m)}else I=Z(m,K,!0,ie,de);return Q(m,K,I),I})}function P($,x){const V=T($,x);return V?Promise.reject(V):Promise.resolve()}function F($,x){let V;const[K,de,Ie]=nx($,x);V=zu(K.reverse(),"beforeRouteLeave",$,x);for(const b of K)b.leaveGuards.forEach(m=>{V.push(ur(m,$,x))});const ie=P.bind(null,$,x);return V.push(ie),Is(V).then(()=>{V=[];for(const b of i.list())V.push(ur(b,$,x));return V.push(ie),Is(V)}).then(()=>{V=zu(de,"beforeRouteUpdate",$,x);for(const b of de)b.updateGuards.forEach(m=>{V.push(ur(m,$,x))});return V.push(ie),Is(V)}).then(()=>{V=[];for(const b of $.matched)if(b.beforeEnter&&!x.matched.includes(b))if(_n(b.beforeEnter))for(const m of b.beforeEnter)V.push(ur(m,$,x));else V.push(ur(b.beforeEnter,$,x));return V.push(ie),Is(V)}).then(()=>($.matched.forEach(b=>b.enterCallbacks={}),V=zu(Ie,"beforeRouteEnter",$,x),V.push(ie),Is(V))).then(()=>{V=[];for(const b of o.list())V.push(ur(b,$,x));return V.push(ie),Is(V)}).catch(b=>xn(b,8)?b:Promise.reject(b))}function Q($,x,V){for(const K of a.list())K($,x,V)}function Z($,x,V,K,de){const Ie=T($,x);if(Ie)return Ie;const ie=x===rr,b=ks?history.state:{};V&&(K||ie?s.replace($.fullPath,Pe({scroll:ie&&b&&b.scroll},de)):s.push($.fullPath,de)),u.value=$,Ze($,x,V,ie),Ke()}let W;function te(){W||(W=s.listen(($,x,V)=>{if(!rt.listening)return;const K=p($),de=N(K);if(de){L(Pe(de,{replace:!0}),K).catch(Hi);return}c=K;const Ie=u.value;ks&&hD(Lp(Ie.fullPath,V.delta),fu()),F(K,Ie).catch(ie=>xn(ie,12)?ie:xn(ie,2)?(L(ie.to,K).then(b=>{xn(b,20)&&!V.delta&&V.type===_o.pop&&s.go(-1,!1)}).catch(Hi),Promise.reject()):(V.delta&&s.go(-V.delta,!1),se(ie,K,Ie))).then(ie=>{ie=ie||Z(K,Ie,!1),ie&&(V.delta&&!xn(ie,8)?s.go(-V.delta,!1):V.type===_o.pop&&xn(ie,20)&&s.go(-1,!1)),Q(K,Ie,ie)}).catch(Hi)}))}let ce=Ai(),Te=Ai(),le;function se($,x,V){Ke($);const K=Te.list();return K.length?K.forEach(de=>de($,x,V)):console.error($),Promise.reject($)}function pe(){return le&&u.value!==rr?Promise.resolve():new Promise(($,x)=>{ce.add([$,x])})}function Ke($){return le||(le=!$,te(),ce.list().forEach(([x,V])=>$?V($):x()),ce.reset()),$}function Ze($,x,V,K){const{scrollBehavior:de}=t;if(!ks||!de)return Promise.resolve();const Ie=!V&&dD(Lp($.fullPath,0))||(K||!V)&&history.state&&history.state.scroll||null;return pr().then(()=>de($,x,Ie)).then(ie=>ie&&fD(ie)).catch(ie=>se(ie,$,x))}const qe=$=>s.go($);let Fe;const Et=new Set,rt={currentRoute:u,listening:!0,addRoute:d,removeRoute:g,hasRoute:v,getRoutes:y,resolve:p,options:t,push:w,replace:S,go:qe,back:()=>qe(-1),forward:()=>qe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Te.add,isReady:pe,install($){const x=this;$.component("RouterLink",XD),$.component("RouterView",ex),$.config.globalProperties.$router=x,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>J(u)}),ks&&!Fe&&u.value===rr&&(Fe=!0,w(s.location).catch(de=>{}));const V={};for(const de in rr)V[de]=Ee(()=>u.value[de]);$.provide(sd,x),$.provide(ww,Xn(V)),$.provide(Xc,u);const K=$.unmount;Et.add($),$.unmount=function(){Et.delete($),Et.size<1&&(c=rr,W&&W(),W=null,u.value=rr,Fe=!1,le=!1),K()}}};return rt}function Is(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function nx(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>ti(c,a))?r.push(a):n.push(a));const u=t.matched[o];u&&(e.matched.find(c=>ti(c,u))||s.push(u))}return[n,r,s]}const rx={name:"SongItem",props:["song"]},sx={class:"flex justify-between items-center p-3 pl-6 cursor-pointer transition duration-300 hover:bg-gray-50"},ix={class:"text-gray-500 text-sm"},ox={class:"text-gray-600 text-lg"},ax=["onClick"],lx=D("i",{class:"fa fa-comments text-gray-600"},null,-1);function ux(t,e,n,r,s,i){const o=Xe("router-link");return Se(),Me("li",sx,[D("div",null,[oe(o,{to:{name:"song",params:{id:n.song.docID}},class:"font-bold block text-gray-600"},{default:Vt(()=>[vr(ae(n.song.modified_name),1)]),_:1},8,["to"]),D("span",ix,ae(n.song.display_name),1)]),D("div",ox,[oe(o,{custom:"",to:{name:"song",params:{id:n.song.docID},hash:"#comments"}},{default:Vt(({navigate:a})=>[D("span",{class:"comments",onClick:a},[lx,vr(" "+ae(n.song.comment_count),1)],8,ax)]),_:1},8,["to"])])])}const cx=nn(rx,[["render",ux]]),fx={beforeMount(t,e){let n=`fa fa-${e.value.icon} text-green-400 text-2xl`;e.value.right&&(n+=" float-right"),t.innerHTML+=`<i class="${n}"></i>`}},hx="/assets/img/introduction-music.png",dx={name:"Home",directives:{"icon-secondary":fx},data(){return{songs:[],maxPerPage:1,pendingRequest:!1}},components:{AppSongItem:cx},async created(){this.getSongs(),window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){const{scrollTop:t,offsetHeight:e}=document.documentElement,{innerHeight:n}=window;Math.round(t)+n===e&&this.getSongs()},async getSongs(){if(this.pendingRequest)return;this.pendingRequest=!0;let t;if(this.songs.length){const e=await Xh(fs(ds,"songs",this.songs[this.songs.length-1].docID));t=await il(sl(ei,yp("modified_name"),dO(e),vp(this.maxPerPage)))}else t=await il(sl(ei,yp("modified_name"),vp(this.maxPerPage)));t.forEach(e=>{this.songs.push({docID:e.id,...e.data()})}),this.pendingRequest=!1}}},mx={class:"mb-8 py-20 text-white text-center relative"},px=D("div",{class:"absolute inset-0 w-full h-full bg-contain introduction-bg",style:{"background-image":"url(assets/img/header.png)"}},null,-1),gx={class:"container mx-auto"},_x={class:"text-white main-header-content"},yx={class:"font-bold text-5xl mb-5"},vx={class:"w-full md:w-8/12 mx-auto"},bx=D("img",{class:"relative block mx-auto mt-5 -mb-20 w-auto max-w-full",src:hx},null,-1),wx={class:"container mx-auto"},Ex={class:"bg-white rounded border border-gray-200 relative flex flex-col"},Tx={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},Ix={class:"card-title"},Ax={id:"playlist"};function Sx(t,e,n,r,s,i){const o=Xe("app-song-item"),a=CE("icon-secondary");return Se(),Me("main",null,[D("section",mx,[px,D("div",gx,[D("div",_x,[D("h1",yx,ae(t.$t("home.listen")),1),D("p",vx,ae(t.$t("home.music")),1)])]),bx]),D("section",wx,[D("div",Ex,[Na((Se(),Me("div",Tx,[D("span",Ix,ae(t.$t("home.songs")),1)])),[[a,{icon:"headphones-alt",right:!0}]]),D("ol",Ax,[(Se(!0),Me(ot,null,wo(s.songs,u=>(Se(),ss(o,{key:u.docID,song:u},null,8,["song"]))),128))])])])])}const kx=nn(dx,[["render",Sx]]),Cx={name:"About"},Rx={class:"about"};function Ox(t,e,n,r,s,i){return Se(),Me("div",Rx,[D("h1",null,ae(t.$t("about.message")),1)])}const Nx=nn(Cx,[["render",Ox]]),Lx={name:"Upload",data(){return{is_dragover:!1,uploads:[]}},props:["addSong"],methods:{upload(t){this.is_dragover=!1,(t.dataTransfer?[...t.dataTransfer.files]:[...t.target.files]).forEach(n=>{const r=lw(cw,`songs/${n.name}`),s=NN(r,n),i=this.uploads.push({task:s,current_progress:0,name:n.name,variant:"bg-blue-400",icon:"fas fa-spinner fa-spin",text_class:""})-1;s.on("state_changed",o=>{const a=o.bytesTransferred/o.totalBytes*100;this.uploads[i].current_progress=a},o=>{this.uploads[i].variant="bg-red-400",this.uploads[i].icon="fas fa-times",this.uploads[i].text_class="text-red-400",console.log(o)},async()=>{const o={uid:fn().currentUser.uid,display_name:fn().currentUser.displayName,original_name:s.snapshot.ref.name,modified_name:s.snapshot.ref.name,genre:"",comment_count:0};o.url=await LN(s.snapshot.ref);const a=await jb(ei,o),u=await Xh(a);this.addSong(u),this.uploads[i].variant="bg-green-400",this.uploads[i].icon="fas fa-check",this.uploads[i].text_class="text-green-400"})})},cancelUploads(){this.uploads.forEach(t=>{t.task.cancel()})}}},Dx={class:"bg-white rounded border border-gray-200 relative flex flex-col"},xx={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},Px={class:"card-title"},Mx=D("i",{class:"fas fa-upload float-right text-green-400 text-2xl"},null,-1),Fx={class:"p-6"},Ux=D("hr",{class:"my-6"},null,-1),$x={class:"flex h-4 overflow-hidden bg-gray-200 rounded"};function Vx(t,e,n,r,s,i){return Se(),Me("div",Dx,[D("div",xx,[D("span",Px,ae(t.$t("upload.upload")),1),Mx]),D("div",Fx,[D("div",{class:Lt(["w-full px-10 py-20 rounded text-center cursor-pointer border border-dashed border-gray-400 text-gray-400 transition duration-500 hover:text-white hover:bg-green-400 hover:border-green-400 hover:border-solid",{"bg-green-400 border-green-400 border-solid":s.is_dragover}]),onDrag:e[0]||(e[0]=_t(()=>{},["prevent","stop"])),onDragstart:e[1]||(e[1]=_t(()=>{},["prevent","stop"])),onDragend:e[2]||(e[2]=_t(o=>s.is_dragover=!1,["prevent","stop"])),onDragover:e[3]||(e[3]=_t(o=>s.is_dragover=!0,["prevent","stop"])),onDragenter:e[4]||(e[4]=_t(o=>s.is_dragover=!0,["prevent","stop"])),onDragleave:e[5]||(e[5]=_t(o=>s.is_dragover=!1,["prevent","stop"])),onDrop:e[6]||(e[6]=_t(o=>i.upload(o),["prevent","stop"]))},[D("h5",null,ae(t.$t("upload.drop")),1)],34),D("input",{type:"file",multiple:"",onChange:e[7]||(e[7]=o=>i.upload(o))},null,32),Ux,(Se(!0),Me(ot,null,wo(s.uploads,o=>(Se(),Me("div",{class:"mb-4",key:o.name},[D("div",{class:Lt(["font-bold text-sm",o.text_class])},[D("i",{class:Lt(o.icon)},null,2),vr(" "+ae(o.name),1)],2),D("div",$x,[D("div",{class:Lt(["transition-all progress-bar",o.variant]),style:Vs({width:o.current_progress+"%"})},null,6)])]))),128))])])}const Bx=nn(Lx,[["render",Vx]]),jx={name:"CompositionItem",props:{song:{type:Object,required:!0},updateSong:{type:Function,required:!0},index:{type:Number,required:!0},removeSong:{type:Function,required:!0},updateUnsavedFlag:{type:Function}},data(){return{showForm:!1,schema:{modified_name:"required",genre:"alphaSpaces"},in_submission:!1,show_alert:!1,alert_variant:"bg-blue-500",alert_message:"Please wait! Updating the song info."}},methods:{async edit(t){this.in_submission=!0,this.show_alert=!0,this.alert_variant="bg-blue-500",this.alert_message="Please wait! Updating the song info.";const e=fs(ds,"songs",this.song.docID);try{await Bb(e,t)}catch{this.in_submission=!1,this.alert_variant="bg-red-500",this.alert_message="Something went wrong! Try again later";return}this.updateSong(this.index,t),this.updateUnsavedFlag(!1),this.in_submission=!1,this.alert_variant="bg-green-500",this.alert_message="Success!"},async deleteSong(){const t=lw(cw,`songs/${this.song.original_name}`);await DN(t),await vO(fs(ds,"songs",this.song.docID)),this.removeSong(this.index)}}},Hx={class:"border border-gray-200 p-3 mb-4 rounded"},qx={class:"inline-block text-2xl font-bold"},Wx=D("i",{class:"fa fa-times"},null,-1),Gx=[Wx],Kx=D("i",{class:"fa fa-pencil-alt"},null,-1),zx=[Kx],Yx={class:"mb-3"},Xx={class:"inline-block mb-2"},Qx={class:"mb-3"},Jx={class:"inline-block mb-2"},Zx=["disabled"],eP=["disabled"];function tP(t,e,n,r,s,i){const o=Xe("vee-field"),a=Xe("ErrorMessage"),u=Xe("vee-form");return Se(),Me("div",Hx,[Na(D("div",null,[D("h4",qx,ae(n.song.modified_name),1),D("button",{class:"ml-1 py-1 px-2 text-sm rounded text-white bg-red-600 float-right",onClick:e[0]||(e[0]=_t((...c)=>i.deleteSong&&i.deleteSong(...c),["prevent"]))},Gx),D("button",{class:"ml-1 py-1 px-2 text-sm rounded text-white bg-blue-600 float-right",onClick:e[1]||(e[1]=_t(c=>s.showForm=!s.showForm,["prevent"]))},zx)],512),[[tm,!s.showForm]]),Na(D("div",null,[s.show_alert?(Se(),Me("div",{key:0,class:Lt(["text-white text-center font-bold p-4 mb-4",s.alert_variant])},ae(s.alert_message),3)):js("",!0),oe(u,{"validation-schema":s.schema,"initial-values":n.song,onSubmit:i.edit},{default:Vt(()=>[D("div",Yx,[D("label",Xx,ae(t.$t("composition_item.song_title")),1),oe(o,{type:"text",name:"modified_name",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Song Title",onInput:e[2]||(e[2]=c=>n.updateUnsavedFlag(!0))}),oe(a,{class:"text-red-600",name:"modified_name"})]),D("div",Qx,[D("label",Jx,ae(t.$t("composition_item.genre")),1),oe(o,{type:"text",name:"genre",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Genre",onInput:e[3]||(e[3]=c=>n.updateUnsavedFlag(!0))}),oe(a,{class:"text-red-600",name:"genre"})]),D("button",{type:"submit",class:"py-1.5 px-3 rounded text-white bg-green-600",disabled:s.in_submission},ae(t.$t("composition_item.submit")),9,Zx),D("button",{type:"button",class:"py-1.5 px-3 rounded text-white bg-gray-600",disabled:s.in_submission,onClick:e[4]||(e[4]=_t(c=>s.showForm=!1,["prevent"]))},ae(t.$t("composition_item.goback")),9,eP)]),_:1},8,["validation-schema","initial-values","onSubmit"])],512),[[tm,s.showForm]])])}const nP=nn(jx,[["render",tP]]),rP={name:"manage",components:{AppUpload:Bx,CompositionItem:nP},data(){return{songs:[]}},async created(){(await il(sl(ei,Pb("uid","==",fn().currentUser.uid)))).forEach(this.addSong)},beforeRouteLeave(t,e,n){if(!this.updateUnsavedFlag)n();else{const r=confirm("You have unsaved changes. Are you sure you want to leave?");this.$refs.upload.cancelUploads(),n(r)}},methods:{updateSong(t,e){this.songs[t].modified_name=e.modified_name,this.songs[t].genre=e.genre},removeSong(t){this.songs.splice(t,1)},addSong(t){const e={...t.data(),docID:t.id};this.songs.push(e)},updateUnsavedFlag(t){this.updateUnsavedFlag=t}}},sP={class:"container mx-auto mt-6"},iP={class:"md:grid md:grid-cols-3 md:gap-4"},oP={class:"col-span-1"},aP={class:"col-span-2"},lP={class:"bg-white rounded border border-gray-200 relative flex flex-col"},uP={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},cP={class:"card-title"},fP=D("i",{class:"fa fa-compact-disc float-right text-green-400 text-2xl"},null,-1),hP={class:"p-6"};function dP(t,e,n,r,s,i){const o=Xe("app-upload"),a=Xe("composition-item");return Se(),Me("section",sP,[D("div",iP,[D("div",oP,[oe(o,{ref:"upload",addSong:i.addSong},null,8,["addSong"])]),D("div",aP,[D("div",lP,[D("div",uP,[D("span",cP,ae(t.$t("manage.my_songs")),1),fP]),D("div",hP,[(Se(!0),Me(ot,null,wo(s.songs,(u,c)=>(Se(),ss(a,{key:u.docID,song:u,updateSong:i.updateSong,index:c,removeSong:i.removeSong,updateUnsavedFlag:i.updateUnsavedFlag},null,8,["song","updateSong","index","removeSong","updateUnsavedFlag"]))),128))])])])])])}const mP=nn(rP,[["render",dP]]),pP={name:"Song",data(){return{song:{},schema:{comment:"required|min:3"},comment_in_submission:!1,comment_show_alert:!1,comment_alert_variant:"bg-blue-500",comment_alert_message:"Please wait! Your comment is being submitted.",comments:[],sort:"1"}},computed:{...xa(yi,["userLoggedIn"]),...xa(al,["playing"]),sortedComments(){return this.comments.slice().sort((t,e)=>this.sort==="1"?new Date(e.datePost)-new Date(t.datePost):new Date(t.datePost)-new Date(e.datePost))}},async created(){const t=fs(ei,this.$route.params.id),e=await Xh(t);if(!e.exists()){this.$router.push({name:"home"});return}const{sort:n}=this.$route.query;this.sort=n==="1"||n==="2"?n:"1",this.song=e.data(),this.getComments()},methods:{...Sl(al,["newSong"]),async addComment(t,{resetForm:e}){this.comment_in_submission=!0,this.comment_show_alert=!0,this.comment_alert_variant="bg-blue-500",this.comment_alert_message="Please wait! Your comment is being submitted";const n={content:t.comment,datePost:new Date().toString(),sid:this.$route.params.id,name:fn().currentUser.displayName,uid:fn().currentUser.uid};await jb(Cp,n),this.song.comment_count+=1;const r=fs(ei,this.$route.params.id);await Bb(r,{comment_count:this.song.comment_count}),this.getComments(),this.comment_in_submission=!1,this.comment_alert_variant="bg-green-500",this.comment_alert_message="Comment added!",e()},async getComments(){const t=sl(Cp,Pb("sid","==",this.$route.params.id)),e=await il(t);this.comments=[],e.forEach(n=>{this.comments.push({docID:n.id,...n.data()})})}},watch:{sort(t){t!==this.$route.query.sort&&this.$router.push({query:{sort:t}})}}},gP={class:"w-full mb-8 py-14 text-center text-white relative"},_P=D("div",{class:"absolute inset-0 w-full h-full box-border bg-contain music-bg",style:{"background-image":"url(/assets/img/song-header.png)"}},null,-1),yP={class:"container mx-auto flex items-center"},vP={class:"z-50 text-left ml-8"},bP={class:"text-3xl font-bold"},wP={class:"song-price"},EP={class:"container mx-auto mt-6",id:"comments"},TP={class:"bg-white rounded border border-gray-200 relative flex flex-col"},IP={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},AP={class:"card-title"},SP=D("i",{class:"fa fa-comments float-right text-green-400 text-2xl"},null,-1),kP={class:"p-6"},CP=["disable"],RP={value:"1"},OP={value:"2"},NP={class:"container mx-auto"},LP={class:"mb-5"},DP={class:"font-bold"};function xP(t,e,n,r,s,i){const o=Xe("vee-field"),a=Xe("ErrorMessage"),u=Xe("vee-form");return Se(),Me("main",null,[D("section",gP,[_P,D("div",yP,[D("button",{onClick:e[0]||(e[0]=_t(c=>t.newSong(s.song),["prevent"])),type:"button",class:"z-50 h-24 w-24 text-3xl bg-white text-black rounded-full focus:outline-none"},[D("i",{class:Lt(["fas",{"fa-play":!t.playing,"fa-stop":t.playing}])},null,2)]),D("div",vP,[D("div",bP,ae(s.song.modified_name),1),D("div",null,ae(s.song.genre),1),D("div",wP,ae(t.$n(1,"currency","cn")),1)])])]),D("section",EP,[D("div",TP,[D("div",IP,[D("span",AP,ae(t.$tc("song.comment_count",s.song.comment_count,{count:s.song.comment_count})),1),SP]),D("div",kP,[s.comment_show_alert?(Se(),Me("div",{key:0,class:Lt(["text-white text-center font-blod p-4 mb-4",s.comment_alert_variant])},ae(s.comment_alert_message),3)):js("",!0),t.userLoggedIn?(Se(),ss(u,{key:1,"validation-schema":s.schema,onSubmit:i.addComment},{default:Vt(()=>[oe(o,{as:"textarea",name:"comment",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded mb-4",placeholder:"Your comment here..."}),oe(a,{class:"text-red-600",name:"comment"}),D("button",{type:"submit",class:"py-1.5 px-3 rounded text-white bg-green-600 block",disable:s.comment_in_submission},ae(t.$t("song.submit")),9,CP)]),_:1},8,["validation-schema","onSubmit"])):js("",!0),Na(D("select",{"onUpdate:modelValue":e[1]||(e[1]=c=>s.sort=c),class:"block mt-4 py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"},[D("option",RP,ae(t.$t("song.sort_comment_latest")),1),D("option",OP,ae(t.$t("song.sort_comment_oldest")),1)],512),[[CT,s.sort]])])])]),D("ul",NP,[(Se(!0),Me(ot,null,wo(i.sortedComments,c=>(Se(),Me("li",{class:"p-6 bg-gray-50 border border-gray-200",key:c.docID},[D("div",LP,[D("div",DP,ae(c.name),1),D("time",null,ae(c.datePost),1)]),D("p",null,ae(c.content),1)]))),128))])])}const PP=nn(pP,[["render",xP]]),MP=[{name:"home",path:"/",component:kx},{name:"about",path:"/about",component:Nx},{name:"manage",path:"/manage-music",component:mP,beforeEnter:(t,e,n)=>{console.log("Manage Route Guard"),n()},meta:{requiresAuth:!0}},{path:"/manage",redirect:{name:"manage"}},{name:"song",path:"/song/:id",component:PP},{path:"/:catchAll(.*)*",redirect:{name:"home"}}],Ew=tx({history:_D("/"),routes:MP,linkExactActiveClass:"text-yellow-500"});Ew.beforeEach((t,e,n)=>{if(!t.meta.requiresAuth){n();return}yi().userLoggedIn?n():n({name:"home"})});/**
  * vee-validate v4.7.3
  * (c) 2022 Abdelrahman Awad
  * @license MIT
  */function ms(t){return typeof t=="function"}function Wi(t){return t==null}const ps=t=>t!==null&&!!t&&typeof t=="object"&&!Array.isArray(t);function Tw(t){return Number(t)>=0}function FP(t){const e=parseFloat(t);return isNaN(e)?t:e}const Iw={};function ln(t,e){$P(t,e),Iw[t]=e}function UP(t){return Iw[t]}function $P(t,e){if(!ms(e))throw new Error(`Extension Error: The validator '${t}' must be a function.`)}const Yo=Symbol("vee-validate-form"),VP=Symbol("vee-validate-field-instance"),ul=Symbol("Default empty value"),BP=typeof window<"u";function Qc(t){return ms(t)&&!!t.__locatorRef}function Gi(t){return!!t&&ms(t.validate)}function ri(t){return t==="checkbox"||t==="radio"}function jP(t){return ps(t)||Array.isArray(t)}function Aw(t){return Array.isArray(t)?t.length===0:ps(t)&&Object.keys(t).length===0}function hu(t){return/^\[.+\]$/i.test(t)}function HP(t){return Sw(t)&&t.multiple}function Sw(t){return t.tagName==="SELECT"}function qP(t,e){const n=![!1,null,void 0,0].includes(e.multiple)&&!Number.isNaN(e.multiple);return t==="select"&&"multiple"in e&&n}function WP(t,e){return!qP(t,e)&&e.type!=="file"&&!ri(e.type)}function kw(t){return id(t)&&t.target&&"submit"in t.target}function id(t){return t?!!(typeof Event<"u"&&ms(Event)&&t instanceof Event||t&&t.srcElement):!1}function Gp(t,e){return e in t&&t[e]!==ul}function vt(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!vt(t[r],e[r]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(r of t.entries())if(!e.has(r[0]))return!1;for(r of t.entries())if(!vt(r[1],e.get(r[0])))return!1;return!0}if(Kp(t)&&Kp(e))return!(t.size!==e.size||t.name!==e.name||t.lastModified!==e.lastModified||t.type!==e.type);if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(r of t.entries())if(!e.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){var i=s[r];if(!vt(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Kp(t){return BP?t instanceof File:!1}function zp(t,e,n){typeof n.value=="object"&&(n.value=Ge(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||e==="__proto__"?Object.defineProperty(t,e,n):t[e]=n.value}function Ge(t){if(typeof t!="object")return t;var e=0,n,r,s,i=Object.prototype.toString.call(t);if(i==="[object Object]"?s=Object.create(t.__proto__||null):i==="[object Array]"?s=Array(t.length):i==="[object Set]"?(s=new Set,t.forEach(function(o){s.add(Ge(o))})):i==="[object Map]"?(s=new Map,t.forEach(function(o,a){s.set(Ge(a),Ge(o))})):i==="[object Date]"?s=new Date(+t):i==="[object RegExp]"?s=new RegExp(t.source,t.flags):i==="[object DataView]"?s=new t.constructor(Ge(t.buffer)):i==="[object ArrayBuffer]"?s=t.slice(0):i.slice(-6)==="Array]"&&(s=new t.constructor(t)),s){for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)zp(s,r[e],Object.getOwnPropertyDescriptor(t,r[e]));for(e=0,r=Object.getOwnPropertyNames(t);e<r.length;e++)Object.hasOwnProperty.call(s,n=r[e])&&s[n]===t[n]||zp(s,n,Object.getOwnPropertyDescriptor(t,n))}return s||t}function od(t){return hu(t)?t.replace(/\[|\]/gi,""):t}function tt(t,e,n){return t?hu(e)?t[od(e)]:(e||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((s,i)=>jP(s)&&i in s?s[i]:n,t):n}function or(t,e,n){if(hu(e)){t[od(e)]=n;return}const r=e.split(/\.|\[(\d+)\]/).filter(Boolean);let s=t;for(let i=0;i<r.length;i++){if(i===r.length-1){s[r[i]]=n;return}(!(r[i]in s)||Wi(s[r[i]]))&&(s[r[i]]=Tw(r[i+1])?[]:{}),s=s[r[i]]}}function Yu(t,e){if(Array.isArray(t)&&Tw(e)){t.splice(Number(e),1);return}ps(t)&&delete t[e]}function da(t,e){if(hu(e)){delete t[od(e)];return}const n=e.split(/\.|\[(\d+)\]/).filter(Boolean);let r=t;for(let i=0;i<n.length;i++){if(i===n.length-1){Yu(r,n[i]);break}if(!(n[i]in r)||Wi(r[n[i]]))break;r=r[n[i]]}const s=n.map((i,o)=>tt(t,n.slice(0,o).join(".")));for(let i=s.length-1;i>=0;i--)if(Aw(s[i])){if(i===0){Yu(t,n[0]);continue}Yu(s[i-1],n[i-1])}}function Tt(t){return Object.keys(t)}function ad(t,e=void 0){const n=Hn();return(n==null?void 0:n.provides[t])||Zt(t,e)}function Jc(t,e,n){if(Array.isArray(t)){const r=[...t],s=r.findIndex(i=>vt(i,e));return s>=0?r.splice(s,1):r.push(e),r}return vt(t,e)?n:e}function Yp(t,e=0){let n=null,r=[];return function(...s){return n&&window.clearTimeout(n),n=window.setTimeout(()=>{const i=t(...s);r.forEach(o=>o(i)),r=[]},e),new Promise(i=>r.push(i))}}function GP(t,e){return ps(e)&&e.number?FP(t):t}function Zc(t,e){let n;return async function(...s){const i=t(...s);n=i;const o=await i;return i!==n||(n=void 0,e(o,s)),o}}function KP({get:t,set:e}){const n=Ye(Ge(t()));return lt(t,r=>{vt(r,n.value)||(n.value=Ge(r))},{deep:!0}),lt(n,r=>{vt(r,t())||e(Ge(r))},{deep:!0}),n}const du=(t,e,n)=>e.slots.default?typeof t=="string"||!t?e.slots.default(n()):{default:()=>{var r,s;return(s=(r=e.slots).default)===null||s===void 0?void 0:s.call(r,n())}}:e.slots.default;function Xu(t){if(Cw(t))return t._value}function Cw(t){return"_value"in t}function ld(t){if(!id(t))return t;const e=t.target;if(ri(e.type)&&Cw(e))return Xu(e);if(e.type==="file"&&e.files){const n=Array.from(e.files);return e.multiple?n:n[0]}if(HP(e))return Array.from(e.options).filter(n=>n.selected&&!n.disabled).map(Xu);if(Sw(e)){const n=Array.from(e.options).find(r=>r.selected);return n?Xu(n):e.value}return e.value}function Rw(t){const e={};return Object.defineProperty(e,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),t?ps(t)&&t._$$isNormalized?t:ps(t)?Object.keys(t).reduce((n,r)=>{const s=zP(t[r]);return t[r]!==!1&&(n[r]=Xp(s)),n},e):typeof t!="string"?e:t.split("|").reduce((n,r)=>{const s=YP(r);return s.name&&(n[s.name]=Xp(s.params)),n},e):e}function zP(t){return t===!0?[]:Array.isArray(t)||ps(t)?t:[t]}function Xp(t){const e=n=>typeof n=="string"&&n[0]==="@"?XP(n.slice(1)):n;return Array.isArray(t)?t.map(e):t instanceof RegExp?[t]:Object.keys(t).reduce((n,r)=>(n[r]=e(t[r]),n),{})}const YP=t=>{let e=[];const n=t.split(":")[0];return t.includes(":")&&(e=t.split(":").slice(1).join(":").split(",")),{name:n,params:e}};function XP(t){const e=n=>tt(n,t)||n[t];return e.__locatorRef=t,e}function QP(t){return Array.isArray(t)?t.filter(Qc):Tt(t).filter(e=>Qc(t[e])).map(e=>t[e])}const JP={generateMessage:({field:t})=>`${t} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let ef=Object.assign({},JP);const ud=()=>ef,ZP=t=>{ef=Object.assign(Object.assign({},ef),t)},eM=ZP;async function Ow(t,e,n={}){const r=n==null?void 0:n.bails,s={name:(n==null?void 0:n.name)||"{field}",rules:e,bails:r??!0,formData:(n==null?void 0:n.values)||{}},o=(await tM(s,t)).errors;return{errors:o,valid:!o.length}}async function tM(t,e){if(Gi(t.rules))return nM(e,t.rules,{bails:t.bails});if(ms(t.rules)||Array.isArray(t.rules)){const o={field:t.name,form:t.formData,value:e},a=Array.isArray(t.rules)?t.rules:[t.rules],u=a.length,c=[];for(let h=0;h<u;h++){const l=a[h],f=await l(e,o);if(typeof f!="string"&&f)continue;const g=typeof f=="string"?f:Nw(o);if(c.push(g),t.bails)return{errors:c}}return{errors:c}}const n=Object.assign(Object.assign({},t),{rules:Rw(t.rules)}),r=[],s=Object.keys(n.rules),i=s.length;for(let o=0;o<i;o++){const a=s[o],u=await rM(n,e,{name:a,params:n.rules[a]});if(u.error&&(r.push(u.error),t.bails))return{errors:r}}return{errors:r}}async function nM(t,e,n){var r;return{errors:await e.validate(t,{abortEarly:(r=n.bails)!==null&&r!==void 0?r:!0}).then(()=>[]).catch(i=>{if(i.name==="ValidationError")return i.errors;throw i})}}async function rM(t,e,n){const r=UP(n.name);if(!r)throw new Error(`No such validator '${n.name}' exists.`);const s=sM(n.params,t.formData),i={field:t.name,value:e,form:t.formData,rule:Object.assign(Object.assign({},n),{params:s})},o=await r(e,s,i);return typeof o=="string"?{error:o}:{error:o?void 0:Nw(i)}}function Nw(t){const e=ud().generateMessage;return e?e(t):"Field is invalid"}function sM(t,e){const n=r=>Qc(r)?r(e):r;return Array.isArray(t)?t.map(n):Object.keys(t).reduce((r,s)=>(r[s]=n(t[s]),r),{})}async function iM(t,e){const n=await t.validate(e,{abortEarly:!1}).then(()=>[]).catch(i=>{if(i.name!=="ValidationError")throw i;return i.inner||[]}),r={},s={};for(const i of n){const o=i.errors;r[i.path]={valid:!o.length,errors:o},o.length&&(s[i.path]=o[0])}return{valid:!n.length,results:r,errors:s}}async function oM(t,e,n){const s=Tt(t).map(async c=>{var h,l,f;const d=await Ow(tt(e,c),t[c],{name:((h=n==null?void 0:n.names)===null||h===void 0?void 0:h[c])||c,values:e,bails:(f=(l=n==null?void 0:n.bailsMap)===null||l===void 0?void 0:l[c])!==null&&f!==void 0?f:!0});return Object.assign(Object.assign({},d),{path:c})});let i=!0;const o=await Promise.all(s),a={},u={};for(const c of o)a[c.path]={valid:c.valid,errors:c.errors},c.valid||(i=!1,u[c.path]=c.errors[0]);return{valid:i,results:a,errors:u}}let Qp=0;function aM(t,e){const{value:n,initialValue:r,setInitialValue:s}=Lw(t,e.modelValue,e.form),{errorMessage:i,errors:o,setErrors:a}=uM(t,e.form),u=lM(n,r,o),c=Qp>=Number.MAX_SAFE_INTEGER?0:++Qp;function h(l){var f;"value"in l&&(n.value=l.value),"errors"in l&&a(l.errors),"touched"in l&&(u.touched=(f=l.touched)!==null&&f!==void 0?f:u.touched),"initialValue"in l&&s(l.initialValue)}return{id:c,path:t,value:n,initialValue:r,meta:u,errors:o,errorMessage:i,setState:h}}function Lw(t,e,n){const r=Ye(J(e));function s(){return n?tt(n.meta.value.initialValues,J(t),J(r)):J(r)}function i(c){if(!n){r.value=c;return}n.stageInitialValue(J(t),c,!0)}const o=Ee(s);if(!n)return{value:Ye(s()),initialValue:o,setInitialValue:i};const a=e?J(e):tt(n.values,J(t),J(o));return n.stageInitialValue(J(t),a,!0),{value:Ee({get(){return tt(n.values,J(t))},set(c){n.setFieldValue(J(t),c)}}),initialValue:o,setInitialValue:i}}function lM(t,e,n){const r=Xn({touched:!1,pending:!1,valid:!0,validated:!!J(n).length,initialValue:Ee(()=>J(e)),dirty:Ee(()=>!vt(J(t),J(e)))});return lt(n,s=>{r.valid=!s.length},{immediate:!0,flush:"sync"}),r}function uM(t,e){function n(s){return s?Array.isArray(s)?s:[s]:[]}if(!e){const s=Ye([]);return{errors:s,errorMessage:Ee(()=>s.value[0]),setErrors:i=>{s.value=n(i)}}}const r=Ee(()=>e.errorBag.value[J(t)]||[]);return{errors:r,errorMessage:Ee(()=>r.value[0]),setErrors:s=>{e.setFieldErrorBag(J(t),n(s))}}}function cM(t,e,n){return ri(n==null?void 0:n.type)?dM(t,e,n):Dw(t,e,n)}function Dw(t,e,n){const{initialValue:r,validateOnMount:s,bails:i,type:o,checkedValue:a,label:u,validateOnValueUpdate:c,uncheckedValue:h,controlled:l,keepValueOnUnmount:f,modelPropName:d,syncVModel:g,form:y}=fM(J(t),n),v=l?ad(Yo):void 0,p=y||v;let E=!1;const{id:T,value:w,initialValue:S,meta:N,setState:L,errors:P,errorMessage:F}=aM(t,{modelValue:r,form:p});g&&mM({value:w,prop:d,handleChange:le});const Q=()=>{N.touched=!0},Z=Ee(()=>{let x=J(e);const V=J(p==null?void 0:p.schema);return V&&!Gi(V)&&(x=hM(V,J(t))||x),Gi(x)||ms(x)||Array.isArray(x)?x:Rw(x)});async function W(x){var V,K;return p!=null&&p.validateSchema?(V=(await p.validateSchema(x)).results[J(t)])!==null&&V!==void 0?V:{valid:!0,errors:[]}:Ow(w.value,Z.value,{name:J(u)||J(t),values:(K=p==null?void 0:p.values)!==null&&K!==void 0?K:{},bails:i})}const te=Zc(async()=>(N.pending=!0,N.validated=!0,W("validated-only")),x=>(E&&(x.valid=!0,x.errors=[]),L({errors:x.errors}),N.pending=!1,x)),ce=Zc(async()=>W("silent"),x=>(E&&(x.valid=!0),N.valid=x.valid,x));function Te(x){return(x==null?void 0:x.mode)==="silent"?ce():te()}function le(x,V=!0){const K=ld(x);w.value=K,!c&&V&&te()}bo(()=>{if(s)return te();(!p||!p.validateSchema)&&ce()});function se(x){N.touched=x}let pe,Ke=Ge(w.value);function Ze(){pe=lt(w,(x,V)=>{if(vt(x,V)&&vt(x,Ke))return;(c?te:ce)(),Ke=Ge(x)},{deep:!0})}Ze();function qe(x){var V;pe==null||pe();const K=x&&"value"in x?x.value:S.value;L({value:Ge(K),initialValue:Ge(K),touched:(V=x==null?void 0:x.touched)!==null&&V!==void 0?V:!1,errors:(x==null?void 0:x.errors)||[]}),N.pending=!1,N.validated=!1,ce(),pr(()=>{Ze()})}function Fe(x){w.value=x}function Et(x){L({errors:Array.isArray(x)?x:[x]})}const rt={id:T,name:t,label:u,value:w,meta:N,errors:P,errorMessage:F,type:o,checkedValue:a,uncheckedValue:h,bails:i,keepValueOnUnmount:f,resetField:qe,handleReset:()=>qe(),validate:Te,handleChange:le,handleBlur:Q,setState:L,setTouched:se,setErrors:Et,setValue:Fe};if(Ps(VP,rt),Ve(e)&&typeof J(e)!="function"&&lt(e,(x,V)=>{vt(x,V)||(N.validated?te():ce())},{deep:!0}),!p)return rt;p.register(rt),wl(()=>{E=!0,p.unregister(rt)});const $=Ee(()=>{const x=Z.value;return!x||ms(x)||Gi(x)||Array.isArray(x)?{}:Object.keys(x).reduce((V,K)=>{const de=QP(x[K]).map(Ie=>Ie.__locatorRef).reduce((Ie,ie)=>{const b=tt(p.values,ie)||p.values[ie];return b!==void 0&&(Ie[ie]=b),Ie},{});return Object.assign(V,de),V},{})});return lt($,(x,V)=>{if(!Object.keys(x).length)return;!vt(x,V)&&(N.validated?te():ce())}),rt}function fM(t,e){const n=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:t,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,modelPropName:"modelValue",syncVModel:!0,controlled:!0});if(!e)return n();const r="valueProp"in e?e.valueProp:e.checkedValue,s="standalone"in e?!e.standalone:e.controlled;return Object.assign(Object.assign(Object.assign({},n()),e||{}),{controlled:s??!0,checkedValue:r})}function hM(t,e){if(t)return t[e]}function dM(t,e,n){const r=n!=null&&n.standalone?void 0:ad(Yo),s=n==null?void 0:n.checkedValue,i=n==null?void 0:n.uncheckedValue;function o(a){const u=a.handleChange,c=Ee(()=>{const l=J(a.value),f=J(s);return Array.isArray(l)?l.findIndex(d=>vt(d,f))>=0:vt(f,l)});function h(l,f=!0){var d;if(c.value===((d=l==null?void 0:l.target)===null||d===void 0?void 0:d.checked)){f&&a.validate();return}let g=ld(l);r||(g=Jc(J(a.value),J(s),J(i))),u(g,f)}return Object.assign(Object.assign({},a),{checked:c,checkedValue:s,uncheckedValue:i,handleChange:h})}return o(Dw(t,e,n))}function mM({prop:t,value:e,handleChange:n}){const r=Hn();if(!r)return;const s=t||"modelValue",i=`update:${s}`;s in r.props&&(lt(e,o=>{vt(o,Jp(r,s))||r.emit(i,o)}),lt(()=>Jp(r,s),o=>{if(o===ul&&e.value===void 0)return;const a=o===ul?void 0:o;vt(a,GP(e.value,r.props.modelModifiers))||n(a)}))}function Jp(t,e){return t.props[e]}const pM=li({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>ud().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:ul},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(t,e){const n=Tn(t,"rules"),r=Tn(t,"name"),s=Tn(t,"label"),i=Tn(t,"uncheckedValue"),o=Tn(t,"keepValue"),{errors:a,value:u,errorMessage:c,validate:h,handleChange:l,handleBlur:f,setTouched:d,resetField:g,handleReset:y,meta:v,checked:p,setErrors:E}=cM(r,n,{validateOnMount:t.validateOnMount,bails:t.bails,standalone:t.standalone,type:e.attrs.type,initialValue:_M(t,e),checkedValue:e.attrs.value,uncheckedValue:i,label:s,validateOnValueUpdate:!1,keepValueOnUnmount:o}),T=function(F,Q=!0){l(F,Q),e.emit("update:modelValue",u.value)},w=P=>{ri(e.attrs.type)||(u.value=ld(P))},S=function(F){w(F),e.emit("update:modelValue",u.value)},N=Ee(()=>{const{validateOnInput:P,validateOnChange:F,validateOnBlur:Q,validateOnModelUpdate:Z}=gM(t),W=[f,e.attrs.onBlur,Q?h:void 0].filter(Boolean),te=[se=>T(se,P),e.attrs.onInput].filter(Boolean),ce=[se=>T(se,F),e.attrs.onChange].filter(Boolean),Te={name:t.name,onBlur:W,onInput:te,onChange:ce};Te["onUpdate:modelValue"]=se=>T(se,Z),ri(e.attrs.type)&&p&&(Te.checked=p.value);const le=Zp(t,e);return WP(le,e.attrs)&&(Te.value=u.value),Te});function L(){return{field:N.value,value:u.value,meta:v,errors:a.value,errorMessage:c.value,validate:h,resetField:g,handleChange:T,handleInput:S,handleReset:y,handleBlur:f,setTouched:d,setErrors:E}}return e.expose({setErrors:E,setTouched:d,reset:g,validate:h,handleChange:l}),()=>{const P=El(Zp(t,e)),F=du(P,e,L);return P?qn(P,Object.assign(Object.assign({},e.attrs),N.value),F):F}}});function Zp(t,e){let n=t.as||"";return!t.as&&!e.slots.default&&(n="input"),n}function gM(t){var e,n,r,s;const{validateOnInput:i,validateOnChange:o,validateOnBlur:a,validateOnModelUpdate:u}=ud();return{validateOnInput:(e=t.validateOnInput)!==null&&e!==void 0?e:i,validateOnChange:(n=t.validateOnChange)!==null&&n!==void 0?n:o,validateOnBlur:(r=t.validateOnBlur)!==null&&r!==void 0?r:a,validateOnModelUpdate:(s=t.validateOnModelUpdate)!==null&&s!==void 0?s:u}}function _M(t,e){return ri(e.attrs.type)?Gp(t,"modelValue")?t.modelValue:void 0:Gp(t,"modelValue")?t.modelValue:e.attrs.value}const yM=pM;let vM=0;function bM(t){var e;const n=vM++,r=new Set;let s=!1;const i=Ye({}),o=Ye(!1),a=Ye(0),u=[],c=Xn(Ge(J(t==null?void 0:t.initialValues)||{})),{errorBag:h,setErrorBag:l,setFieldErrorBag:f}=TM(t==null?void 0:t.initialErrors),d=Ee(()=>Tt(h.value).reduce((k,C)=>{const A=h.value[C];return A&&A.length&&(k[C]=A[0]),k},{}));function g(k){const C=i.value[k];return Array.isArray(C)?C[0]:C}function y(k){return!!i.value[k]}const v=Ee(()=>Tt(i.value).reduce((k,C)=>{const A=g(C);return A&&(k[C]=J(A.label||A.name)||""),k},{})),p=Ee(()=>Tt(i.value).reduce((k,C)=>{var A;const R=g(C);return R&&(k[C]=(A=R.bails)!==null&&A!==void 0?A:!0),k},{})),E=Object.assign({},(t==null?void 0:t.initialErrors)||{}),T=(e=t==null?void 0:t.keepValuesOnUnmount)!==null&&e!==void 0?e:!1,{initialValues:w,originalInitialValues:S,setInitialValues:N}=EM(i,c,t==null?void 0:t.initialValues),L=wM(i,c,S,d),P=Ee(()=>[...r,...Tt(i.value)].reduce((k,C)=>{const A=tt(c,C);return or(k,C,A),k},{})),F=t==null?void 0:t.validationSchema,Q=Yp(B,5),Z=Yp(B,5),W=Zc(async k=>await k==="silent"?Q():Z(),(k,[C])=>{const A=le.fieldsByPath.value||{},R=Tt(le.errorBag.value);return[...new Set([...Tt(k.results),...Tt(A),...R])].reduce((H,X)=>{const fe=A[X],ge=(k.results[X]||{errors:[]}).errors,Re={errors:ge,valid:!ge.length};if(H.results[X]=Re,Re.valid||(H.errors[X]=Re.errors[0]),!fe)return Ze(X,ge),H;if(pe(fe,rn=>rn.meta.valid=Re.valid),C==="silent")return H;const Ht=Array.isArray(fe)?fe.some(rn=>rn.meta.validated):fe.meta.validated;return C==="validated-only"&&!Ht||pe(fe,rn=>rn.setState({errors:Re.errors})),H},{valid:k.valid,results:{},errors:{}})});function te(k){return function(A,R){return function(H){return H instanceof Event&&(H.preventDefault(),H.stopPropagation()),V(Tt(i.value).reduce((X,fe)=>(X[fe]=!0,X),{})),o.value=!0,a.value++,m().then(X=>{const fe=Ge(c);if(X.valid&&typeof A=="function"){const ge=Ge(P.value);return A(k?ge:fe,{evt:H,controlledValues:ge,setErrors:qe,setFieldError:Ze,setTouched:V,setFieldTouched:x,setValues:Et,setFieldValue:Fe,resetForm:K})}!X.valid&&typeof R=="function"&&R({values:fe,evt:H,errors:X.errors,results:X.results})}).then(X=>(o.value=!1,X),X=>{throw o.value=!1,X})}}}const Te=te(!1);Te.withControlled=te(!0);const le={formId:n,fieldsByPath:i,values:c,controlledValues:P,errorBag:h,errors:d,schema:F,submitCount:a,meta:L,isSubmitting:o,fieldArrays:u,keepValuesOnUnmount:T,validateSchema:J(F)?W:void 0,validate:m,register:ie,unregister:b,setFieldErrorBag:f,validateField:_,setFieldValue:Fe,setValues:Et,setErrors:qe,setFieldError:Ze,setFieldTouched:x,setTouched:V,resetForm:K,handleSubmit:Te,stageInitialValue:O,unsetInitialValue:I,setFieldInitialValue:M,useFieldModel:$};function se(k){return Array.isArray(k)}function pe(k,C){return Array.isArray(k)?k.forEach(C):C(k)}function Ke(k){Object.values(i.value).forEach(C=>{C&&pe(C,k)})}function Ze(k,C){f(k,C)}function qe(k){l(k)}function Fe(k,C,{force:A}={force:!1}){var R;const q=i.value[k],H=Ge(C);if(!q){or(c,k,H);return}if(se(q)&&((R=q[0])===null||R===void 0?void 0:R.type)==="checkbox"&&!Array.isArray(C)){const fe=Ge(Jc(tt(c,k)||[],C,void 0));or(c,k,fe);return}let X=H;!se(q)&&q.type==="checkbox"&&!A&&!s&&(X=Ge(Jc(tt(c,k),C,J(q.uncheckedValue)))),or(c,k,X)}function Et(k){Tt(c).forEach(C=>{delete c[C]}),Tt(k).forEach(C=>{Fe(C,k[C])}),u.forEach(C=>C&&C.reset())}function rt(k){const{value:C}=Lw(k,void 0,le);return lt(C,()=>{y(J(k))||m({mode:"validated-only"})},{deep:!0}),r.add(J(k)),C}function $(k){return Array.isArray(k)?k.map(rt):rt(k)}function x(k,C){const A=i.value[k];A&&pe(A,R=>R.setTouched(C))}function V(k){Tt(k).forEach(C=>{x(C,!!k[C])})}function K(k){s=!0,Ke(A=>A.resetField());const C=k!=null&&k.values?k.values:S.value;N(C),Et(C),k!=null&&k.touched&&V(k.touched),qe((k==null?void 0:k.errors)||{}),a.value=(k==null?void 0:k.submitCount)||0,pr(()=>{s=!1})}function de(k,C){const A=rs(k),R=C;if(!i.value[R]){i.value[R]=A;return}const q=i.value[R];q&&!Array.isArray(q)&&(i.value[R]=[q]),i.value[R]=[...i.value[R],A]}function Ie(k,C){const A=C,R=i.value[A];if(R){if(!se(R)&&k.id===R.id){delete i.value[A];return}if(se(R)){const q=R.findIndex(H=>H.id===k.id);if(q===-1)return;R.splice(q,1),R.length||delete i.value[A]}}}function ie(k){const C=J(k.name);de(k,C),Ve(k.name)&&lt(k.name,async(R,q)=>{await pr(),Ie(k,q),de(k,R),(d.value[q]||d.value[R])&&(Ze(q,void 0),_(R)),await pr(),y(q)||da(c,q)});const A=J(k.errorMessage);A&&(E==null?void 0:E[C])!==A&&_(C),delete E[C]}function b(k){const C=J(k.name),A=i.value[C],R=!!A&&se(A);Ie(k,C),pr(()=>{var q;const H=(q=J(k.keepValueOnUnmount))!==null&&q!==void 0?q:J(T),X=tt(c,C);if(R&&(A===i.value[C]||!i.value[C])&&!H)if(Array.isArray(X)){const ge=X.findIndex(Re=>vt(Re,J(k.checkedValue)));if(ge>-1){const Re=[...X];Re.splice(ge,1),Fe(C,Re,{force:!0})}}else X===J(k.checkedValue)&&da(c,C);if(!y(C)){if(Ze(C,void 0),H||R&&Array.isArray(X)&&!Aw(X))return;da(c,C)}})}async function m(k){const C=(k==null?void 0:k.mode)||"force";if(C==="force"&&Ke(H=>H.meta.validated=!0),le.validateSchema)return le.validateSchema(C);const A=await Promise.all(Object.values(i.value).map(H=>{const X=Array.isArray(H)?H[0]:H;return X?X.validate(k).then(fe=>({key:J(X.name),valid:fe.valid,errors:fe.errors})):Promise.resolve({key:"",valid:!0,errors:[]})})),R={},q={};for(const H of A)R[H.key]={valid:H.valid,errors:H.errors},H.errors.length&&(q[H.key]=H.errors[0]);return{valid:A.every(H=>H.valid),results:R,errors:q}}async function _(k){const C=i.value[k];return C?Array.isArray(C)?C.map(A=>A.validate())[0]:C.validate():Promise.resolve({errors:[],valid:!0})}function I(k){da(w.value,k)}function O(k,C,A=!1){or(c,k,C),M(k,C),A&&!(t!=null&&t.initialValues)&&or(S.value,k,Ge(C))}function M(k,C){or(w.value,k,Ge(C))}async function B(){const k=J(F);return k?Gi(k)?await iM(k,c):await oM(k,c,{names:v.value,bailsMap:p.value}):{valid:!0,results:{},errors:{}}}const j=Te((k,{evt:C})=>{kw(C)&&C.target.submit()});return bo(()=>{if(t!=null&&t.initialErrors&&qe(t.initialErrors),t!=null&&t.initialTouched&&V(t.initialTouched),t!=null&&t.validateOnMount){m();return}le.validateSchema&&le.validateSchema("silent")}),Ve(F)&&lt(F,()=>{var k;(k=le.validateSchema)===null||k===void 0||k.call(le,"validated-only")}),Ps(Yo,le),Object.assign(Object.assign({},le),{handleReset:()=>K(),submitForm:j})}function wM(t,e,n,r){const s={touched:"some",pending:"some",valid:"every"},i=Ee(()=>!vt(e,J(n)));function o(){const u=Object.values(t.value).flat(1).filter(Boolean);return Tt(s).reduce((c,h)=>{const l=s[h];return c[h]=u[l](f=>f.meta[h]),c},{})}const a=Xn(o());return mE(()=>{const u=o();a.touched=u.touched,a.valid=u.valid,a.pending=u.pending}),Ee(()=>Object.assign(Object.assign({initialValues:J(n)},a),{valid:a.valid&&!Tt(r.value).length,dirty:i.value}))}function EM(t,e,n){const r=Ye(Ge(J(n))||{}),s=Ye(Ge(J(n))||{});function i(o,a=!1){r.value=Ge(o),s.value=Ge(o),a&&Tt(t.value).forEach(u=>{const c=t.value[u],h=Array.isArray(c)?c.some(f=>f.meta.touched):c==null?void 0:c.meta.touched;if(!c||h)return;const l=tt(r.value,u);or(e,u,Ge(l))})}return Ve(n)&&lt(n,o=>{i(o,!0)},{deep:!0}),{initialValues:r,originalInitialValues:s,setInitialValues:i}}function TM(t){const e=Ye({});function n(i){return Array.isArray(i)?i:i?[i]:[]}function r(i,o){if(!o){delete e.value[i];return}e.value[i]=n(o)}function s(i){e.value=Tt(i).reduce((o,a)=>{const u=i[a];return u&&(o[a]=n(u)),o},{})}return t&&s(t),{errorBag:e,setErrorBag:s,setFieldErrorBag:r}}const IM=li({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1}},setup(t,e){const n=Tn(t,"initialValues"),r=Tn(t,"validationSchema"),s=Tn(t,"keepValues"),{errors:i,values:o,meta:a,isSubmitting:u,submitCount:c,controlledValues:h,validate:l,validateField:f,handleReset:d,resetForm:g,handleSubmit:y,setErrors:v,setFieldError:p,setFieldValue:E,setValues:T,setFieldTouched:w,setTouched:S}=bM({validationSchema:r.value?r:void 0,initialValues:n,initialErrors:t.initialErrors,initialTouched:t.initialTouched,validateOnMount:t.validateOnMount,keepValuesOnUnmount:s}),N=y((Z,{evt:W})=>{kw(W)&&W.target.submit()},t.onInvalidSubmit),L=t.onSubmit?y(t.onSubmit,t.onInvalidSubmit):N;function P(Z){id(Z)&&Z.preventDefault(),d(),typeof e.attrs.onReset=="function"&&e.attrs.onReset()}function F(Z,W){return y(typeof Z=="function"&&!W?Z:W,t.onInvalidSubmit)(Z)}function Q(){return{meta:a.value,errors:i.value,values:o,isSubmitting:u.value,submitCount:c.value,controlledValues:h.value,validate:l,validateField:f,handleSubmit:F,handleReset:d,submitForm:N,setErrors:v,setFieldError:p,setFieldValue:E,setValues:T,setFieldTouched:w,setTouched:S,resetForm:g}}return e.expose({setFieldError:p,setErrors:v,setFieldValue:E,setValues:T,setFieldTouched:w,setTouched:S,resetForm:g,validate:l,validateField:f}),function(){const W=t.as==="form"?t.as:El(t.as),te=du(W,e,Q);if(!t.as)return te;const ce=t.as==="form"?{novalidate:!0}:{};return qn(W,Object.assign(Object.assign(Object.assign({},ce),e.attrs),{onSubmit:L,onReset:P}),te)}}}),AM=IM;function SM(t){const e=ad(Yo,void 0),n=Ye([]),r=()=>{},s={fields:n,remove:r,push:r,swap:r,insert:r,update:r,replace:r,prepend:r,move:r};if(!e||!J(t))return s;const i=e.fieldArrays.find(T=>J(T.path)===J(t));if(i)return i;let o=0;function a(){const T=tt(e==null?void 0:e.values,J(t),[])||[];n.value=T.map(c),u()}a();function u(){const T=n.value.length;for(let w=0;w<T;w++){const S=n.value[w];S.isFirst=w===0,S.isLast=w===T-1}}function c(T){const w=o++;return{key:w,value:KP({get(){const N=tt(e==null?void 0:e.values,J(t),[])||[],L=n.value.findIndex(P=>P.key===w);return L===-1?T:N[L]},set(N){const L=n.value.findIndex(P=>P.key===w);L!==-1&&y(L,N)}}),isFirst:!1,isLast:!1}}function h(T){const w=J(t),S=tt(e==null?void 0:e.values,w);if(!S||!Array.isArray(S))return;const N=[...S];N.splice(T,1),e==null||e.unsetInitialValue(w+`[${T}]`),e==null||e.setFieldValue(w,N),n.value.splice(T,1),u()}function l(T){const w=J(t),S=tt(e==null?void 0:e.values,w),N=Wi(S)?[]:S;if(!Array.isArray(N))return;const L=[...N];L.push(T),e==null||e.stageInitialValue(w+`[${L.length-1}]`,T),e==null||e.setFieldValue(w,L),n.value.push(c(T)),u()}function f(T,w){const S=J(t),N=tt(e==null?void 0:e.values,S);if(!Array.isArray(N)||!(T in N)||!(w in N))return;const L=[...N],P=[...n.value],F=L[T];L[T]=L[w],L[w]=F;const Q=P[T];P[T]=P[w],P[w]=Q,e==null||e.setFieldValue(S,L),n.value=P,u()}function d(T,w){const S=J(t),N=tt(e==null?void 0:e.values,S);if(!Array.isArray(N)||N.length<T)return;const L=[...N],P=[...n.value];L.splice(T,0,w),P.splice(T,0,c(w)),e==null||e.setFieldValue(S,L),n.value=P,u()}function g(T){const w=J(t);e==null||e.setFieldValue(w,T),a()}function y(T,w){const S=J(t),N=tt(e==null?void 0:e.values,S);!Array.isArray(N)||N.length-1<T||(e==null||e.setFieldValue(`${S}[${T}]`,w),e==null||e.validate({mode:"validated-only"}))}function v(T){const w=J(t),S=tt(e==null?void 0:e.values,w),N=Wi(S)?[]:S;if(!Array.isArray(N))return;const L=[T,...N];e==null||e.stageInitialValue(w+`[${L.length-1}]`,T),e==null||e.setFieldValue(w,L),n.value.unshift(c(T)),u()}function p(T,w){const S=J(t),N=tt(e==null?void 0:e.values,S),L=Wi(N)?[]:[...N];if(!Array.isArray(N)||!(T in N)||!(w in N))return;const P=[...n.value],F=P[T];P.splice(T,1),P.splice(w,0,F);const Q=L[T];L.splice(T,1),L.splice(w,0,Q),e==null||e.setFieldValue(S,L),n.value=P,u()}const E={fields:n,remove:h,push:l,swap:f,insert:d,update:y,replace:g,prepend:v,move:p};return e.fieldArrays.push(Object.assign({path:t,reset:a},E)),wl(()=>{const T=e.fieldArrays.findIndex(w=>J(w.path)===J(t));T>=0&&e.fieldArrays.splice(T,1)}),E}li({name:"FieldArray",inheritAttrs:!1,props:{name:{type:String,required:!0}},setup(t,e){const{push:n,remove:r,swap:s,insert:i,replace:o,update:a,prepend:u,move:c,fields:h}=SM(Tn(t,"name"));function l(){return{fields:h.value,push:n,remove:r,swap:s,insert:i,update:a,replace:o,prepend:u,move:c}}return e.expose({push:n,remove:r,swap:s,insert:i,update:a,replace:o,prepend:u,move:c}),()=>du(void 0,e,l)}});const kM=li({name:"ErrorMessage",props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(t,e){const n=Zt(Yo,void 0),r=Ee(()=>n==null?void 0:n.errors.value[t.name]);function s(){return{message:r.value}}return()=>{if(!r.value)return;const i=t.as?El(t.as):t.as,o=du(i,e,s),a=Object.assign({role:"alert"},e.attrs);return!i&&(Array.isArray(o)||!o)&&(o!=null&&o.length)?o:(Array.isArray(o)||!o)&&!(o!=null&&o.length)?qn(i||"span",a,r.value):qn(i,a,o)}}}),CM=kM;/**
  * vee-validate v4.7.3
  * (c) 2022 Abdelrahman Awad
  * @license MIT
  */const ma={en:/^[A-Z\s]*$/i,cs:/^[A-Z\s]*$/i,da:/^[A-Z\s]*$/i,de:/^[A-Z\s]*$/i,es:/^[A-Z\s]*$/i,fr:/^[A-Z\s]*$/i,it:/^[A-Z\xC0-\xFF\s]*$/i,lt:/^[A-Z\s]*$/i,nl:/^[A-Z\s]*$/i,hu:/^[A-Z\s]*$/i,pl:/^[A-Z\s]*$/i,pt:/^[A-Z\s]*$/i,ru:/^[-\s]*$/i,sk:/^[A-Z\s]*$/i,sr:/^[A-Z\s]*$/i,sv:/^[A-Z\s]*$/i,tr:/^[A-Z\s]*$/i,uk:/^[-\s]*$/i,ar:/^[\s]*$/,az:/^[A-Z\s]*$/i,ug:/^[A-Z\s]*$/i},RM=t=>{if(t)return Array.isArray(t)?t[0]:t.locale};function Xo(t,e){return Array.isArray(t)?t[0]:t[e]}function Dr(t){return!!(t==null||t===""||Array.isArray(t)&&t.length===0)}const xw=(t,e)=>{if(Dr(t))return!0;const n=RM(e);if(Array.isArray(t))return t.every(s=>xw(s,{locale:n}));const r=String(t);return n?(ma[n]||ma.en).test(r):Object.keys(ma).some(s=>ma[s].test(r))},OM=(t,e)=>{const n=Xo(e,"target");return String(t)===String(n)},NM=t=>{if(Dr(t))return!0;const e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return Array.isArray(t)?t.every(n=>e.test(String(n))):e.test(String(t))};function LM(t){return t==null}function DM(t){return Array.isArray(t)&&t.length===0}const Pw=(t,e)=>{if(Dr(t))return!0;const n=Xo(e,"length");return Array.isArray(t)?t.every(r=>Pw(r,{length:n})):String(t).length<=Number(n)},Mw=(t,e)=>{if(Dr(t))return!0;const n=Xo(e,"max");return Array.isArray(t)?t.length>0&&t.every(r=>Mw(r,{max:n})):Number(t)<=Number(n)},Fw=(t,e)=>{if(Dr(t))return!0;const n=Xo(e,"length");return Array.isArray(t)?t.every(r=>Fw(r,{length:n})):String(t).length>=Number(n)},Uw=(t,e)=>{if(Dr(t))return!0;const n=Xo(e,"min");return Array.isArray(t)?t.length>0&&t.every(r=>Uw(r,{min:n})):Number(t)>=Number(n)},$w=(t,e)=>Dr(t)?!0:Array.isArray(t)?t.every(n=>$w(n,e)):Array.from(e).some(n=>n==t),eg=(t,e)=>Dr(t)?!0:!$w(t,e),tg=t=>LM(t)||DM(t)||t===!1?!1:!!String(t).trim().length,xM={install(t){t.component("VeeForm",AM),t.component("VeeField",yM),t.component("ErrorMessage",CM),ln("required",tg),ln("tos",tg),ln("min",Fw),ln("max",Pw),ln("alphaSpaces",xw),ln("email",NM),ln("minVal",Uw),ln("maxVal",Mw),ln("passwords_mismatch",OM),ln("excluded",eg),ln("country_excluded",eg),eM({generateMessage:e=>{const n={required:`The field ${e.field} is required.`,min:`The field ${e.field} is too short.`,max:`The field ${e.field} is long.`,alphaSpaces:`The field ${e.field} may only contain alphabetical characters and spaces.`,email:`The field ${e.field} must be a valid email.`,minVal:`The field ${e.field} is too low.`,maxVal:`The field ${e.field} is too high.`,excluded:`You are not allowed to use this value for the tield ${e.field}`,country_excluded:"Due to restrictions, we do not accept users from this location.",passwords_mismatch:"The passwords don't match.",tos:"You must accept the Terms of Service"};return n[e.rule.name]?n[e.rule.name]:`The field ${e.field} is invalid.`},validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0})}},PM={beforeMount(t,e){let n=`fa fa-${e.value} text-xl`;e.modifiers.right&&(n+=" float-right"),e.modifiers.yellow?n+=" text-yellow-400":n+=" text-green-400",t.innerHTML+=`<i class="${n}"></i>`}};/*!
  * shared v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const tf=typeof window<"u",MM=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",xr=t=>MM?Symbol(t):t,FM=(t,e,n)=>UM({l:t,k:e,s:n}),UM=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),ft=t=>typeof t=="number"&&isFinite(t),$M=t=>fd(t)==="[object Date]",Rr=t=>fd(t)==="[object RegExp]",mu=t=>ye(t)&&Object.keys(t).length===0;function VM(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const bt=Object.assign;let ng;const Ki=()=>ng||(ng=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function rg(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const BM=Object.prototype.hasOwnProperty;function cd(t,e){return BM.call(t,e)}const Be=Array.isArray,nt=t=>typeof t=="function",Y=t=>typeof t=="string",ke=t=>typeof t=="boolean",je=t=>t!==null&&typeof t=="object",Vw=Object.prototype.toString,fd=t=>Vw.call(t),ye=t=>fd(t)==="[object Object]",jM=t=>t==null?"":Be(t)||ye(t)&&t.toString===Vw?JSON.stringify(t,null,2):String(t);/*!
  * message-compiler v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const Ne={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15};function pu(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=t,a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function HM(t){throw t}function qM(t,e,n){return{line:t,column:e,offset:n}}function nf(t,e,n){const r={start:t,end:e};return n!=null&&(r.source=n),r}const Pn=" ",WM="\r",$t=`
`,GM=String.fromCharCode(8232),KM=String.fromCharCode(8233);function zM(t){const e=t;let n=0,r=1,s=1,i=0;const o=L=>e[L]===WM&&e[L+1]===$t,a=L=>e[L]===$t,u=L=>e[L]===KM,c=L=>e[L]===GM,h=L=>o(L)||a(L)||u(L)||c(L),l=()=>n,f=()=>r,d=()=>s,g=()=>i,y=L=>o(L)||u(L)||c(L)?$t:e[L],v=()=>y(n),p=()=>y(n+i);function E(){return i=0,h(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function T(){return o(n+i)&&i++,i++,e[n+i]}function w(){n=0,r=1,s=1,i=0}function S(L=0){i=L}function N(){const L=n+i;for(;L!==n;)E();i=0}return{index:l,line:f,column:d,peekOffset:g,charAt:y,currentChar:v,currentPeek:p,next:E,peek:T,reset:w,resetPeek:S,skipToPeek:N}}const sr=void 0,sg="'",YM="tokenizer";function XM(t,e={}){const n=e.location!==!1,r=zM(t),s=()=>r.index(),i=()=>qM(r.line(),r.column(),r.index()),o=i(),a=s(),u={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},c=()=>u,{onError:h}=e;function l(m,_,I,...O){const M=c();if(_.column+=I,_.offset+=I,h){const B=nf(M.startLoc,_),j=pu(m,B,{domain:YM,args:O});h(j)}}function f(m,_,I){m.endLoc=i(),m.currentType=_;const O={type:_};return n&&(O.loc=nf(m.startLoc,m.endLoc)),I!=null&&(O.value=I),O}const d=m=>f(m,14);function g(m,_){return m.currentChar()===_?(m.next(),_):(l(Ne.EXPECTED_TOKEN,i(),0,_),"")}function y(m){let _="";for(;m.currentPeek()===Pn||m.currentPeek()===$t;)_+=m.currentPeek(),m.peek();return _}function v(m){const _=y(m);return m.skipToPeek(),_}function p(m){if(m===sr)return!1;const _=m.charCodeAt(0);return _>=97&&_<=122||_>=65&&_<=90||_===95}function E(m){if(m===sr)return!1;const _=m.charCodeAt(0);return _>=48&&_<=57}function T(m,_){const{currentType:I}=_;if(I!==2)return!1;y(m);const O=p(m.currentPeek());return m.resetPeek(),O}function w(m,_){const{currentType:I}=_;if(I!==2)return!1;y(m);const O=m.currentPeek()==="-"?m.peek():m.currentPeek(),M=E(O);return m.resetPeek(),M}function S(m,_){const{currentType:I}=_;if(I!==2)return!1;y(m);const O=m.currentPeek()===sg;return m.resetPeek(),O}function N(m,_){const{currentType:I}=_;if(I!==8)return!1;y(m);const O=m.currentPeek()===".";return m.resetPeek(),O}function L(m,_){const{currentType:I}=_;if(I!==9)return!1;y(m);const O=p(m.currentPeek());return m.resetPeek(),O}function P(m,_){const{currentType:I}=_;if(!(I===8||I===12))return!1;y(m);const O=m.currentPeek()===":";return m.resetPeek(),O}function F(m,_){const{currentType:I}=_;if(I!==10)return!1;const O=()=>{const B=m.currentPeek();return B==="{"?p(m.peek()):B==="@"||B==="%"||B==="|"||B===":"||B==="."||B===Pn||!B?!1:B===$t?(m.peek(),O()):p(B)},M=O();return m.resetPeek(),M}function Q(m){y(m);const _=m.currentPeek()==="|";return m.resetPeek(),_}function Z(m){const _=y(m),I=m.currentPeek()==="%"&&m.peek()==="{";return m.resetPeek(),{isModulo:I,hasSpace:_.length>0}}function W(m,_=!0){const I=(M=!1,B="",j=!1)=>{const k=m.currentPeek();return k==="{"?B==="%"?!1:M:k==="@"||!k?B==="%"?!0:M:k==="%"?(m.peek(),I(M,"%",!0)):k==="|"?B==="%"||j?!0:!(B===Pn||B===$t):k===Pn?(m.peek(),I(!0,Pn,j)):k===$t?(m.peek(),I(!0,$t,j)):!0},O=I();return _&&m.resetPeek(),O}function te(m,_){const I=m.currentChar();return I===sr?sr:_(I)?(m.next(),I):null}function ce(m){return te(m,I=>{const O=I.charCodeAt(0);return O>=97&&O<=122||O>=65&&O<=90||O>=48&&O<=57||O===95||O===36})}function Te(m){return te(m,I=>{const O=I.charCodeAt(0);return O>=48&&O<=57})}function le(m){return te(m,I=>{const O=I.charCodeAt(0);return O>=48&&O<=57||O>=65&&O<=70||O>=97&&O<=102})}function se(m){let _="",I="";for(;_=Te(m);)I+=_;return I}function pe(m){v(m);const _=m.currentChar();return _!=="%"&&l(Ne.EXPECTED_TOKEN,i(),0,_),m.next(),"%"}function Ke(m){let _="";for(;;){const I=m.currentChar();if(I==="{"||I==="}"||I==="@"||I==="|"||!I)break;if(I==="%")if(W(m))_+=I,m.next();else break;else if(I===Pn||I===$t)if(W(m))_+=I,m.next();else{if(Q(m))break;_+=I,m.next()}else _+=I,m.next()}return _}function Ze(m){v(m);let _="",I="";for(;_=ce(m);)I+=_;return m.currentChar()===sr&&l(Ne.UNTERMINATED_CLOSING_BRACE,i(),0),I}function qe(m){v(m);let _="";return m.currentChar()==="-"?(m.next(),_+=`-${se(m)}`):_+=se(m),m.currentChar()===sr&&l(Ne.UNTERMINATED_CLOSING_BRACE,i(),0),_}function Fe(m){v(m),g(m,"'");let _="",I="";const O=B=>B!==sg&&B!==$t;for(;_=te(m,O);)_==="\\"?I+=Et(m):I+=_;const M=m.currentChar();return M===$t||M===sr?(l(Ne.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),M===$t&&(m.next(),g(m,"'")),I):(g(m,"'"),I)}function Et(m){const _=m.currentChar();switch(_){case"\\":case"'":return m.next(),`\\${_}`;case"u":return rt(m,_,4);case"U":return rt(m,_,6);default:return l(Ne.UNKNOWN_ESCAPE_SEQUENCE,i(),0,_),""}}function rt(m,_,I){g(m,_);let O="";for(let M=0;M<I;M++){const B=le(m);if(!B){l(Ne.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${_}${O}${m.currentChar()}`);break}O+=B}return`\\${_}${O}`}function $(m){v(m);let _="",I="";const O=M=>M!=="{"&&M!=="}"&&M!==Pn&&M!==$t;for(;_=te(m,O);)I+=_;return I}function x(m){let _="",I="";for(;_=ce(m);)I+=_;return I}function V(m){const _=(I=!1,O)=>{const M=m.currentChar();return M==="{"||M==="%"||M==="@"||M==="|"||!M||M===Pn?O:M===$t?(O+=M,m.next(),_(I,O)):(O+=M,m.next(),_(!0,O))};return _(!1,"")}function K(m){v(m);const _=g(m,"|");return v(m),_}function de(m,_){let I=null;switch(m.currentChar()){case"{":return _.braceNest>=1&&l(Ne.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),m.next(),I=f(_,2,"{"),v(m),_.braceNest++,I;case"}":return _.braceNest>0&&_.currentType===2&&l(Ne.EMPTY_PLACEHOLDER,i(),0),m.next(),I=f(_,3,"}"),_.braceNest--,_.braceNest>0&&v(m),_.inLinked&&_.braceNest===0&&(_.inLinked=!1),I;case"@":return _.braceNest>0&&l(Ne.UNTERMINATED_CLOSING_BRACE,i(),0),I=Ie(m,_)||d(_),_.braceNest=0,I;default:let M=!0,B=!0,j=!0;if(Q(m))return _.braceNest>0&&l(Ne.UNTERMINATED_CLOSING_BRACE,i(),0),I=f(_,1,K(m)),_.braceNest=0,_.inLinked=!1,I;if(_.braceNest>0&&(_.currentType===5||_.currentType===6||_.currentType===7))return l(Ne.UNTERMINATED_CLOSING_BRACE,i(),0),_.braceNest=0,ie(m,_);if(M=T(m,_))return I=f(_,5,Ze(m)),v(m),I;if(B=w(m,_))return I=f(_,6,qe(m)),v(m),I;if(j=S(m,_))return I=f(_,7,Fe(m)),v(m),I;if(!M&&!B&&!j)return I=f(_,13,$(m)),l(Ne.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,I.value),v(m),I;break}return I}function Ie(m,_){const{currentType:I}=_;let O=null;const M=m.currentChar();switch((I===8||I===9||I===12||I===10)&&(M===$t||M===Pn)&&l(Ne.INVALID_LINKED_FORMAT,i(),0),M){case"@":return m.next(),O=f(_,8,"@"),_.inLinked=!0,O;case".":return v(m),m.next(),f(_,9,".");case":":return v(m),m.next(),f(_,10,":");default:return Q(m)?(O=f(_,1,K(m)),_.braceNest=0,_.inLinked=!1,O):N(m,_)||P(m,_)?(v(m),Ie(m,_)):L(m,_)?(v(m),f(_,12,x(m))):F(m,_)?(v(m),M==="{"?de(m,_)||O:f(_,11,V(m))):(I===8&&l(Ne.INVALID_LINKED_FORMAT,i(),0),_.braceNest=0,_.inLinked=!1,ie(m,_))}}function ie(m,_){let I={type:14};if(_.braceNest>0)return de(m,_)||d(_);if(_.inLinked)return Ie(m,_)||d(_);switch(m.currentChar()){case"{":return de(m,_)||d(_);case"}":return l(Ne.UNBALANCED_CLOSING_BRACE,i(),0),m.next(),f(_,3,"}");case"@":return Ie(m,_)||d(_);default:if(Q(m))return I=f(_,1,K(m)),_.braceNest=0,_.inLinked=!1,I;const{isModulo:M,hasSpace:B}=Z(m);if(M)return B?f(_,0,Ke(m)):f(_,4,pe(m));if(W(m))return f(_,0,Ke(m));break}return I}function b(){const{currentType:m,offset:_,startLoc:I,endLoc:O}=u;return u.lastType=m,u.lastOffset=_,u.lastStartLoc=I,u.lastEndLoc=O,u.offset=s(),u.startLoc=i(),r.currentChar()===sr?f(u,14):ie(r,u)}return{nextToken:b,currentOffset:s,currentPosition:i,context:c}}const QM="parser",JM=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function ZM(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}}function eF(t={}){const e=t.location!==!1,{onError:n}=t;function r(p,E,T,w,...S){const N=p.currentPosition();if(N.offset+=w,N.column+=w,n){const L=nf(T,N),P=pu(E,L,{domain:QM,args:S});n(P)}}function s(p,E,T){const w={type:p,start:E,end:E};return e&&(w.loc={start:T,end:T}),w}function i(p,E,T,w){p.end=E,w&&(p.type=w),e&&p.loc&&(p.loc.end=T)}function o(p,E){const T=p.context(),w=s(3,T.offset,T.startLoc);return w.value=E,i(w,p.currentOffset(),p.currentPosition()),w}function a(p,E){const T=p.context(),{lastOffset:w,lastStartLoc:S}=T,N=s(5,w,S);return N.index=parseInt(E,10),p.nextToken(),i(N,p.currentOffset(),p.currentPosition()),N}function u(p,E){const T=p.context(),{lastOffset:w,lastStartLoc:S}=T,N=s(4,w,S);return N.key=E,p.nextToken(),i(N,p.currentOffset(),p.currentPosition()),N}function c(p,E){const T=p.context(),{lastOffset:w,lastStartLoc:S}=T,N=s(9,w,S);return N.value=E.replace(JM,ZM),p.nextToken(),i(N,p.currentOffset(),p.currentPosition()),N}function h(p){const E=p.nextToken(),T=p.context(),{lastOffset:w,lastStartLoc:S}=T,N=s(8,w,S);return E.type!==12?(r(p,Ne.UNEXPECTED_EMPTY_LINKED_MODIFIER,T.lastStartLoc,0),N.value="",i(N,w,S),{nextConsumeToken:E,node:N}):(E.value==null&&r(p,Ne.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,bn(E)),N.value=E.value||"",i(N,p.currentOffset(),p.currentPosition()),{node:N})}function l(p,E){const T=p.context(),w=s(7,T.offset,T.startLoc);return w.value=E,i(w,p.currentOffset(),p.currentPosition()),w}function f(p){const E=p.context(),T=s(6,E.offset,E.startLoc);let w=p.nextToken();if(w.type===9){const S=h(p);T.modifier=S.node,w=S.nextConsumeToken||p.nextToken()}switch(w.type!==10&&r(p,Ne.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,bn(w)),w=p.nextToken(),w.type===2&&(w=p.nextToken()),w.type){case 11:w.value==null&&r(p,Ne.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,bn(w)),T.key=l(p,w.value||"");break;case 5:w.value==null&&r(p,Ne.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,bn(w)),T.key=u(p,w.value||"");break;case 6:w.value==null&&r(p,Ne.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,bn(w)),T.key=a(p,w.value||"");break;case 7:w.value==null&&r(p,Ne.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,bn(w)),T.key=c(p,w.value||"");break;default:r(p,Ne.UNEXPECTED_EMPTY_LINKED_KEY,E.lastStartLoc,0);const S=p.context(),N=s(7,S.offset,S.startLoc);return N.value="",i(N,S.offset,S.startLoc),T.key=N,i(T,S.offset,S.startLoc),{nextConsumeToken:w,node:T}}return i(T,p.currentOffset(),p.currentPosition()),{node:T}}function d(p){const E=p.context(),T=E.currentType===1?p.currentOffset():E.offset,w=E.currentType===1?E.endLoc:E.startLoc,S=s(2,T,w);S.items=[];let N=null;do{const F=N||p.nextToken();switch(N=null,F.type){case 0:F.value==null&&r(p,Ne.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,bn(F)),S.items.push(o(p,F.value||""));break;case 6:F.value==null&&r(p,Ne.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,bn(F)),S.items.push(a(p,F.value||""));break;case 5:F.value==null&&r(p,Ne.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,bn(F)),S.items.push(u(p,F.value||""));break;case 7:F.value==null&&r(p,Ne.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,bn(F)),S.items.push(c(p,F.value||""));break;case 8:const Q=f(p);S.items.push(Q.node),N=Q.nextConsumeToken||null;break}}while(E.currentType!==14&&E.currentType!==1);const L=E.currentType===1?E.lastOffset:p.currentOffset(),P=E.currentType===1?E.lastEndLoc:p.currentPosition();return i(S,L,P),S}function g(p,E,T,w){const S=p.context();let N=w.items.length===0;const L=s(1,E,T);L.cases=[],L.cases.push(w);do{const P=d(p);N||(N=P.items.length===0),L.cases.push(P)}while(S.currentType!==14);return N&&r(p,Ne.MUST_HAVE_MESSAGES_IN_PLURAL,T,0),i(L,p.currentOffset(),p.currentPosition()),L}function y(p){const E=p.context(),{offset:T,startLoc:w}=E,S=d(p);return E.currentType===14?S:g(p,T,w,S)}function v(p){const E=XM(p,bt({},t)),T=E.context(),w=s(0,T.offset,T.startLoc);return e&&w.loc&&(w.loc.source=p),w.body=y(E),T.currentType!==14&&r(E,Ne.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,p[T.offset]||""),i(w,E.currentOffset(),E.currentPosition()),w}return{parse:v}}function bn(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function tF(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function ig(t,e){for(let n=0;n<t.length;n++)hd(t[n],e)}function hd(t,e){switch(t.type){case 1:ig(t.cases,e),e.helper("plural");break;case 2:ig(t.items,e);break;case 6:hd(t.key,e),e.helper("linked"),e.helper("type");break;case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function nF(t,e={}){const n=tF(t);n.helper("normalize"),t.body&&hd(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function rF(t,e){const{sourceMap:n,filename:r,breakLineCode:s,needIndent:i}=e,o={source:t.loc.source,filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:i,indentLevel:0},a=()=>o;function u(y,v){o.code+=y}function c(y,v=!0){const p=v?s:"";u(i?p+"  ".repeat(y):p)}function h(y=!0){const v=++o.indentLevel;y&&c(v)}function l(y=!0){const v=--o.indentLevel;y&&c(v)}function f(){c(o.indentLevel)}return{context:a,push:u,indent:h,deindent:l,newline:f,helper:y=>`_${y}`,needIndent:()=>o.needIndent}}function sF(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),si(t,e.key),e.modifier?(t.push(", "),si(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function iF(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let i=0;i<s&&(si(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function oF(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&(si(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function aF(t,e){e.body?si(t,e.body):t.push("null")}function si(t,e){const{helper:n}=t;switch(e.type){case 0:aF(t,e);break;case 1:oF(t,e);break;case 2:iF(t,e);break;case 6:sF(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const lF=(t,e={})=>{const n=Y(e.mode)?e.mode:"normal",r=Y(e.filename)?e.filename:"message.intl",s=!!e.sourceMap,i=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,o=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],u=rF(t,{mode:n,filename:r,sourceMap:s,breakLineCode:i,needIndent:o});u.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),u.indent(o),a.length>0&&(u.push(`const { ${a.map(l=>`${l}: _${l}`).join(", ")} } = ctx`),u.newline()),u.push("return "),si(u,t),u.deindent(o),u.push("}");const{code:c,map:h}=u.context();return{ast:t,code:c,map:h?h.toJSON():void 0}};function uF(t,e={}){const n=bt({},e),s=eF(n).parse(t);return nF(s,n),lF(s,n)}/*!
  * devtools-if v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const Bw={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * core-base v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const Pr=[];Pr[0]={w:[0],i:[3,0],["["]:[4],o:[7]};Pr[1]={w:[1],["."]:[2],["["]:[4],o:[7]};Pr[2]={w:[2],i:[3,0],[0]:[3,0]};Pr[3]={i:[3,0],[0]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};Pr[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};Pr[5]={["'"]:[4,0],o:8,l:[5,0]};Pr[6]={['"']:[4,0],o:8,l:[6,0]};const cF=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function fF(t){return cF.test(t)}function hF(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function dF(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function mF(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:fF(e)?hF(e):"*"+e}function pF(t){const e=[];let n=-1,r=0,s=0,i,o,a,u,c,h,l;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},f[2]=()=>{f[0](),s++},f[3]=()=>{if(s>0)s--,r=4,f[0]();else{if(s=0,o===void 0||(o=mF(o),o===!1))return!1;f[1]()}};function d(){const g=t[n+1];if(r===5&&g==="'"||r===6&&g==='"')return n++,a="\\"+g,f[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&d())){if(u=dF(i),l=Pr[r],c=l[u]||l.l||8,c===8||(r=c[0],c[1]!==void 0&&(h=f[c[1]],h&&(a=i,h()===!1))))return;if(r===7)return e}}const og=new Map;function gF(t,e){return je(t)?t[e]:null}function _F(t,e){if(!je(t))return null;let n=og.get(e);if(n||(n=pF(e),n&&og.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=s[n[i]];if(o===void 0)return null;s=o,i++}return s}const yF=t=>t,vF=t=>"",bF="text",wF=t=>t.length===0?"":t.join(""),EF=jM;function ag(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function TF(t){const e=ft(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(ft(t.named.count)||ft(t.named.n))?ft(t.named.count)?t.named.count:ft(t.named.n)?t.named.n:e:e}function IF(t,e){e.count||(e.count=t),e.n||(e.n=t)}function AF(t={}){const e=t.locale,n=TF(t),r=je(t.pluralRules)&&Y(e)&&nt(t.pluralRules[e])?t.pluralRules[e]:ag,s=je(t.pluralRules)&&Y(e)&&nt(t.pluralRules[e])?ag:void 0,i=p=>p[r(n,p.length,s)],o=t.list||[],a=p=>o[p],u=t.named||{};ft(t.pluralIndex)&&IF(n,u);const c=p=>u[p];function h(p){const E=nt(t.messages)?t.messages(p):je(t.messages)?t.messages[p]:!1;return E||(t.parent?t.parent.message(p):vF)}const l=p=>t.modifiers?t.modifiers[p]:yF,f=ye(t.processor)&&nt(t.processor.normalize)?t.processor.normalize:wF,d=ye(t.processor)&&nt(t.processor.interpolate)?t.processor.interpolate:EF,g=ye(t.processor)&&Y(t.processor.type)?t.processor.type:bF,v={list:a,named:c,plural:i,linked:(p,...E)=>{const[T,w]=E;let S="text",N="";E.length===1?je(T)?(N=T.modifier||N,S=T.type||S):Y(T)&&(N=T||N):E.length===2&&(Y(T)&&(N=T||N),Y(w)&&(S=w||S));let L=h(p)(v);return S==="vnode"&&Be(L)&&N&&(L=L[0]),N?l(N)(L,S):L},message:h,type:g,interpolate:d,normalize:f};return v}let yo=null;function SF(t){yo=t}function kF(t,e,n){yo&&yo.emit(Bw.I18nInit,{timestamp:Date.now(),i18n:t,version:e,meta:n})}const CF=RF(Bw.FunctionTranslate);function RF(t){return e=>yo&&yo.emit(t,e)}const OF={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,__EXTEND_POINT__:7};function NF(t,e,n){return[...new Set([n,...Be(e)?e:je(e)?Object.keys(e):Y(e)?[e]:[n]])]}function jw(t,e,n){const r=Y(n)?n:Qo,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;Be(o);)o=lg(i,o,e);const a=Be(e)||!ye(e)?e:e.default?e.default:null;o=Y(a)?[a]:a,Be(o)&&lg(i,o,!1),s.__localeChainCache.set(r,i)}return i}function lg(t,e,n){let r=!0;for(let s=0;s<e.length&&ke(r);s++){const i=e[s];Y(i)&&(r=LF(t,e[s],n))}return r}function LF(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=DF(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function DF(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(Be(n)||ye(n))&&n[s]&&(r=n[s])}return r}const xF="9.2.2",gu=-1,Qo="en-US",ug="",cg=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function PF(){return{upper:(t,e)=>e==="text"&&Y(t)?t.toUpperCase():e==="vnode"&&je(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&Y(t)?t.toLowerCase():e==="vnode"&&je(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&Y(t)?cg(t):e==="vnode"&&je(t)&&"__v_isVNode"in t?cg(t.children):t}}let Hw;function MF(t){Hw=t}let qw;function FF(t){qw=t}let Ww;function UF(t){Ww=t}let Gw=null;const fg=t=>{Gw=t},$F=()=>Gw;let Kw=null;const hg=t=>{Kw=t},VF=()=>Kw;let dg=0;function BF(t={}){const e=Y(t.version)?t.version:xF,n=Y(t.locale)?t.locale:Qo,r=Be(t.fallbackLocale)||ye(t.fallbackLocale)||Y(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:n,s=ye(t.messages)?t.messages:{[n]:{}},i=ye(t.datetimeFormats)?t.datetimeFormats:{[n]:{}},o=ye(t.numberFormats)?t.numberFormats:{[n]:{}},a=bt({},t.modifiers||{},PF()),u=t.pluralRules||{},c=nt(t.missing)?t.missing:null,h=ke(t.missingWarn)||Rr(t.missingWarn)?t.missingWarn:!0,l=ke(t.fallbackWarn)||Rr(t.fallbackWarn)?t.fallbackWarn:!0,f=!!t.fallbackFormat,d=!!t.unresolving,g=nt(t.postTranslation)?t.postTranslation:null,y=ye(t.processor)?t.processor:null,v=ke(t.warnHtmlMessage)?t.warnHtmlMessage:!0,p=!!t.escapeParameter,E=nt(t.messageCompiler)?t.messageCompiler:Hw,T=nt(t.messageResolver)?t.messageResolver:qw||gF,w=nt(t.localeFallbacker)?t.localeFallbacker:Ww||NF,S=je(t.fallbackContext)?t.fallbackContext:void 0,N=nt(t.onWarn)?t.onWarn:VM,L=t,P=je(L.__datetimeFormatters)?L.__datetimeFormatters:new Map,F=je(L.__numberFormatters)?L.__numberFormatters:new Map,Q=je(L.__meta)?L.__meta:{};dg++;const Z={version:e,cid:dg,locale:n,fallbackLocale:r,messages:s,modifiers:a,pluralRules:u,missing:c,missingWarn:h,fallbackWarn:l,fallbackFormat:f,unresolving:d,postTranslation:g,processor:y,warnHtmlMessage:v,escapeParameter:p,messageCompiler:E,messageResolver:T,localeFallbacker:w,fallbackContext:S,onWarn:N,__meta:Q};return Z.datetimeFormats=i,Z.numberFormats=o,Z.__datetimeFormatters=P,Z.__numberFormatters=F,__INTLIFY_PROD_DEVTOOLS__&&kF(Z,e,Q),Z}function dd(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return Y(a)?a:e}else return e}function Si(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}const jF=t=>t;let mg=Object.create(null);function HF(t,e={}){{const r=(e.onCacheKey||jF)(t),s=mg[r];if(s)return s;let i=!1;const o=e.onError||HM;e.onError=c=>{i=!0,o(c)};const{code:a}=uF(t,e),u=new Function(`return ${a}`)();return i?u:mg[r]=u}}let zw=Ne.__EXTEND_POINT__;const Qu=()=>++zw,Os={INVALID_ARGUMENT:zw,INVALID_DATE_ARGUMENT:Qu(),INVALID_ISO_DATE_ARGUMENT:Qu(),__EXTEND_POINT__:Qu()};function Ns(t){return pu(t,null,void 0)}const pg=()=>"",En=t=>nt(t);function gg(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[u,c]=rf(...e),h=ke(c.missingWarn)?c.missingWarn:t.missingWarn,l=ke(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn,f=ke(c.escapeParameter)?c.escapeParameter:t.escapeParameter,d=!!c.resolvedMessage,g=Y(c.default)||ke(c.default)?ke(c.default)?i?u:()=>u:c.default:n?i?u:()=>u:"",y=n||g!=="",v=Y(c.locale)?c.locale:t.locale;f&&qF(c);let[p,E,T]=d?[u,v,a[v]||{}]:Yw(t,u,v,o,l,h),w=p,S=u;if(!d&&!(Y(w)||En(w))&&y&&(w=g,S=w),!d&&(!(Y(w)||En(w))||!Y(E)))return s?gu:u;let N=!1;const L=()=>{N=!0},P=En(w)?w:Xw(t,u,E,w,S,L);if(N)return w;const F=KF(t,E,T,c),Q=AF(F),Z=WF(t,P,Q),W=r?r(Z,u):Z;if(__INTLIFY_PROD_DEVTOOLS__){const te={timestamp:Date.now(),key:Y(u)?u:En(w)?w.key:"",locale:E||(En(w)?w.locale:""),format:Y(w)?w:En(w)?w.source:"",message:W};te.meta=bt({},t.__meta,$F()||{}),CF(te)}return W}function qF(t){Be(t.list)?t.list=t.list.map(e=>Y(e)?rg(e):e):je(t.named)&&Object.keys(t.named).forEach(e=>{Y(t.named[e])&&(t.named[e]=rg(t.named[e]))})}function Yw(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:u,localeFallbacker:c}=t,h=c(t,r,n);let l={},f,d=null;const g="translate";for(let y=0;y<h.length&&(f=h[y],l=o[f]||{},(d=u(l,e))===null&&(d=l[e]),!(Y(d)||nt(d)));y++){const v=dd(t,e,f,i,g);v!==e&&(d=v)}return[d,f,l]}function Xw(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(En(r)){const c=r;return c.locale=c.locale||n,c.key=c.key||e,c}if(o==null){const c=()=>r;return c.locale=n,c.key=e,c}const u=o(r,GF(t,n,s,r,a,i));return u.locale=n,u.key=e,u.source=r,u}function WF(t,e,n){return e(n)}function rf(...t){const[e,n,r]=t,s={};if(!Y(e)&&!ft(e)&&!En(e))throw Ns(Os.INVALID_ARGUMENT);const i=ft(e)?String(e):(En(e),e);return ft(n)?s.plural=n:Y(n)?s.default=n:ye(n)&&!mu(n)?s.named=n:Be(n)&&(s.list=n),ft(r)?s.plural=r:Y(r)?s.default=r:ye(r)&&bt(s,r),[i,s]}function GF(t,e,n,r,s,i){return{warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>FM(e,n,o)}}function KF(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:u,missingWarn:c,fallbackContext:h}=t,f={locale:e,modifiers:s,pluralRules:i,messages:d=>{let g=o(n,d);if(g==null&&h){const[,,y]=Yw(h,d,e,a,u,c);g=o(y,d)}if(Y(g)){let y=!1;const p=Xw(t,d,e,g,d,()=>{y=!0});return y?pg:p}else return En(g)?g:pg}};return t.processor&&(f.processor=t.processor),r.list&&(f.list=r.list),r.named&&(f.named=r.named),ft(r.plural)&&(f.pluralIndex=r.plural),f}function _g(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[u,c,h,l]=sf(...e),f=ke(h.missingWarn)?h.missingWarn:t.missingWarn;ke(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const d=!!h.part,g=Y(h.locale)?h.locale:t.locale,y=o(t,s,g);if(!Y(u)||u==="")return new Intl.DateTimeFormat(g,l).format(c);let v={},p,E=null;const T="datetime format";for(let N=0;N<y.length&&(p=y[N],v=n[p]||{},E=v[u],!ye(E));N++)dd(t,u,p,f,T);if(!ye(E)||!Y(p))return r?gu:u;let w=`${p}__${u}`;mu(l)||(w=`${w}__${JSON.stringify(l)}`);let S=a.get(w);return S||(S=new Intl.DateTimeFormat(p,bt({},E,l)),a.set(w,S)),d?S.formatToParts(c):S.format(c)}const Qw=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function sf(...t){const[e,n,r,s]=t,i={};let o={},a;if(Y(e)){const u=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!u)throw Ns(Os.INVALID_ISO_DATE_ARGUMENT);const c=u[3]?u[3].trim().startsWith("T")?`${u[1].trim()}${u[3].trim()}`:`${u[1].trim()}T${u[3].trim()}`:u[1].trim();a=new Date(c);try{a.toISOString()}catch{throw Ns(Os.INVALID_ISO_DATE_ARGUMENT)}}else if($M(e)){if(isNaN(e.getTime()))throw Ns(Os.INVALID_DATE_ARGUMENT);a=e}else if(ft(e))a=e;else throw Ns(Os.INVALID_ARGUMENT);return Y(n)?i.key=n:ye(n)&&Object.keys(n).forEach(u=>{Qw.includes(u)?o[u]=n[u]:i[u]=n[u]}),Y(r)?i.locale=r:ye(r)&&(o=r),ye(s)&&(o=s),[i.key||"",a,i,o]}function yg(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function vg(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[u,c,h,l]=of(...e),f=ke(h.missingWarn)?h.missingWarn:t.missingWarn;ke(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const d=!!h.part,g=Y(h.locale)?h.locale:t.locale,y=o(t,s,g);if(!Y(u)||u==="")return new Intl.NumberFormat(g,l).format(c);let v={},p,E=null;const T="number format";for(let N=0;N<y.length&&(p=y[N],v=n[p]||{},E=v[u],!ye(E));N++)dd(t,u,p,f,T);if(!ye(E)||!Y(p))return r?gu:u;let w=`${p}__${u}`;mu(l)||(w=`${w}__${JSON.stringify(l)}`);let S=a.get(w);return S||(S=new Intl.NumberFormat(p,bt({},E,l)),a.set(w,S)),d?S.formatToParts(c):S.format(c)}const Jw=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function of(...t){const[e,n,r,s]=t,i={};let o={};if(!ft(e))throw Ns(Os.INVALID_ARGUMENT);const a=e;return Y(n)?i.key=n:ye(n)&&Object.keys(n).forEach(u=>{Jw.includes(u)?o[u]=n[u]:i[u]=n[u]}),Y(r)?i.locale=r:ye(r)&&(o=r),ye(s)&&(o=s),[i.key||"",a,i,o]}function bg(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Ki().__INTLIFY_PROD_DEVTOOLS__=!1);/*!
  * vue-i18n v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const zF="9.2.2";function YF(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Ki().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Ki().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Ki().__INTLIFY_PROD_DEVTOOLS__=!1)}OF.__EXTEND_POINT__;let Zw=Ne.__EXTEND_POINT__;const qt=()=>++Zw,ut={UNEXPECTED_RETURN_TYPE:Zw,INVALID_ARGUMENT:qt(),MUST_BE_CALL_SETUP_TOP:qt(),NOT_INSLALLED:qt(),NOT_AVAILABLE_IN_LEGACY_MODE:qt(),REQUIRED_VALUE:qt(),INVALID_VALUE:qt(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:qt(),NOT_INSLALLED_WITH_PROVIDE:qt(),UNEXPECTED_ERROR:qt(),NOT_COMPATIBLE_LEGACY_VUE_I18N:qt(),BRIDGE_SUPPORT_VUE_2_ONLY:qt(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:qt(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:qt(),__EXTEND_POINT__:qt()};function mt(t,...e){return pu(t,null,void 0)}const af=xr("__transrateVNode"),lf=xr("__datetimeParts"),uf=xr("__numberParts"),e0=xr("__setPluralRules");xr("__intlifyMeta");const t0=xr("__injectWithOption");function cf(t){if(!je(t))return t;for(const e in t)if(cd(t,e))if(!e.includes("."))je(t[e])&&cf(t[e]);else{const n=e.split("."),r=n.length-1;let s=t;for(let i=0;i<r;i++)n[i]in s||(s[n[i]]={}),s=s[n[i]];s[n[r]]=t[e],delete t[e],je(s[n[r]])&&cf(s[n[r]])}return t}function _u(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=ye(n)?n:Be(r)?{}:{[t]:{}};if(Be(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:u,resource:c}=a;u?(o[u]=o[u]||{},zi(c,o[u])):zi(c,o)}else Y(a)&&zi(JSON.parse(a),o)}),s==null&&i)for(const a in o)cd(o,a)&&cf(o[a]);return o}const pa=t=>!je(t)||Be(t);function zi(t,e){if(pa(t)||pa(e))throw mt(ut.INVALID_VALUE);for(const n in t)cd(t,n)&&(pa(t[n])||pa(e[n])?e[n]=t[n]:zi(t[n],e[n]))}function n0(t){return t.type}function r0(t,e,n){let r=je(e.messages)?e.messages:{};"__i18nGlobal"in n&&(r=_u(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(je(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(je(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function wg(t){return oe(Eo,null,t,0)}const Eg="__INTLIFY_META__";let Tg=0;function Ig(t){return(e,n,r,s)=>t(n,r,Hn()||void 0,s)}const XF=()=>{const t=Hn();let e=null;return t&&(e=n0(t)[Eg])?{[Eg]:e}:null};function md(t={},e){const{__root:n}=t,r=n===void 0;let s=ke(t.inheritLocale)?t.inheritLocale:!0;const i=Ye(n&&s?n.locale.value:Y(t.locale)?t.locale:Qo),o=Ye(n&&s?n.fallbackLocale.value:Y(t.fallbackLocale)||Be(t.fallbackLocale)||ye(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:i.value),a=Ye(_u(i.value,t)),u=Ye(ye(t.datetimeFormats)?t.datetimeFormats:{[i.value]:{}}),c=Ye(ye(t.numberFormats)?t.numberFormats:{[i.value]:{}});let h=n?n.missingWarn:ke(t.missingWarn)||Rr(t.missingWarn)?t.missingWarn:!0,l=n?n.fallbackWarn:ke(t.fallbackWarn)||Rr(t.fallbackWarn)?t.fallbackWarn:!0,f=n?n.fallbackRoot:ke(t.fallbackRoot)?t.fallbackRoot:!0,d=!!t.fallbackFormat,g=nt(t.missing)?t.missing:null,y=nt(t.missing)?Ig(t.missing):null,v=nt(t.postTranslation)?t.postTranslation:null,p=n?n.warnHtmlMessage:ke(t.warnHtmlMessage)?t.warnHtmlMessage:!0,E=!!t.escapeParameter;const T=n?n.modifiers:ye(t.modifiers)?t.modifiers:{};let w=t.pluralRules||n&&n.pluralRules,S;S=(()=>{r&&hg(null);const A={version:zF,locale:i.value,fallbackLocale:o.value,messages:a.value,modifiers:T,pluralRules:w,missing:y===null?void 0:y,missingWarn:h,fallbackWarn:l,fallbackFormat:d,unresolving:!0,postTranslation:v===null?void 0:v,warnHtmlMessage:p,escapeParameter:E,messageResolver:t.messageResolver,__meta:{framework:"vue"}};A.datetimeFormats=u.value,A.numberFormats=c.value,A.__datetimeFormatters=ye(S)?S.__datetimeFormatters:void 0,A.__numberFormatters=ye(S)?S.__numberFormatters:void 0;const R=BF(A);return r&&hg(R),R})(),Si(S,i.value,o.value);function L(){return[i.value,o.value,a.value,u.value,c.value]}const P=Ee({get:()=>i.value,set:A=>{i.value=A,S.locale=i.value}}),F=Ee({get:()=>o.value,set:A=>{o.value=A,S.fallbackLocale=o.value,Si(S,i.value,A)}}),Q=Ee(()=>a.value),Z=Ee(()=>u.value),W=Ee(()=>c.value);function te(){return nt(v)?v:null}function ce(A){v=A,S.postTranslation=A}function Te(){return g}function le(A){A!==null&&(y=Ig(A)),g=A,S.missing=y}const se=(A,R,q,H,X,fe)=>{L();let ge;if(__INTLIFY_PROD_DEVTOOLS__)try{fg(XF()),r||(S.fallbackContext=n?VF():void 0),ge=A(S)}finally{fg(null),r||(S.fallbackContext=void 0)}else ge=A(S);if(ft(ge)&&ge===gu){const[Re,Ht]=R();return n&&f?H(n):X(Re)}else{if(fe(ge))return ge;throw mt(ut.UNEXPECTED_RETURN_TYPE)}};function pe(...A){return se(R=>Reflect.apply(gg,null,[R,...A]),()=>rf(...A),"translate",R=>Reflect.apply(R.t,R,[...A]),R=>R,R=>Y(R))}function Ke(...A){const[R,q,H]=A;if(H&&!je(H))throw mt(ut.INVALID_ARGUMENT);return pe(R,q,bt({resolvedMessage:!0},H||{}))}function Ze(...A){return se(R=>Reflect.apply(_g,null,[R,...A]),()=>sf(...A),"datetime format",R=>Reflect.apply(R.d,R,[...A]),()=>ug,R=>Y(R))}function qe(...A){return se(R=>Reflect.apply(vg,null,[R,...A]),()=>of(...A),"number format",R=>Reflect.apply(R.n,R,[...A]),()=>ug,R=>Y(R))}function Fe(A){return A.map(R=>Y(R)||ft(R)||ke(R)?wg(String(R)):R)}const rt={normalize:Fe,interpolate:A=>A,type:"vnode"};function $(...A){return se(R=>{let q;const H=R;try{H.processor=rt,q=Reflect.apply(gg,null,[H,...A])}finally{H.processor=null}return q},()=>rf(...A),"translate",R=>R[af](...A),R=>[wg(R)],R=>Be(R))}function x(...A){return se(R=>Reflect.apply(vg,null,[R,...A]),()=>of(...A),"number format",R=>R[uf](...A),()=>[],R=>Y(R)||Be(R))}function V(...A){return se(R=>Reflect.apply(_g,null,[R,...A]),()=>sf(...A),"datetime format",R=>R[lf](...A),()=>[],R=>Y(R)||Be(R))}function K(A){w=A,S.pluralRules=w}function de(A,R){const q=Y(R)?R:i.value,H=b(q);return S.messageResolver(H,A)!==null}function Ie(A){let R=null;const q=jw(S,o.value,i.value);for(let H=0;H<q.length;H++){const X=a.value[q[H]]||{},fe=S.messageResolver(X,A);if(fe!=null){R=fe;break}}return R}function ie(A){const R=Ie(A);return R??(n?n.tm(A)||{}:{})}function b(A){return a.value[A]||{}}function m(A,R){a.value[A]=R,S.messages=a.value}function _(A,R){a.value[A]=a.value[A]||{},zi(R,a.value[A]),S.messages=a.value}function I(A){return u.value[A]||{}}function O(A,R){u.value[A]=R,S.datetimeFormats=u.value,yg(S,A,R)}function M(A,R){u.value[A]=bt(u.value[A]||{},R),S.datetimeFormats=u.value,yg(S,A,R)}function B(A){return c.value[A]||{}}function j(A,R){c.value[A]=R,S.numberFormats=c.value,bg(S,A,R)}function k(A,R){c.value[A]=bt(c.value[A]||{},R),S.numberFormats=c.value,bg(S,A,R)}Tg++,n&&tf&&(lt(n.locale,A=>{s&&(i.value=A,S.locale=A,Si(S,i.value,o.value))}),lt(n.fallbackLocale,A=>{s&&(o.value=A,S.fallbackLocale=A,Si(S,i.value,o.value))}));const C={id:Tg,locale:P,fallbackLocale:F,get inheritLocale(){return s},set inheritLocale(A){s=A,A&&n&&(i.value=n.locale.value,o.value=n.fallbackLocale.value,Si(S,i.value,o.value))},get availableLocales(){return Object.keys(a.value).sort()},messages:Q,get modifiers(){return T},get pluralRules(){return w||{}},get isGlobal(){return r},get missingWarn(){return h},set missingWarn(A){h=A,S.missingWarn=h},get fallbackWarn(){return l},set fallbackWarn(A){l=A,S.fallbackWarn=l},get fallbackRoot(){return f},set fallbackRoot(A){f=A},get fallbackFormat(){return d},set fallbackFormat(A){d=A,S.fallbackFormat=d},get warnHtmlMessage(){return p},set warnHtmlMessage(A){p=A,S.warnHtmlMessage=A},get escapeParameter(){return E},set escapeParameter(A){E=A,S.escapeParameter=A},t:pe,getLocaleMessage:b,setLocaleMessage:m,mergeLocaleMessage:_,getPostTranslationHandler:te,setPostTranslationHandler:ce,getMissingHandler:Te,setMissingHandler:le,[e0]:K};return C.datetimeFormats=Z,C.numberFormats=W,C.rt=Ke,C.te=de,C.tm=ie,C.d=Ze,C.n=qe,C.getDateTimeFormat=I,C.setDateTimeFormat=O,C.mergeDateTimeFormat=M,C.getNumberFormat=B,C.setNumberFormat=j,C.mergeNumberFormat=k,C[t0]=t.__injectWithOption,C[af]=$,C[lf]=V,C[uf]=x,C}function QF(t){const e=Y(t.locale)?t.locale:Qo,n=Y(t.fallbackLocale)||Be(t.fallbackLocale)||ye(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,r=nt(t.missing)?t.missing:void 0,s=ke(t.silentTranslationWarn)||Rr(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,i=ke(t.silentFallbackWarn)||Rr(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=ke(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,u=ye(t.modifiers)?t.modifiers:{},c=t.pluralizationRules,h=nt(t.postTranslation)?t.postTranslation:void 0,l=Y(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,f=!!t.escapeParameterHtml,d=ke(t.sync)?t.sync:!0;let g=t.messages;if(ye(t.sharedMessages)){const S=t.sharedMessages;g=Object.keys(S).reduce((L,P)=>{const F=L[P]||(L[P]={});return bt(F,S[P]),L},g||{})}const{__i18n:y,__root:v,__injectWithOption:p}=t,E=t.datetimeFormats,T=t.numberFormats,w=t.flatJson;return{locale:e,fallbackLocale:n,messages:g,flatJson:w,datetimeFormats:E,numberFormats:T,missing:r,missingWarn:s,fallbackWarn:i,fallbackRoot:o,fallbackFormat:a,modifiers:u,pluralRules:c,postTranslation:h,warnHtmlMessage:l,escapeParameter:f,messageResolver:t.messageResolver,inheritLocale:d,__i18n:y,__root:v,__injectWithOption:p}}function ff(t={},e){{const n=md(QF(t)),r={id:n.id,get locale(){return n.locale.value},set locale(s){n.locale.value=s},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(s){n.fallbackLocale.value=s},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(s){},get missing(){return n.getMissingHandler()},set missing(s){n.setMissingHandler(s)},get silentTranslationWarn(){return ke(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(s){n.missingWarn=ke(s)?!s:s},get silentFallbackWarn(){return ke(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(s){n.fallbackWarn=ke(s)?!s:s},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(s){n.fallbackFormat=s},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(s){n.setPostTranslationHandler(s)},get sync(){return n.inheritLocale},set sync(s){n.inheritLocale=s},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(s){n.warnHtmlMessage=s!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(s){n.escapeParameter=s},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(s){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...s){const[i,o,a]=s,u={};let c=null,h=null;if(!Y(i))throw mt(ut.INVALID_ARGUMENT);const l=i;return Y(o)?u.locale=o:Be(o)?c=o:ye(o)&&(h=o),Be(a)?c=a:ye(a)&&(h=a),Reflect.apply(n.t,n,[l,c||h||{},u])},rt(...s){return Reflect.apply(n.rt,n,[...s])},tc(...s){const[i,o,a]=s,u={plural:1};let c=null,h=null;if(!Y(i))throw mt(ut.INVALID_ARGUMENT);const l=i;return Y(o)?u.locale=o:ft(o)?u.plural=o:Be(o)?c=o:ye(o)&&(h=o),Y(a)?u.locale=a:Be(a)?c=a:ye(a)&&(h=a),Reflect.apply(n.t,n,[l,c||h||{},u])},te(s,i){return n.te(s,i)},tm(s){return n.tm(s)},getLocaleMessage(s){return n.getLocaleMessage(s)},setLocaleMessage(s,i){n.setLocaleMessage(s,i)},mergeLocaleMessage(s,i){n.mergeLocaleMessage(s,i)},d(...s){return Reflect.apply(n.d,n,[...s])},getDateTimeFormat(s){return n.getDateTimeFormat(s)},setDateTimeFormat(s,i){n.setDateTimeFormat(s,i)},mergeDateTimeFormat(s,i){n.mergeDateTimeFormat(s,i)},n(...s){return Reflect.apply(n.n,n,[...s])},getNumberFormat(s){return n.getNumberFormat(s)},setNumberFormat(s,i){n.setNumberFormat(s,i)},mergeNumberFormat(s,i){n.mergeNumberFormat(s,i)},getChoiceIndex(s,i){return-1},__onComponentInstanceCreated(s){const{componentInstanceCreatedListener:i}=t;i&&i(s,r)}};return r}}const pd={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function JF({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>r=[...r,...Be(s.children)?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},{})}function s0(t){return ot}const Ag={name:"i18n-t",props:bt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>ft(t)||!isNaN(t)}},pd),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||gd({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(l=>l!=="_"),o={};t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=Y(t.plural)?+t.plural:t.plural);const a=JF(e,i),u=s[af](t.keypath,a,o),c=bt({},r),h=Y(t.tag)||je(t.tag)?t.tag:s0();return qn(h,c,u)}}};function ZF(t){return Be(t)&&!Y(t[0])}function i0(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a={};t.locale&&(o.locale=t.locale),Y(t.format)?o.key=t.format:je(t.format)&&(Y(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((f,d)=>n.includes(d)?bt({},f,{[d]:t.format[d]}):f,{}));const u=r(t.value,o,a);let c=[o.key];Be(u)?c=u.map((f,d)=>{const g=s[f.type],y=g?g({[f.type]:f.value,index:d,parts:u}):[f.value];return ZF(y)&&(y[0].key=`${f.type}-${d}`),y}):Y(u)&&(c=[u]);const h=bt({},i),l=Y(t.tag)||je(t.tag)?t.tag:s0();return qn(l,h,c)}}const Sg={name:"i18n-n",props:bt({value:{type:Number,required:!0},format:{type:[String,Object]}},pd),setup(t,e){const n=t.i18n||gd({useScope:"parent",__useComponent:!0});return i0(t,e,Jw,(...r)=>n[uf](...r))}},kg={name:"i18n-d",props:bt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},pd),setup(t,e){const n=t.i18n||gd({useScope:"parent",__useComponent:!0});return i0(t,e,Qw,(...r)=>n[lf](...r))}};function eU(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function tU(t){const e=o=>{const{instance:a,modifiers:u,value:c}=o;if(!a||!a.$)throw mt(ut.UNEXPECTED_ERROR);const h=eU(t,a.$),l=Cg(c);return[Reflect.apply(h.t,h,[...Rg(l)]),h]};return{created:(o,a)=>{const[u,c]=e(a);tf&&t.global===c&&(o.__i18nWatcher=lt(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=c,o.textContent=u},unmounted:o=>{tf&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const u=o.__composer,c=Cg(a);o.textContent=Reflect.apply(u.t,u,[...Rg(c)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function Cg(t){if(Y(t))return{path:t};if(ye(t)){if(!("path"in t))throw mt(ut.REQUIRED_VALUE,"path");return t}else throw mt(ut.INVALID_VALUE)}function Rg(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return Y(n)&&(o.locale=n),ft(s)&&(o.plural=s),ft(i)&&(o.plural=i),[e,a,o]}function nU(t,e,...n){const r=ye(n[0])?n[0]:{},s=!!r.useI18nComponentName;(ke(r.globalInstall)?r.globalInstall:!0)&&(t.component(s?"i18n":Ag.name,Ag),t.component(Sg.name,Sg),t.component(kg.name,kg)),t.directive("t",tU(e))}function rU(t,e,n){return{beforeCreate(){const r=Hn();if(!r)throw mt(ut.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const i=s.i18n;s.__i18n&&(i.__i18n=s.__i18n),i.__root=e,this===this.$root?this.$i18n=Og(t,i):(i.__injectWithOption=!0,this.$i18n=ff(i))}else s.__i18n?this===this.$root?this.$i18n=Og(t,s):this.$i18n=ff({__i18n:s.__i18n,__injectWithOption:!0,__root:e}):this.$i18n=t;s.__i18nGlobal&&r0(e,s,s),t.__onComponentInstanceCreated(this.$i18n),n.__setInstance(r,this.$i18n),this.$t=(...i)=>this.$i18n.t(...i),this.$rt=(...i)=>this.$i18n.rt(...i),this.$tc=(...i)=>this.$i18n.tc(...i),this.$te=(i,o)=>this.$i18n.te(i,o),this.$d=(...i)=>this.$i18n.d(...i),this.$n=(...i)=>this.$i18n.n(...i),this.$tm=i=>this.$i18n.tm(i)},mounted(){},unmounted(){const r=Hn();if(!r)throw mt(ut.UNEXPECTED_ERROR);delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,n.__deleteInstance(r),delete this.$i18n}}}function Og(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[e0](e.pluralizationRules||t.pluralizationRules);const n=_u(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(r=>t.mergeLocaleMessage(r,n[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>t.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>t.mergeNumberFormat(r,e.numberFormats[r])),t}const sU=xr("global-vue-i18n");function iU(t={},e){const n=__VUE_I18N_LEGACY_API__&&ke(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,r=ke(t.globalInjection)?t.globalInjection:!0,s=__VUE_I18N_LEGACY_API__&&n?!!t.allowComposition:!0,i=new Map,[o,a]=oU(t,n),u=xr("");function c(f){return i.get(f)||null}function h(f,d){i.set(f,d)}function l(f){i.delete(f)}{const f={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return s},async install(d,...g){d.__VUE_I18N_SYMBOL__=u,d.provide(d.__VUE_I18N_SYMBOL__,f),!n&&r&&pU(d,f.global),__VUE_I18N_FULL_INSTALL__&&nU(d,f,...g),__VUE_I18N_LEGACY_API__&&n&&d.mixin(rU(a,a.__composer,f));const y=d.unmount;d.unmount=()=>{f.dispose(),y()}},get global(){return a},dispose(){o.stop()},__instances:i,__getInstance:c,__setInstance:h,__deleteInstance:l};return f}}function gd(t={}){const e=Hn();if(e==null)throw mt(ut.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw mt(ut.NOT_INSLALLED);const n=aU(e),r=uU(n),s=n0(e),i=lU(t,s);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!t.__useComponent){if(!n.allowComposition)throw mt(ut.NOT_AVAILABLE_IN_LEGACY_MODE);return hU(e,i,r,t)}if(i==="global")return r0(r,t,s),r;if(i==="parent"){let u=cU(n,e,t.__useComponent);return u==null&&(u=r),u}const o=n;let a=o.__getInstance(e);if(a==null){const u=bt({},t);"__i18n"in s&&(u.__i18n=s.__i18n),r&&(u.__root=r),a=md(u),fU(o,e),o.__setInstance(e,a)}return a}function oU(t,e,n){const r=gf();{const s=__VUE_I18N_LEGACY_API__&&e?r.run(()=>ff(t)):r.run(()=>md(t));if(s==null)throw mt(ut.UNEXPECTED_ERROR);return[r,s]}}function aU(t){{const e=Zt(t.isCE?sU:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw mt(t.isCE?ut.NOT_INSLALLED_WITH_PROVIDE:ut.UNEXPECTED_ERROR);return e}}function lU(t,e){return mu(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function uU(t){return t.mode==="composition"?t.global:t.global.__composer}function cU(t,e,n=!1){let r=null;const s=e.root;let i=e.parent;for(;i!=null;){const o=t;if(t.mode==="composition")r=o.__getInstance(i);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(i);a!=null&&(r=a.__composer,n&&r&&!r[t0]&&(r=null))}if(r!=null||s===i)break;i=i.parent}return r}function fU(t,e,n){bo(()=>{},e),kf(()=>{t.__deleteInstance(e)},e)}function hU(t,e,n,r={}){const s=e==="local",i=Qg(null);if(s&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw mt(ut.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=ke(r.inheritLocale)?r.inheritLocale:!0,a=Ye(s&&o?n.locale.value:Y(r.locale)?r.locale:Qo),u=Ye(s&&o?n.fallbackLocale.value:Y(r.fallbackLocale)||Be(r.fallbackLocale)||ye(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:a.value),c=Ye(_u(a.value,r)),h=Ye(ye(r.datetimeFormats)?r.datetimeFormats:{[a.value]:{}}),l=Ye(ye(r.numberFormats)?r.numberFormats:{[a.value]:{}}),f=s?n.missingWarn:ke(r.missingWarn)||Rr(r.missingWarn)?r.missingWarn:!0,d=s?n.fallbackWarn:ke(r.fallbackWarn)||Rr(r.fallbackWarn)?r.fallbackWarn:!0,g=s?n.fallbackRoot:ke(r.fallbackRoot)?r.fallbackRoot:!0,y=!!r.fallbackFormat,v=nt(r.missing)?r.missing:null,p=nt(r.postTranslation)?r.postTranslation:null,E=s?n.warnHtmlMessage:ke(r.warnHtmlMessage)?r.warnHtmlMessage:!0,T=!!r.escapeParameter,w=s?n.modifiers:ye(r.modifiers)?r.modifiers:{},S=r.pluralRules||s&&n.pluralRules;function N(){return[a.value,u.value,c.value,h.value,l.value]}const L=Ee({get:()=>i.value?i.value.locale.value:a.value,set:_=>{i.value&&(i.value.locale.value=_),a.value=_}}),P=Ee({get:()=>i.value?i.value.fallbackLocale.value:u.value,set:_=>{i.value&&(i.value.fallbackLocale.value=_),u.value=_}}),F=Ee(()=>i.value?i.value.messages.value:c.value),Q=Ee(()=>h.value),Z=Ee(()=>l.value);function W(){return i.value?i.value.getPostTranslationHandler():p}function te(_){i.value&&i.value.setPostTranslationHandler(_)}function ce(){return i.value?i.value.getMissingHandler():v}function Te(_){i.value&&i.value.setMissingHandler(_)}function le(_){return N(),_()}function se(..._){return i.value?le(()=>Reflect.apply(i.value.t,null,[..._])):le(()=>"")}function pe(..._){return i.value?Reflect.apply(i.value.rt,null,[..._]):""}function Ke(..._){return i.value?le(()=>Reflect.apply(i.value.d,null,[..._])):le(()=>"")}function Ze(..._){return i.value?le(()=>Reflect.apply(i.value.n,null,[..._])):le(()=>"")}function qe(_){return i.value?i.value.tm(_):{}}function Fe(_,I){return i.value?i.value.te(_,I):!1}function Et(_){return i.value?i.value.getLocaleMessage(_):{}}function rt(_,I){i.value&&(i.value.setLocaleMessage(_,I),c.value[_]=I)}function $(_,I){i.value&&i.value.mergeLocaleMessage(_,I)}function x(_){return i.value?i.value.getDateTimeFormat(_):{}}function V(_,I){i.value&&(i.value.setDateTimeFormat(_,I),h.value[_]=I)}function K(_,I){i.value&&i.value.mergeDateTimeFormat(_,I)}function de(_){return i.value?i.value.getNumberFormat(_):{}}function Ie(_,I){i.value&&(i.value.setNumberFormat(_,I),l.value[_]=I)}function ie(_,I){i.value&&i.value.mergeNumberFormat(_,I)}const b={get id(){return i.value?i.value.id:-1},locale:L,fallbackLocale:P,messages:F,datetimeFormats:Q,numberFormats:Z,get inheritLocale(){return i.value?i.value.inheritLocale:o},set inheritLocale(_){i.value&&(i.value.inheritLocale=_)},get availableLocales(){return i.value?i.value.availableLocales:Object.keys(c.value)},get modifiers(){return i.value?i.value.modifiers:w},get pluralRules(){return i.value?i.value.pluralRules:S},get isGlobal(){return i.value?i.value.isGlobal:!1},get missingWarn(){return i.value?i.value.missingWarn:f},set missingWarn(_){i.value&&(i.value.missingWarn=_)},get fallbackWarn(){return i.value?i.value.fallbackWarn:d},set fallbackWarn(_){i.value&&(i.value.missingWarn=_)},get fallbackRoot(){return i.value?i.value.fallbackRoot:g},set fallbackRoot(_){i.value&&(i.value.fallbackRoot=_)},get fallbackFormat(){return i.value?i.value.fallbackFormat:y},set fallbackFormat(_){i.value&&(i.value.fallbackFormat=_)},get warnHtmlMessage(){return i.value?i.value.warnHtmlMessage:E},set warnHtmlMessage(_){i.value&&(i.value.warnHtmlMessage=_)},get escapeParameter(){return i.value?i.value.escapeParameter:T},set escapeParameter(_){i.value&&(i.value.escapeParameter=_)},t:se,getPostTranslationHandler:W,setPostTranslationHandler:te,getMissingHandler:ce,setMissingHandler:Te,rt:pe,d:Ke,n:Ze,tm:qe,te:Fe,getLocaleMessage:Et,setLocaleMessage:rt,mergeLocaleMessage:$,getDateTimeFormat:x,setDateTimeFormat:V,mergeDateTimeFormat:K,getNumberFormat:de,setNumberFormat:Ie,mergeNumberFormat:ie};function m(_){_.locale.value=a.value,_.fallbackLocale.value=u.value,Object.keys(c.value).forEach(I=>{_.mergeLocaleMessage(I,c.value[I])}),Object.keys(h.value).forEach(I=>{_.mergeDateTimeFormat(I,h.value[I])}),Object.keys(l.value).forEach(I=>{_.mergeNumberFormat(I,l.value[I])}),_.escapeParameter=T,_.fallbackFormat=y,_.fallbackRoot=g,_.fallbackWarn=d,_.missingWarn=f,_.warnHtmlMessage=E}return h_(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw mt(ut.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const _=i.value=t.proxy.$i18n.__composer;e==="global"?(a.value=_.locale.value,u.value=_.fallbackLocale.value,c.value=_.messages.value,h.value=_.datetimeFormats.value,l.value=_.numberFormats.value):s&&m(_)}),b}const dU=["locale","fallbackLocale","availableLocales"],mU=["t","rt","d","n","tm"];function pU(t,e){const n=Object.create(null);dU.forEach(r=>{const s=Object.getOwnPropertyDescriptor(e,r);if(!s)throw mt(ut.UNEXPECTED_ERROR);const i=Ve(s.value)?{get(){return s.value.value},set(o){s.value.value=o}}:{get(){return s.get&&s.get()}};Object.defineProperty(n,r,i)}),t.config.globalProperties.$i18n=n,mU.forEach(r=>{const s=Object.getOwnPropertyDescriptor(e,r);if(!s||!s.value)throw mt(ut.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${r}`,s)})}MF(HF);FF(_F);UF(jw);YF();if(__INTLIFY_PROD_DEVTOOLS__){const t=Ki();t.__INTLIFY__=!0,SF(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const gU={message:"This is an about page"},_U={listen:"Listen to Great Music!",music:"In the quiet night, listening to the songs with their own stories, my heart was broken, I cried, and I remembered what happened. What is the truth in the dreamlike music world? The rhythm is dynamic, sweet and beautiful, the blues love song, the soulful singing, the rhythm is dynamic, and every note is so full of emotion and sweet and beautiful, like silk. Sound, with unique taste, touches your heart.",songs:"Songs"},yU={my_songs:"My Songs"},vU={comment_count:"No comments | 1 comment | {count} comments",submit:"Submit",sort_comment_latest:"Latest",sort_comment_oldest:"Oldest"},bU={about:"About",login_register:"Login / Register",manage:"Manage",logout:"Logout"},wU={title:"Your Account",login:"Login",register:"Register"},EU={song_title:"Song Title",genre:"Genre",submit:"Submit",goback:"Go Back"},TU={email:"Email",password:"Password"},IU={name:"Name",email:"Email",age:"Age",password:"Password",confirm_password:"Confirm Password",country:"Country",accept:"I accept Music's {0}",tos:"Terms of Service"},AU={upload:"Upload",drop:"Drop your files here"},SU={about:gU,home:_U,manage:yU,song:vU,header:bU,auth:wU,composition_item:EU,login:TU,register:IU,upload:AU},kU={message:""},CU={listen:"!",music:"",songs:""},RU={my_songs:""},OU={comment_count:" | 1 | {count} ",submit:"",sort_comment_latest:"",sort_comment_oldest:""},NU={about:"",login_register:" / ",manage:"",logout:""},LU={title:"",login:"",register:""},DU={song_title:"",genre:"",submit:"",goback:""},xU={email:"",password:""},PU={name:"",email:"",age:"",password:"",confirm_password:"",country:"",accept:" {0}",tos:""},MU={upload:"",drop:""},FU={about:kU,home:CU,manage:RU,song:OU,header:NU,auth:LU,composition_item:DU,login:xU,register:PU,upload:MU},UU=iU({locale:"zh",fallbackLocale:"en",messages:{en:SU,zh:FU},numberFormats:{en:{currency:{style:"currency",currency:"USD"}},cn:{currency:{style:"currency",currency:"CNY"}}}});let ir;fn().onAuthStateChanged(()=>{ir||(ir=DT(ZL),ir.use(MT()),ir.use(Ew),ir.use(xM),ir.use(UU),ir.directive("icon",PM),ir.mount("#app"))});
